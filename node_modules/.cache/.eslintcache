[{"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\index.js":"1","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\App.js":"2","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\components\\Navbar.js":"3","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\utils\\wallet.js":"4","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\utils\\operation.js":"5","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\utils\\tzkt.js":"6","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\utils\\tezos.js":"7","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\index.js":"8","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\App.js":"9","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\utils\\tzkt.js":"10","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\utils\\operation.js":"11","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\utils\\wallet.js":"12","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\utils\\tezos.js":"13","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\components\\address-card.js":"14","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\components\\exchange-cost.js":"15","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\components\\deposit-funds.js":"16","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\components\\confirm.js":"17","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\components\\deadline.js":"18"},{"size":269,"mtime":1678788091991,"results":"19","hashOfConfig":"20"},{"size":2597,"mtime":1680084951785,"results":"21","hashOfConfig":"20"},{"size":1164,"mtime":1678963244820,"results":"22","hashOfConfig":"20"},{"size":674,"mtime":1680079676710,"results":"23","hashOfConfig":"20"},{"size":965,"mtime":1680084664704,"results":"24","hashOfConfig":"20"},{"size":310,"mtime":1680083692387,"results":"25","hashOfConfig":"20"},{"size":284,"mtime":1678963244822,"results":"26","hashOfConfig":"20"},{"size":269,"mtime":1678788091991,"results":"27","hashOfConfig":"28"},{"size":6899,"mtime":1681751769238,"results":"29","hashOfConfig":"28"},{"size":310,"mtime":1681748375342,"results":"30","hashOfConfig":"28"},{"size":2134,"mtime":1681748378976,"results":"31","hashOfConfig":"28"},{"size":675,"mtime":1681652128174,"results":"32","hashOfConfig":"28"},{"size":284,"mtime":1678963244822,"results":"33","hashOfConfig":"28"},{"size":679,"mtime":1681751777546,"results":"34","hashOfConfig":"28"},{"size":554,"mtime":1681736759276,"results":"35","hashOfConfig":"28"},{"size":504,"mtime":1681685710128,"results":"36","hashOfConfig":"28"},{"size":1078,"mtime":1681742858285,"results":"37","hashOfConfig":"28"},{"size":268,"mtime":1681748514421,"results":"38","hashOfConfig":"28"},{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},"1u5r7w6",{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},"1sok8tp",{"filePath":"57","messages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59"},{"filePath":"60","messages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"62","messages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"64","messages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"66","messages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"68","messages":"69","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"72","messages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"74","messages":"75","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"76","messages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\index.js",[],["78","79"],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\App.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\components\\Navbar.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\utils\\wallet.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\utils\\operation.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\utils\\tzkt.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\lottery-dapp-boilerplate\\src\\utils\\tezos.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\index.js",[],["80","81"],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\App.js",["82","83","84","85","86","87"],"import { useState, useEffect } from \"react\";\r\nimport React from \"react\";\r\n\r\n// Stylesheet\r\nimport './App.css';\r\n\r\n// Components\r\nimport { connectWallet, getAccount } from \"./utils/wallet\";\r\nimport AddressCard from \"./components/address-card\";\r\nimport ExchangeCost from \"./components/exchange-cost\";\r\nimport Confirm from \"./components/confirm\";\r\n\r\n// Operation\r\n// import { buyTicketOperation, endGameOperation } from \"./utils/operation\";\r\nimport { fetchStorage } from \"./utils/tzkt\";\r\nimport { claimOwnerFundsOperation, claimCounterpartyFundsOperation, addBalanceOwnerOperation, addBalanceCounterpartyOperation, revertFundsOperation } from \"./utils/operation\";\r\n\r\nimport Deadline from \"./components/deadline\";\r\n\r\n\r\nconst App = () => {\r\n\r\n  // Players holding lottery tickets\r\n  const [ownerHash, setOwnerHash] = useState(\"\");\r\n  const [counterpartyHash, setCounterpartyHash] = useState(\"\");\r\n  const [adminHash, setAdminHash] = useState(\"\");\r\n  const [ownerBalance, setOwnerBalance] = useState(0);\r\n  const [counterpartyBalance, setCounterpartyBalance] = useState(0);\r\n  const [fromOwner, setFromOwner] = useState(0);\r\n  const [fromCounterparty, setFromCounterparty] = useState(0);\r\n  \r\n  const [deadline, setDeadline] = useState(Date.now());\r\n\r\n  const [claimLoading, setClaimLoading] = useState(false);\r\n  const [depositLoading, setDepositLoading] = useState(false);\r\n  const [revertLoading, setRevertLoading] = useState(false);\r\n\r\n  const [secretKey, setSecretKey] = useState(\"\");\r\n  const [inputSecretKey, setInputSecretKey] = useState(\"\");\r\n\r\n  const [inputFunds, setInputFunds] = useState(1);\r\n\r\n\r\n  // Set players and tickets remaining\r\n  useEffect(() => {\r\n    // TODO 9 - Fetch parties' hashes and their balances from storage\r\n    (async () => {\r\n      const storage = await fetchStorage();\r\n      setOwnerHash(storage.owner);\r\n      setCounterpartyHash(storage.counterparty);\r\n      setAdminHash(storage.admin);\r\n      setOwnerBalance(storage.ownerBalance);\r\n      setCounterpartyBalance(storage.counterpartyBalance);\r\n      setFromOwner(storage.fromOwner);\r\n      setFromCounterparty(storage.fromCounterparty);\r\n      \r\n      setDeadline(Date.parse(storage.epoch));\r\n\r\n      setSecretKey(storage.hashedSecret.toString());\r\n      console.log(\"secret key \" + secretKey);\r\n    })();\r\n  }, []);\r\n\r\n  // Get the active account\r\n  useEffect(() => {\r\n    (async () => {\r\n      // TODO 5.b - Get the active account\r\n      const account = await getAccount();\r\n      setAccount(account);\r\n    })();\r\n  }, []);\r\n\r\n  const [account, setAccount] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      // TODO 5.b - Get the active account\r\n      const account = await getAccount();\r\n      setAccount(account);\r\n    })();\r\n  }, []);\r\n\r\n  // TODO 4.a - Complete onConnectWallet function\r\n  const onConnectWallet = async () => {\r\n    await connectWallet();\r\n    const account = await getAccount();\r\n    setAccount(account);\r\n  };\r\n\r\n  const onClaimFunds = async () => {\r\n    try {\r\n      setClaimLoading(true);\r\n      console.log(account === ownerHash);\r\n      if (account) {\r\n        if (account === ownerHash){\r\n            await claimOwnerFundsOperation();\r\n            alert(\"Owner claimed!\")\r\n        }\r\n        else if (account === counterpartyHash) {\r\n            await claimCounterpartyFundsOperation(inputSecretKey);\r\n            alert(\"Counterparty claimed!\");\r\n        }    \r\n        else {\r\n            console.log(ownerHash);\r\n            console.log(account);\r\n            alert(\"Warning: Your account is not authorised to claim funds.\");\r\n        }\r\n      }\r\n    } catch(err) {\r\n      alert(\"Error: \", err.message);\r\n    }\r\n    setClaimLoading(false);\r\n  };\r\n\r\n\r\n  const onDepositFunds = async () => {\r\n    try {\r\n      setDepositLoading(true);\r\n      console.log(account === ownerHash);\r\n      if (account) {\r\n        if (account === ownerHash){\r\n          console.log(\"Owner trying to deposit.\");\r\n            await addBalanceOwnerOperation(inputFunds);\r\n            alert(\"Success: You have successfully deposited funds!\")\r\n        }\r\n        else if (account === counterpartyHash) {\r\n          console.log(\"Counterparty trying to deposit.\");\r\n            await addBalanceCounterpartyOperation(inputFunds);\r\n            alert(\"Success: You have successfully deposited funds!\");\r\n        }    \r\n        else {\r\n            console.log(ownerHash);\r\n            console.log(account);\r\n            alert(\"Warning: Your account is not authorised to deposit funds.\");\r\n        }\r\n      }\r\n    } catch(err) {\r\n      alert(\"Transaction Failed: \", err.message);\r\n    }\r\n    setDepositLoading(false);\r\n  };\r\n\r\n  const onRevertFunds = async() => {\r\n      try {\r\n      setRevertLoading(true);\r\n      await revertFundsOperation();\r\n      setRevertLoading(false);\r\n      } catch(err) {\r\n        alert(\"Revert funds failed: \", err.message);\r\n      }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      \r\n      <div className=\"navbar navbar-dark bg-dark fixed-top\">\r\n        <div className=\"container py-2\">\r\n          <a href=\"/\" className=\"navbar-brand\">\r\n            Tezos Escrow Contract\r\n          </a>\r\n          <div className=\"d-flex\">\r\n            {/* TODO 4.b - Call connectWallet function onClick  */}\r\n            <button onClick={onConnectWallet} className=\"btn btn-outline-info\">\r\n            {/* TODO 5.a - Show account address if wallet is connected */}\r\n            { account ? account : \"Connect Wallet\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      \r\n\r\n      <div className=\"vertical-space\">  </div>\r\n      <div className=\"vertical-space\">  </div>\r\n      \r\n      <div className=\"main\">\r\n        <AddressCard \r\n          account={account}\r\n          ownerHash={ownerHash}\r\n          counterpartyHash={counterpartyHash}\r\n          adminHash={adminHash}\r\n        />\r\n        <div className=\"exchange\"> <ExchangeCost fromOwner={fromOwner} fromCounterparty={fromCounterparty} /> </div>\r\n\r\n        <div className=\"exchange\"> <Deadline dl={deadline}/> </div>\r\n\r\n        <br/><br/>\r\n\r\n        <div class=\"deposit controls\">\r\n          <label>\r\n            Amount (in ꜩ):\r\n            <input type=\"number\" min=\"1\" value={inputFunds} prefix=\"ꜩ\" onChange={(e) => setInputFunds(e.target.value)} className=\"form-control\"/>\r\n          </label>\r\n          &nbsp;&nbsp;\r\n          <Confirm action={\"Deposit\"} func={onDepositFunds} />\r\n        </div>\r\n        <div class=\"claim controls\">\r\n          <label>\r\n            Secret Key:\r\n            <input type=\"text\" value={inputSecretKey} onChange={(e) => setInputSecretKey(e.target.value)} className=\"form-control\"/>\r\n          </label>\r\n          &nbsp;&nbsp;\r\n          <Confirm action={\"Claim\"} func={onClaimFunds} />\r\n        </div>\r\n        <div class=\"revert controls\">\r\n          <Confirm action={\"Revert\"} func={onRevertFunds} />\r\n        </div>\r\n      </div>\r\n      \r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\utils\\tzkt.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\utils\\operation.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\utils\\wallet.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\utils\\tezos.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\components\\address-card.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\components\\exchange-cost.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\components\\deposit-funds.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\components\\confirm.js",[],"C:\\Users\\Joshua Doros\\Desktop\\Tezos\\tezos-taquito-escrow\\src\\components\\deadline.js",[],{"ruleId":"88","replacedBy":"89"},{"ruleId":"90","replacedBy":"91"},{"ruleId":"88","replacedBy":"92"},{"ruleId":"90","replacedBy":"93"},{"ruleId":"94","severity":1,"message":"95","line":27,"column":10,"nodeType":"96","messageId":"97","endLine":27,"endColumn":22},{"ruleId":"94","severity":1,"message":"98","line":28,"column":10,"nodeType":"96","messageId":"97","endLine":28,"endColumn":29},{"ruleId":"94","severity":1,"message":"99","line":34,"column":10,"nodeType":"96","messageId":"97","endLine":34,"endColumn":22},{"ruleId":"94","severity":1,"message":"100","line":35,"column":10,"nodeType":"96","messageId":"97","endLine":35,"endColumn":24},{"ruleId":"94","severity":1,"message":"101","line":36,"column":10,"nodeType":"96","messageId":"97","endLine":36,"endColumn":23},{"ruleId":"102","severity":1,"message":"103","line":62,"column":6,"nodeType":"104","endLine":62,"endColumn":8,"suggestions":"105"},"no-native-reassign",["106"],"no-negated-in-lhs",["107"],["106"],["107"],"no-unused-vars","'ownerBalance' is assigned a value but never used.","Identifier","unusedVar","'counterpartyBalance' is assigned a value but never used.","'claimLoading' is assigned a value but never used.","'depositLoading' is assigned a value but never used.","'revertLoading' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'secretKey'. Either include it or remove the dependency array.","ArrayExpression",["108"],"no-global-assign","no-unsafe-negation",{"desc":"109","fix":"110"},"Update the dependencies array to be: [secretKey]",{"range":"111","text":"112"},[2297,2299],"[secretKey]"]