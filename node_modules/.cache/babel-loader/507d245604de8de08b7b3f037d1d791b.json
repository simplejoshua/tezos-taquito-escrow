{"ast":null,"code":"import { Prefix, prefixLength, b58cencode, prefix, buf2hex, b58cdecode, InvalidKeyHashError, InvalidPublicKeyError, InvalidAddressError, InvalidOperationKindError, validateBlock, ValidationResult } from '@taquito/utils';\nimport BigNumber$1, { BigNumber } from 'bignumber.js';\n\nconst toHexString = bytes => bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, '0'), '');\n\nconst pad = function (num) {\n  let paddingLen = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  return num.toString(16).padStart(paddingLen, '0');\n};\n/*\r\n * Some code in this file is originally from sotez\r\n * Copyright (c) 2018 Andrew Kishino\r\n */\n// See: https://tezos.gitlab.io/protocols/005_babylon.html#transactions-now-have-an-entrypoint\n\n\nconst ENTRYPOINT_MAX_LENGTH = 31;\nvar CODEC;\n\n(function (CODEC) {\n  CODEC[\"SECRET\"] = \"secret\";\n  CODEC[\"RAW\"] = \"raw\";\n  CODEC[\"TZ1\"] = \"tz1\";\n  CODEC[\"BRANCH\"] = \"branch\";\n  CODEC[\"ZARITH\"] = \"zarith\";\n  CODEC[\"PUBLIC_KEY\"] = \"public_key\";\n  CODEC[\"PKH\"] = \"pkh\";\n  CODEC[\"DELEGATE\"] = \"delegate\";\n  CODEC[\"SCRIPT\"] = \"script\";\n  CODEC[\"BALLOT_STATEMENT\"] = \"ballotStmt\";\n  CODEC[\"PROPOSAL\"] = \"proposal\";\n  CODEC[\"PROPOSAL_ARR\"] = \"proposalArr\";\n  CODEC[\"INT32\"] = \"int32\";\n  CODEC[\"INT16\"] = \"int16\";\n  CODEC[\"PARAMETERS\"] = \"parameters\";\n  CODEC[\"ADDRESS\"] = \"address\";\n  CODEC[\"OPERATION\"] = \"operation\";\n  CODEC[\"OP_ACTIVATE_ACCOUNT\"] = \"activate_account\";\n  CODEC[\"OP_DELEGATION\"] = \"delegation\";\n  CODEC[\"OP_TRANSACTION\"] = \"transaction\";\n  CODEC[\"OP_ORIGINATION\"] = \"origination\";\n  CODEC[\"OP_BALLOT\"] = \"ballot\";\n  CODEC[\"OP_ENDORSEMENT\"] = \"endorsement\";\n  CODEC[\"OP_SEED_NONCE_REVELATION\"] = \"seed_nonce_revelation\";\n  CODEC[\"OP_REVEAL\"] = \"reveal\";\n  CODEC[\"OP_PROPOSALS\"] = \"proposals\";\n  CODEC[\"OP_REGISTER_GLOBAL_CONSTANT\"] = \"register_global_constant\";\n  CODEC[\"VALUE\"] = \"value\";\n  CODEC[\"MANAGER\"] = \"manager\";\n  CODEC[\"BLOCK_PAYLOAD_HASH\"] = \"blockPayloadHash\";\n})(CODEC || (CODEC = {})); // See https://tezos.gitlab.io/whitedoc/michelson.html#full-grammar\n\n\nconst opMapping = {\n  '00': 'parameter',\n  '01': 'storage',\n  '02': 'code',\n  '03': 'False',\n  '04': 'Elt',\n  '05': 'Left',\n  '06': 'None',\n  '07': 'Pair',\n  '08': 'Right',\n  '09': 'Some',\n  '0a': 'True',\n  '0b': 'Unit',\n  '0c': 'PACK',\n  '0d': 'UNPACK',\n  '0e': 'BLAKE2B',\n  '0f': 'SHA256',\n  '10': 'SHA512',\n  '11': 'ABS',\n  '12': 'ADD',\n  '13': 'AMOUNT',\n  '14': 'AND',\n  '15': 'BALANCE',\n  '16': 'CAR',\n  '17': 'CDR',\n  '18': 'CHECK_SIGNATURE',\n  '19': 'COMPARE',\n  '1a': 'CONCAT',\n  '1b': 'CONS',\n  '1c': 'CREATE_ACCOUNT',\n  '1d': 'CREATE_CONTRACT',\n  '1e': 'IMPLICIT_ACCOUNT',\n  '1f': 'DIP',\n  '20': 'DROP',\n  '21': 'DUP',\n  '22': 'EDIV',\n  '23': 'EMPTY_MAP',\n  '24': 'EMPTY_SET',\n  '25': 'EQ',\n  '26': 'EXEC',\n  '27': 'FAILWITH',\n  '28': 'GE',\n  '29': 'GET',\n  '2a': 'GT',\n  '2b': 'HASH_KEY',\n  '2c': 'IF',\n  '2d': 'IF_CONS',\n  '2e': 'IF_LEFT',\n  '2f': 'IF_NONE',\n  '30': 'INT',\n  '31': 'LAMBDA',\n  '32': 'LE',\n  '33': 'LEFT',\n  '34': 'LOOP',\n  '35': 'LSL',\n  '36': 'LSR',\n  '37': 'LT',\n  '38': 'MAP',\n  '39': 'MEM',\n  '3a': 'MUL',\n  '3b': 'NEG',\n  '3c': 'NEQ',\n  '3d': 'NIL',\n  '3e': 'NONE',\n  '3f': 'NOT',\n  '40': 'NOW',\n  '41': 'OR',\n  '42': 'PAIR',\n  '43': 'PUSH',\n  '44': 'RIGHT',\n  '45': 'SIZE',\n  '46': 'SOME',\n  '47': 'SOURCE',\n  '48': 'SENDER',\n  '49': 'SELF',\n  '4a': 'STEPS_TO_QUOTA',\n  '4b': 'SUB',\n  '4c': 'SWAP',\n  '4d': 'TRANSFER_TOKENS',\n  '4e': 'SET_DELEGATE',\n  '4f': 'UNIT',\n  '50': 'UPDATE',\n  '51': 'XOR',\n  '52': 'ITER',\n  '53': 'LOOP_LEFT',\n  '54': 'ADDRESS',\n  '55': 'CONTRACT',\n  '56': 'ISNAT',\n  '57': 'CAST',\n  '58': 'RENAME',\n  '59': 'bool',\n  '5a': 'contract',\n  '5b': 'int',\n  '5c': 'key',\n  '5d': 'key_hash',\n  '5e': 'lambda',\n  '5f': 'list',\n  '60': 'map',\n  '61': 'big_map',\n  '62': 'nat',\n  '63': 'option',\n  '64': 'or',\n  '65': 'pair',\n  '66': 'set',\n  '67': 'signature',\n  '68': 'string',\n  '69': 'bytes',\n  '6a': 'mutez',\n  '6b': 'timestamp',\n  '6c': 'unit',\n  '6d': 'operation',\n  '6e': 'address',\n  '6f': 'SLICE',\n  '70': 'DIG',\n  '71': 'DUG',\n  '72': 'EMPTY_BIG_MAP',\n  '73': 'APPLY',\n  '74': 'chain_id',\n  '75': 'CHAIN_ID',\n  '76': 'LEVEL',\n  '77': 'SELF_ADDRESS',\n  '78': 'never',\n  '79': 'NEVER',\n  '7a': 'UNPAIR',\n  '7b': 'VOTING_POWER',\n  '7c': 'TOTAL_VOTING_POWER',\n  '7d': 'KECCAK',\n  '7e': 'SHA3',\n  '7f': 'PAIRING_CHECK',\n  '80': 'bls12_381_g1',\n  '81': 'bls12_381_g2',\n  '82': 'bls12_381_fr',\n  '83': 'sapling_state',\n  '84': 'sapling_transaction',\n  '85': 'SAPLING_EMPTY_STATE',\n  '86': 'SAPLING_VERIFY_UPDATE',\n  '87': 'ticket',\n  '88': 'TICKET',\n  '89': 'READ_TICKET',\n  '8a': 'SPLIT_TICKET',\n  '8b': 'JOIN_TICKETS',\n  '8c': 'GET_AND_UPDATE',\n  '8d': 'chest',\n  '8e': 'chest_key',\n  '8f': 'OPEN_CHEST',\n  '90': 'VIEW',\n  '91': 'view',\n  '92': 'constant',\n  '93': 'SUB_MUTEZ'\n};\n\nconst opMappingReverse = (() => {\n  const result = {};\n  Object.keys(opMapping).forEach(key => {\n    result[opMapping[key]] = key;\n  });\n  return result;\n})(); // See https://tezos.gitlab.io/api/p2p.html\n\n\nconst kindMapping = {\n  0x04: 'activate_account',\n  0x6b: 'reveal',\n  0x6e: 'delegation',\n  0x6c: 'transaction',\n  0x6d: 'origination',\n  0x06: 'ballot',\n  0x00: 'endorsement',\n  0x01: 'seed_nonce_revelation',\n  0x05: 'proposals',\n  0x6f: 'register_global_constant'\n};\n\nconst kindMappingReverse = (() => {\n  const result = {};\n  Object.keys(kindMapping).forEach(key => {\n    const keyNum = typeof key === 'string' ? parseInt(key, 10) : key;\n    result[kindMapping[keyNum]] = pad(keyNum, 2);\n  });\n  return result;\n})(); // See https://tezos.gitlab.io/protocols/005_babylon.html#transactions-now-have-an-entrypoint\n\n\nconst entrypointMapping = {\n  '00': 'default',\n  '01': 'root',\n  '02': 'do',\n  '03': 'set_delegate',\n  '04': 'remove_delegate'\n};\n\nconst entrypointMappingReverse = (() => {\n  const result = {};\n  Object.keys(entrypointMapping).forEach(key => {\n    result[entrypointMapping[key]] = key;\n  });\n  return result;\n})();\n/**\r\n *  @category Error\r\n *  @description Error that indicates an invalid block hash being passed or used\r\n */\n\n\nclass InvalidBlockHashError extends Error {\n  constructor(message) {\n    super(message);\n    this.message = message;\n    this.name = 'InvalidBlockHashError';\n  }\n\n}\n/**\r\n *  @category Error\r\n *  @description Error that indicates an invalid operation schema being passed or used\r\n */\n\n\nclass InvalidOperationSchemaError extends Error {\n  constructor(message) {\n    super(message);\n    this.message = message;\n    this.name = 'InvalidOperationSchemaError';\n  }\n\n}\n/**\r\n *  @category Error\r\n *  @description Error that indicates an entrypoint exceeding maximum size\r\n */\n\n\nclass OversizedEntryPointError extends Error {\n  constructor(entrypoint) {\n    super(`Oversized entrypoint: ${entrypoint}. The maximum length of entrypoint is ${ENTRYPOINT_MAX_LENGTH}`);\n    this.entrypoint = entrypoint;\n    this.name = 'OversizedEntryPointError';\n  }\n\n}\n/**\r\n *  @category Error\r\n *  @description Error that indicates an invalid ballot value\r\n */\n\n\nclass InvalidBallotValueError extends Error {\n  constructor(ballotValue) {\n    super(`The ballot value '${ballotValue}' is invalid`);\n    this.ballotValue = ballotValue;\n    this.name = 'InvalidBallotValueError';\n  }\n\n}\n/**\r\n *  @category Error\r\n *  @description Error that indicates a failure when trying to decode ballot value\r\n */\n\n\nclass DecodeBallotValueError extends Error {\n  constructor(ballotValue) {\n    super(`Failed to decode ballot value ${ballotValue}`);\n    this.ballotValue = ballotValue;\n    this.name = 'DecodeBallotValueError';\n  }\n\n}\n/**\r\n *  @category Error\r\n *  @description Error that indicates an invalid hex string have been passed or used\r\n */\n\n\nclass InvalidHexStringError extends Error {\n  constructor(hexString) {\n    super(`The hex string '${hexString}' is invalid`);\n    this.hexString = hexString;\n    this.name = 'InvalidHexStringError';\n  }\n\n}\n/**\r\n *  @category Error\r\n *  @description Error that indicates unexpected Michelson Value being passed or used\r\n */\n\n\nclass UnexpectedMichelsonValueError extends Error {\n  constructor(value) {\n    super(`Failed to encode michelson value '${value}'`);\n    this.value = value;\n    this.name = 'UnexpectedMichelsonValueError';\n  }\n\n}\n/**\r\n *  @category Error\r\n *  @description Error that indicates a failure when trying to decode an operation\r\n */\n\n\nclass OperationDecodingError extends Error {\n  constructor(message) {\n    super(message);\n    this.message = message;\n    this.name = 'OperationDecodingError';\n  }\n\n}\n/**\r\n *  @category Error\r\n *  @description Error that indicates a failure when trying to encode an operation\r\n */\n\n\nclass OperationEncodingError extends Error {\n  constructor(message) {\n    super(message);\n    this.message = message;\n    this.name = 'OperationEncodingError';\n  }\n\n}\n/**\r\n *  @category Error\r\n *  @description Error that indicates an unsupported operation being passed or used\r\n */\n\n\nclass UnsupportedOperationError extends Error {\n  constructor(op) {\n    super(`The operation '${op}' is unsupported`);\n    this.op = op;\n    this.name = 'UnsupportedOperationError';\n  }\n\n}\n\nclass Uint8ArrayConsumer {\n  constructor(arr) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.arr = arr;\n    this.offset = offset;\n  }\n\n  static fromHexString(hex) {\n    const lowHex = hex.toLowerCase();\n\n    if (/^(([a-f]|\\d){2})*$/.test(lowHex)) {\n      const arr = new Uint8Array((lowHex.match(/([a-z]|\\d){2}/g) || []).map(byte => parseInt(byte, 16)));\n      return new Uint8ArrayConsumer(arr);\n    } else {\n      throw new InvalidHexStringError(lowHex);\n    }\n  }\n\n  consume(count) {\n    const subArr = this.arr.subarray(this.offset, this.offset + count);\n    this.offset += count;\n    return subArr;\n  }\n\n  get(idx) {\n    return this.arr[this.offset + idx];\n  }\n\n  length() {\n    return this.arr.length - this.offset;\n  }\n\n}\n\nconst isPrim = value => {\n  return 'prim' in value;\n};\n\nconst isBytes = value => {\n  return 'bytes' in value && typeof value.bytes === 'string';\n};\n\nconst isString = value => {\n  return 'string' in value && typeof value.string === 'string';\n};\n\nconst isInt = value => {\n  return 'int' in value && typeof value.int === 'string';\n};\n\nconst scriptEncoder = script => {\n  const code = valueEncoder(script.code);\n  const storage = valueEncoder(script.storage);\n  return `${pad(code.length / 2, 8)}${code}${pad(storage.length / 2, 8)}${storage}`;\n};\n\nconst scriptDecoder = value => {\n  const code = extractRequiredLen(value);\n  const storage = extractRequiredLen(value);\n  return {\n    code: valueDecoder(new Uint8ArrayConsumer(code)),\n    storage: valueDecoder(new Uint8ArrayConsumer(storage))\n  };\n};\n\nconst valueEncoder = value => {\n  if (Array.isArray(value)) {\n    const encoded = value.map(x => valueEncoder(x)).join('');\n    const len = encoded.length / 2;\n    return `02${pad(len)}${encoded}`;\n  } else if (isPrim(value)) {\n    return primEncoder(value);\n  } else if (isBytes(value)) {\n    return bytesEncoder(value);\n  } else if (isString(value)) {\n    return stringEncoder(value);\n  } else if (isInt(value)) {\n    return intEncoder(value);\n  }\n\n  throw new UnexpectedMichelsonValueError(value);\n};\n\nconst valueDecoder = value => {\n  const preamble = value.consume(1);\n\n  switch (preamble[0]) {\n    case 0x0a:\n      return bytesDecoder(value);\n\n    case 0x01:\n      return stringDecoder(value);\n\n    case 0x00:\n      return intDecoder(value);\n\n    case 0x02:\n      {\n        const val = new Uint8ArrayConsumer(extractRequiredLen(value));\n        const results = [];\n\n        while (val.length() > 0) {\n          results.push(valueDecoder(val));\n        }\n\n        return results;\n      }\n\n    default:\n      return primDecoder(value, preamble);\n  }\n};\n\nconst extractRequiredLen = function (value) {\n  let bytesLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4;\n  const len = value.consume(bytesLength);\n  const valueLen = parseInt(Buffer.from(len).toString('hex'), 16);\n  return value.consume(valueLen);\n};\n\nconst bytesEncoder = value => {\n  if (!/^([A-Fa-f0-9]{2})*$/.test(value.bytes)) {\n    throw new InvalidHexStringError(value.bytes);\n  }\n\n  const len = value.bytes.length / 2;\n  return `0a${pad(len)}${value.bytes}`;\n};\n\nconst bytesDecoder = value => {\n  const bytes = extractRequiredLen(value);\n  return {\n    bytes: Buffer.from(bytes).toString('hex')\n  };\n};\n\nconst stringEncoder = value => {\n  const str = Buffer.from(value.string, 'utf8').toString('hex');\n  const hexLength = str.length / 2;\n  return `01${pad(hexLength)}${str}`;\n};\n\nconst stringDecoder = value => {\n  const str = extractRequiredLen(value);\n  return {\n    string: Buffer.from(str).toString('utf8')\n  };\n};\n\nconst intEncoder = _ref => {\n  let {\n    int\n  } = _ref;\n  const num = new BigNumber(int, 10);\n  const positiveMark = num.toString(2)[0] === '-' ? '1' : '0';\n  const binary = num.toString(2).replace(/-/g, '');\n  const pad = binary.length <= 6 ? 6 : (binary.length - 6) % 7 ? binary.length + 7 - (binary.length - 6) % 7 : binary.length;\n  const splitted = binary.padStart(pad, '0').match(/\\d{6,7}/g); // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n  const reversed = splitted.reverse();\n  reversed[0] = positiveMark + reversed[0];\n  const numHex = reversed.map((x, i) => // Add one to the last chunk\n  parseInt((i === reversed.length - 1 ? '0' : '1') + x, 2).toString(16).padStart(2, '0'));\n  return `00${numHex.join('')}`;\n};\n\nconst intDecoder = value => {\n  let c = value.consume(1)[0];\n  const hexNumber = [];\n  const isNotLastChunkMask = 1 << 7;\n\n  while (c & isNotLastChunkMask) {\n    hexNumber.push(c);\n    c = value.consume(1)[0];\n  }\n\n  hexNumber.push(c);\n  const isNegative = !!(1 << 6 & hexNumber[0]);\n  hexNumber[0] = hexNumber[0] & 0b1111111;\n  const numBin = hexNumber.map((x, i) => x.toString(2).slice(i === 0 ? -6 : -7).padStart(i === 0 ? 6 : 7, '0')).reverse();\n  let num = new BigNumber(numBin.join(''), 2);\n\n  if (isNegative) {\n    num = num.times(-1);\n  }\n\n  return {\n    int: num.toFixed()\n  };\n};\n\nconst primEncoder = value => {\n  const hasAnnot = +Array.isArray(value.annots);\n  const argsCount = Array.isArray(value.args) ? value.args.length : 0; // Specify the number of args max is 3 without annotation\n\n  const preamble = pad(Math.min(2 * argsCount + hasAnnot + 0x03, 9), 2);\n  const op = opMappingReverse[value.prim];\n  let encodedArgs = (value.args || []).map(arg => valueEncoder(arg)).join('');\n  const encodedAnnots = Array.isArray(value.annots) ? encodeAnnots(value.annots) : '';\n\n  if (value.prim === 'LAMBDA' && argsCount) {\n    encodedArgs = pad(encodedArgs.length / 2) + encodedArgs + pad(0);\n  }\n\n  if ((value.prim === 'pair' || value.prim === 'Pair') && argsCount > 2) {\n    encodedArgs = encodedAnnots === '' ? pad(encodedArgs.length / 2) + encodedArgs + pad(0) : pad(encodedArgs.length / 2) + encodedArgs;\n  }\n\n  if (value.prim === 'view' && value.args) {\n    encodedArgs = pad(encodedArgs.length / 2) + encodedArgs + pad(0);\n  }\n\n  return `${preamble}${op}${encodedArgs}${encodedAnnots}`;\n};\n\nconst primDecoder = (value, preamble) => {\n  const hasAnnot = (preamble[0] - 0x03) % 2 === 1;\n  let argsCount = Math.floor((preamble[0] - 0x03) / 2);\n  const op = value.consume(1)[0].toString(16).padStart(2, '0');\n  const result = {\n    prim: opMapping[op]\n  };\n\n  if (opMapping[op] === 'LAMBDA') {\n    value.consume(4);\n  }\n\n  if (opMapping[op] === 'view') {\n    if (argsCount != 0) {\n      return primViewDecoder(value, result);\n    } else {\n      return result;\n    }\n  }\n\n  let combPairArgs;\n  let combPairAnnots;\n\n  if ((opMapping[op] === 'pair' || opMapping[op] === 'Pair') && argsCount > 2) {\n    combPairArgs = decodeCombPair$1(value);\n    argsCount = 0;\n    combPairAnnots = decodeAnnots(value);\n  }\n\n  const args = new Array(argsCount).fill(0).map(() => valueDecoder(value));\n\n  if (opMapping[op] === 'LAMBDA') {\n    value.consume(4);\n  }\n\n  if (combPairArgs) {\n    result['args'] = combPairArgs;\n  } else if (args.length) {\n    result['args'] = args;\n  }\n\n  if (combPairAnnots && combPairAnnots[0] !== '') {\n    result['annots'] = combPairAnnots;\n  } else if (hasAnnot) {\n    result['annots'] = decodeAnnots(value);\n  }\n\n  return result;\n};\n\nconst primViewDecoder = (value, result) => {\n  value.consume(4);\n  result['args'] = new Array(4).fill(0).map(() => valueDecoder(value));\n  value.consume(4);\n  return result;\n};\n\nconst decodeCombPair$1 = val => {\n  const array = new Uint8ArrayConsumer(extractRequiredLen(val));\n  const args = [];\n\n  while (array.length() > 0) {\n    args.push(valueDecoder(array));\n  }\n\n  return args;\n};\n\nconst encodeAnnots = value => {\n  const mergedAnnot = value.map(x => {\n    return Buffer.from(x, 'utf8').toString('hex');\n  }).join('20');\n  const len = mergedAnnot.length / 2;\n  return `${pad(len)}${mergedAnnot}`;\n};\n\nconst decodeAnnots = val => {\n  const len = val.consume(4);\n  const annotLen = parseInt(Buffer.from(len).toString('hex'), 16);\n  const restOfAnnot = val.consume(annotLen);\n  const restOfAnnotHex = Buffer.from(restOfAnnot).toString('hex');\n  return restOfAnnotHex.split('20').map(x => Buffer.from(x, 'hex').toString('utf8'));\n};\n\nconst prefixEncoder = prefix$1 => str => {\n  return buf2hex(Buffer.from(b58cdecode(str, prefix[prefix$1])));\n};\n\nconst prefixDecoder = pre => str => {\n  const val = str.consume(prefixLength[pre]);\n  return b58cencode(val, prefix[pre]);\n};\n\nconst tz1Decoder = prefixDecoder(Prefix.TZ1);\nconst branchDecoder = prefixDecoder(Prefix.B);\n\nconst pkhDecoder = val => {\n  const prefix = val.consume(1);\n\n  if (prefix[0] === 0x00) {\n    return prefixDecoder(Prefix.TZ1)(val);\n  } else if (prefix[0] === 0x01) {\n    return prefixDecoder(Prefix.TZ2)(val);\n  } else if (prefix[0] === 0x02) {\n    return prefixDecoder(Prefix.TZ3)(val);\n  }\n};\n\nconst branchEncoder = prefixEncoder(Prefix.B);\nconst tz1Encoder = prefixEncoder(Prefix.TZ1);\n\nconst boolEncoder = bool => bool ? 'ff' : '00';\n\nconst proposalEncoder = proposal => {\n  return prefixEncoder(Prefix.P)(proposal);\n};\n\nconst proposalDecoder = proposal => {\n  return prefixDecoder(Prefix.P)(proposal);\n};\n\nconst proposalsDecoder = proposal => {\n  const proposals = [];\n  proposal.consume(4);\n\n  while (proposal.length() > 0) {\n    proposals.push(proposalDecoder(proposal));\n  }\n\n  return proposals;\n};\n\nconst proposalsEncoder = proposals => {\n  return pad(32 * proposals.length) + proposals.map(x => proposalEncoder(x)).join('');\n};\n\nconst ballotEncoder = ballot => {\n  switch (ballot) {\n    case 'yay':\n      return '00';\n\n    case 'nay':\n      return '01';\n\n    case 'pass':\n      return '02';\n\n    default:\n      throw new InvalidBallotValueError(ballot);\n  }\n};\n\nconst ballotDecoder = ballot => {\n  const value = ballot.consume(1);\n\n  switch (value[0]) {\n    case 0x00:\n      return 'yay';\n\n    case 0x01:\n      return 'nay';\n\n    case 0x02:\n      return 'pass';\n\n    default:\n      throw new DecodeBallotValueError(value[0].toString());\n  }\n};\n\nconst delegateEncoder = val => {\n  if (val) {\n    return boolEncoder(true) + pkhEncoder(val);\n  } else {\n    return boolEncoder(false);\n  }\n};\n\nconst int32Encoder = val => {\n  const num = parseInt(String(val), 10);\n  const byte = [];\n\n  for (let i = 0; i < 4; i++) {\n    const shiftBy = (4 - (i + 1)) * 8;\n    byte.push((num & 0xff << shiftBy) >> shiftBy);\n  }\n\n  return Buffer.from(byte).toString('hex');\n};\n\nconst int32Decoder = val => {\n  const num = val.consume(4);\n  let finalNum = 0;\n\n  for (let i = 0; i < num.length; i++) {\n    finalNum = finalNum | num[i] << (num.length - (i + 1)) * 8;\n  }\n\n  return finalNum;\n};\n\nconst int16Encoder = val => {\n  const num = parseInt(String(val), 10);\n  const byte = [];\n\n  for (let i = 0; i < 2; i++) {\n    const shiftBy = (2 - (i + 1)) * 8;\n    byte.push((num & 0xff << shiftBy) >> shiftBy);\n  }\n\n  return Buffer.from(byte).toString('hex');\n};\n\nconst int16Decoder = val => {\n  const num = val.consume(2);\n  let finalNum = 0;\n\n  for (let i = 0; i < num.length; i++) {\n    finalNum = finalNum | num[i] << (num.length - (i + 1)) * 8;\n  }\n\n  return finalNum;\n};\n\nconst boolDecoder = val => {\n  const bool = val.consume(1);\n  return bool[0] === 0xff;\n};\n\nconst delegateDecoder = val => {\n  const hasDelegate = boolDecoder(val);\n\n  if (hasDelegate) {\n    return pkhDecoder(val);\n  }\n};\n\nconst pkhEncoder = val => {\n  const pubkeyPrefix = val.substr(0, 3);\n\n  switch (pubkeyPrefix) {\n    case Prefix.TZ1:\n      return '00' + prefixEncoder(Prefix.TZ1)(val);\n\n    case Prefix.TZ2:\n      return '01' + prefixEncoder(Prefix.TZ2)(val);\n\n    case Prefix.TZ3:\n      return '02' + prefixEncoder(Prefix.TZ3)(val);\n\n    default:\n      throw new InvalidKeyHashError(val);\n  }\n};\n\nconst publicKeyEncoder = val => {\n  const pubkeyPrefix = val.substr(0, 4);\n\n  switch (pubkeyPrefix) {\n    case Prefix.EDPK:\n      return '00' + prefixEncoder(Prefix.EDPK)(val);\n\n    case Prefix.SPPK:\n      return '01' + prefixEncoder(Prefix.SPPK)(val);\n\n    case Prefix.P2PK:\n      return '02' + prefixEncoder(Prefix.P2PK)(val);\n\n    default:\n      throw new InvalidPublicKeyError(val);\n  }\n};\n\nconst addressEncoder = val => {\n  const pubkeyPrefix = val.substr(0, 3);\n\n  switch (pubkeyPrefix) {\n    case Prefix.TZ1:\n    case Prefix.TZ2:\n    case Prefix.TZ3:\n      return '00' + pkhEncoder(val);\n\n    case Prefix.KT1:\n      return '01' + prefixEncoder(Prefix.KT1)(val) + '00';\n\n    default:\n      throw new InvalidAddressError(val);\n  }\n};\n\nconst publicKeyDecoder = val => {\n  const preamble = val.consume(1);\n\n  switch (preamble[0]) {\n    case 0x00:\n      return prefixDecoder(Prefix.EDPK)(val);\n\n    case 0x01:\n      return prefixDecoder(Prefix.SPPK)(val);\n\n    case 0x02:\n      return prefixDecoder(Prefix.P2PK)(val);\n\n    default:\n      throw new InvalidPublicKeyError(val.toString());\n  }\n};\n\nconst addressDecoder = val => {\n  const preamble = val.consume(1);\n\n  switch (preamble[0]) {\n    case 0x00:\n      return pkhDecoder(val);\n\n    case 0x01:\n      {\n        const address = prefixDecoder(Prefix.KT1)(val);\n        val.consume(1);\n        return address;\n      }\n\n    default:\n      throw new InvalidAddressError(val.toString());\n  }\n};\n\nconst zarithEncoder = n => {\n  const fn = [];\n  let nn = new BigNumber$1(n, 10);\n\n  if (nn.isNaN()) {\n    throw new TypeError(`Invalid zarith number ${n}`);\n  } // eslint-disable-next-line no-constant-condition\n\n\n  while (true) {\n    if (nn.lt(128)) {\n      if (nn.lt(16)) fn.push('0');\n      fn.push(nn.toString(16));\n      break;\n    } else {\n      let b = nn.mod(128);\n      nn = nn.minus(b);\n      nn = nn.dividedBy(128);\n      b = b.plus(128);\n      fn.push(b.toString(16));\n    }\n  }\n\n  return fn.join('');\n};\n\nconst zarithDecoder = n => {\n  let mostSignificantByte = 0;\n\n  while (mostSignificantByte < n.length() && (n.get(mostSignificantByte) & 128) !== 0) {\n    mostSignificantByte += 1;\n  }\n\n  let num = new BigNumber$1(0);\n\n  for (let i = mostSignificantByte; i >= 0; i -= 1) {\n    const tmp = n.get(i) & 0x7f;\n    num = num.multipliedBy(128);\n    num = num.plus(tmp);\n  }\n\n  n.consume(mostSignificantByte + 1);\n  return new BigNumber$1(num).toString();\n};\n\nconst entrypointDecoder = value => {\n  const preamble = pad(value.consume(1)[0], 2);\n\n  if (preamble in entrypointMapping) {\n    return entrypointMapping[preamble];\n  } else {\n    const entry = extractRequiredLen(value, 1);\n    const entrypoint = Buffer.from(entry).toString('utf8');\n\n    if (entrypoint.length > ENTRYPOINT_MAX_LENGTH) {\n      throw new OversizedEntryPointError(entrypoint);\n    }\n\n    return entrypoint;\n  }\n};\n\nconst parametersDecoder = val => {\n  const preamble = val.consume(1);\n\n  if (preamble[0] === 0x00) {\n    return;\n  } else {\n    const encodedEntrypoint = entrypointDecoder(val);\n    const params = extractRequiredLen(val);\n    const parameters = valueDecoder(new Uint8ArrayConsumer(params));\n    return {\n      entrypoint: encodedEntrypoint,\n      value: parameters\n    };\n  }\n};\n\nconst entrypointEncoder = entrypoint => {\n  if (entrypoint in entrypointMappingReverse) {\n    return `${entrypointMappingReverse[entrypoint]}`;\n  } else {\n    if (entrypoint.length > ENTRYPOINT_MAX_LENGTH) {\n      throw new OversizedEntryPointError(entrypoint);\n    }\n\n    const value = {\n      string: entrypoint\n    };\n    return `ff${valueEncoder(value).slice(8)}`;\n  }\n};\n\nconst parametersEncoder = val => {\n  if (!val || val.entrypoint === 'default' && 'prim' in val.value && val.value.prim === 'Unit') {\n    return '00';\n  }\n\n  const encodedEntrypoint = entrypointEncoder(val.entrypoint);\n  const parameters = valueEncoder(val.value);\n  const length = (parameters.length / 2).toString(16).padStart(8, '0');\n  return `ff${encodedEntrypoint}${length}${parameters}`;\n};\n\nconst valueParameterEncoder = value => {\n  const valueEncoded = valueEncoder(value);\n  return `${pad(valueEncoded.length / 2)}${valueEncoded}`;\n};\n\nconst valueParameterDecoder = val => {\n  const value = extractRequiredLen(val);\n  return valueDecoder(new Uint8ArrayConsumer(value));\n};\n\nconst ManagerOperationSchema = {\n  branch: 'branch',\n  contents: ['operation']\n};\nconst ActivationSchema = {\n  pkh: 'tz1',\n  secret: 'secret'\n};\nconst RevealSchema = {\n  source: 'pkh',\n  fee: 'zarith',\n  counter: 'zarith',\n  gas_limit: 'zarith',\n  storage_limit: 'zarith',\n  public_key: 'public_key'\n};\nconst DelegationSchema = {\n  source: 'pkh',\n  fee: 'zarith',\n  counter: 'zarith',\n  gas_limit: 'zarith',\n  storage_limit: 'zarith',\n  delegate: 'delegate'\n};\nconst TransactionSchema = {\n  source: 'pkh',\n  fee: 'zarith',\n  counter: 'zarith',\n  gas_limit: 'zarith',\n  storage_limit: 'zarith',\n  amount: 'zarith',\n  destination: 'address',\n  parameters: 'parameters'\n};\nconst OriginationSchema = {\n  source: 'pkh',\n  fee: 'zarith',\n  counter: 'zarith',\n  gas_limit: 'zarith',\n  storage_limit: 'zarith',\n  balance: 'zarith',\n  delegate: 'delegate',\n  script: 'script'\n};\nconst BallotSchema = {\n  source: 'pkh',\n  period: 'int32',\n  proposal: 'proposal',\n  ballot: 'ballotStmt'\n};\nconst EndorsementSchema = {\n  level: 'int32'\n};\nconst SeedNonceRevelationSchema = {\n  level: 'int32',\n  nonce: 'raw'\n};\nconst ProposalsSchema = {\n  source: 'pkh',\n  period: 'int32',\n  proposals: 'proposalArr'\n};\nconst RegisterGlobalConstantSchema = {\n  source: 'pkh',\n  fee: 'zarith',\n  counter: 'zarith',\n  gas_limit: 'zarith',\n  storage_limit: 'zarith',\n  value: 'value'\n};\n\nconst operationEncoder = encoders => operation => {\n  if (!(operation.kind in encoders) || !(operation.kind in kindMappingReverse)) {\n    throw new InvalidOperationKindError(operation.kind);\n  }\n\n  return kindMappingReverse[operation.kind] + encoders[operation.kind](operation);\n};\n\nconst operationDecoder = decoders => value => {\n  const op = value.consume(1);\n  const operationName = kindMapping[op[0]];\n\n  if (operationName === undefined) {\n    throw new UnsupportedOperationError(op[0].toString());\n  }\n\n  const decodedObj = decoders[operationName](value);\n\n  if (typeof decodedObj !== 'object') {\n    throw new OperationDecodingError('Decoded invalid operation');\n  }\n\n  return Object.assign({\n    kind: operationName\n  }, decodedObj);\n};\n\nconst schemaEncoder = encoders => schema => value => {\n  const keys = Object.keys(schema);\n  return keys.reduce((prev, key) => {\n    const valueToEncode = schema[key];\n\n    if (Array.isArray(valueToEncode)) {\n      const encoder = encoders[valueToEncode[0]];\n      const values = value[key];\n\n      if (!Array.isArray(values)) {\n        throw new OperationEncodingError(`Expected value to be Array ${JSON.stringify(values)}`);\n      }\n\n      return prev + values.reduce((prevBytes, current) => prevBytes + encoder(current), '');\n    } else {\n      const encoder = encoders[valueToEncode];\n      return prev + encoder(value[key]);\n    }\n  }, '');\n};\n\nconst schemaDecoder = decoders => schema => value => {\n  const keys = Object.keys(schema);\n  return keys.reduce((prev, key) => {\n    const valueToEncode = schema[key];\n\n    if (Array.isArray(valueToEncode)) {\n      const decoder = decoders[valueToEncode[0]];\n      const decoded = [];\n      const lastLength = value.length();\n\n      while (value.length() > 0) {\n        decoded.push(decoder(value));\n\n        if (lastLength === value.length()) {\n          throw new OperationDecodingError('Unable to decode value');\n        }\n      }\n\n      return Object.assign(Object.assign({}, prev), {\n        [key]: decoded\n      });\n    } else {\n      const decoder = decoders[valueToEncode];\n      const result = decoder(value);\n\n      if (typeof result !== 'undefined') {\n        return Object.assign(Object.assign({}, prev), {\n          [key]: result\n        });\n      } else {\n        return Object.assign({}, prev);\n      }\n    }\n  }, {});\n};\n\nconst decoders = {\n  [CODEC.SECRET]: val => toHexString(val.consume(20)),\n  [CODEC.RAW]: val => toHexString(val.consume(32)),\n  [CODEC.TZ1]: tz1Decoder,\n  [CODEC.BRANCH]: branchDecoder,\n  [CODEC.ZARITH]: zarithDecoder,\n  [CODEC.PUBLIC_KEY]: publicKeyDecoder,\n  [CODEC.PKH]: pkhDecoder,\n  [CODEC.DELEGATE]: delegateDecoder,\n  [CODEC.INT32]: int32Decoder,\n  [CODEC.SCRIPT]: scriptDecoder,\n  [CODEC.BALLOT_STATEMENT]: ballotDecoder,\n  [CODEC.PROPOSAL]: proposalDecoder,\n  [CODEC.PROPOSAL_ARR]: proposalsDecoder,\n  [CODEC.PARAMETERS]: parametersDecoder,\n  [CODEC.ADDRESS]: addressDecoder,\n  [CODEC.VALUE]: valueParameterDecoder\n};\ndecoders[CODEC.OPERATION] = operationDecoder(decoders);\n\ndecoders[CODEC.OP_ACTIVATE_ACCOUNT] = val => schemaDecoder(decoders)(ActivationSchema)(val);\n\ndecoders[CODEC.OP_DELEGATION] = val => schemaDecoder(decoders)(DelegationSchema)(val);\n\ndecoders[CODEC.OP_TRANSACTION] = val => schemaDecoder(decoders)(TransactionSchema)(val);\n\ndecoders[CODEC.OP_ORIGINATION] = val => schemaDecoder(decoders)(OriginationSchema)(val);\n\ndecoders[CODEC.OP_BALLOT] = val => schemaDecoder(decoders)(BallotSchema)(val);\n\ndecoders[CODEC.OP_ENDORSEMENT] = val => schemaDecoder(decoders)(EndorsementSchema)(val);\n\ndecoders[CODEC.OP_SEED_NONCE_REVELATION] = val => schemaDecoder(decoders)(SeedNonceRevelationSchema)(val);\n\ndecoders[CODEC.OP_PROPOSALS] = val => schemaDecoder(decoders)(ProposalsSchema)(val);\n\ndecoders[CODEC.OP_REVEAL] = val => schemaDecoder(decoders)(RevealSchema)(val);\n\ndecoders[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = val => schemaDecoder(decoders)(RegisterGlobalConstantSchema)(val);\n\ndecoders[CODEC.MANAGER] = schemaDecoder(decoders)(ManagerOperationSchema);\nconst encoders = {\n  [CODEC.SECRET]: val => val,\n  [CODEC.RAW]: val => val,\n  [CODEC.TZ1]: tz1Encoder,\n  [CODEC.BRANCH]: branchEncoder,\n  [CODEC.ZARITH]: zarithEncoder,\n  [CODEC.PUBLIC_KEY]: publicKeyEncoder,\n  [CODEC.PKH]: pkhEncoder,\n  [CODEC.DELEGATE]: delegateEncoder,\n  [CODEC.SCRIPT]: scriptEncoder,\n  [CODEC.BALLOT_STATEMENT]: ballotEncoder,\n  [CODEC.PROPOSAL]: proposalEncoder,\n  [CODEC.PROPOSAL_ARR]: proposalsEncoder,\n  [CODEC.INT32]: int32Encoder,\n  [CODEC.PARAMETERS]: parametersEncoder,\n  [CODEC.ADDRESS]: addressEncoder,\n  [CODEC.VALUE]: valueParameterEncoder\n};\nencoders[CODEC.OPERATION] = operationEncoder(encoders);\n\nencoders[CODEC.OP_ACTIVATE_ACCOUNT] = val => schemaEncoder(encoders)(ActivationSchema)(val);\n\nencoders[CODEC.OP_DELEGATION] = val => schemaEncoder(encoders)(DelegationSchema)(val);\n\nencoders[CODEC.OP_TRANSACTION] = val => schemaEncoder(encoders)(TransactionSchema)(val);\n\nencoders[CODEC.OP_ORIGINATION] = val => schemaEncoder(encoders)(OriginationSchema)(val);\n\nencoders[CODEC.OP_BALLOT] = val => schemaEncoder(encoders)(BallotSchema)(val);\n\nencoders[CODEC.OP_ENDORSEMENT] = val => schemaEncoder(encoders)(EndorsementSchema)(val);\n\nencoders[CODEC.OP_SEED_NONCE_REVELATION] = val => schemaEncoder(encoders)(SeedNonceRevelationSchema)(val);\n\nencoders[CODEC.OP_PROPOSALS] = val => schemaEncoder(encoders)(ProposalsSchema)(val);\n\nencoders[CODEC.OP_REVEAL] = val => schemaEncoder(encoders)(RevealSchema)(val);\n\nencoders[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = val => schemaEncoder(encoders)(RegisterGlobalConstantSchema)(val);\n\nencoders[CODEC.MANAGER] = schemaEncoder(encoders)(ManagerOperationSchema);\nconst blockPayloadHashEncoder = prefixEncoder(Prefix.VH);\nconst blockPayloadHashDecoder = prefixDecoder(Prefix.VH);\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nconst kindMappingNoEndorsement = __rest(kindMapping, [\"0\"]);\n\nconst kindMappingProto12 = Object.assign(Object.assign({}, kindMappingNoEndorsement), {\n  0x15: 'endorsement'\n});\n\nconst kindMappingReverseProto12 = (() => {\n  const result = {};\n  Object.keys(kindMappingProto12).forEach(key => {\n    const keyNum = typeof key === 'string' ? parseInt(key, 10) : key;\n    result[kindMappingProto12[keyNum]] = pad(keyNum, 2);\n  });\n  return result;\n})();\n\nconst EndorsementSchemaProto12 = {\n  slot: 'int16',\n  level: 'int32',\n  round: 'int32',\n  block_payload_hash: 'blockPayloadHash'\n};\n\nconst operationEncoderProto12 = encoders => operation => {\n  if (!(operation.kind in encoders) || !(operation.kind in kindMappingReverseProto12)) {\n    throw new InvalidOperationKindError(operation.kind);\n  }\n\n  return kindMappingReverseProto12[operation.kind] + encoders[operation.kind](operation);\n};\n\nconst operationDecoderProto12 = decoders => value => {\n  const op = value.consume(1);\n  const operationName = kindMappingProto12[op[0]];\n\n  if (operationName === undefined) {\n    throw new UnsupportedOperationError(op[0].toString());\n  }\n\n  const decodedObj = decoders[operationName](value);\n\n  if (typeof decodedObj !== 'object') {\n    throw new OperationDecodingError('Decoded invalid operation');\n  }\n\n  return Object.assign({\n    kind: operationName\n  }, decodedObj);\n};\n\nconst decodersProto12 = Object.assign(Object.assign({}, decoders), {\n  [CODEC.INT16]: int16Decoder,\n  [CODEC.BLOCK_PAYLOAD_HASH]: blockPayloadHashDecoder\n});\ndecodersProto12[CODEC.OPERATION] = operationDecoderProto12(decodersProto12);\n\ndecodersProto12[CODEC.OP_ACTIVATE_ACCOUNT] = val => schemaDecoder(decodersProto12)(ActivationSchema)(val);\n\ndecodersProto12[CODEC.OP_DELEGATION] = val => schemaDecoder(decodersProto12)(DelegationSchema)(val);\n\ndecodersProto12[CODEC.OP_TRANSACTION] = val => schemaDecoder(decodersProto12)(TransactionSchema)(val);\n\ndecodersProto12[CODEC.OP_ORIGINATION] = val => schemaDecoder(decodersProto12)(OriginationSchema)(val);\n\ndecodersProto12[CODEC.OP_BALLOT] = val => schemaDecoder(decodersProto12)(BallotSchema)(val);\n\ndecodersProto12[CODEC.OP_ENDORSEMENT] = val => schemaDecoder(decodersProto12)(EndorsementSchemaProto12)(val);\n\ndecodersProto12[CODEC.OP_SEED_NONCE_REVELATION] = val => schemaDecoder(decodersProto12)(SeedNonceRevelationSchema)(val);\n\ndecodersProto12[CODEC.OP_PROPOSALS] = val => schemaDecoder(decodersProto12)(ProposalsSchema)(val);\n\ndecodersProto12[CODEC.OP_REVEAL] = val => schemaDecoder(decodersProto12)(RevealSchema)(val);\n\ndecodersProto12[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = val => schemaDecoder(decodersProto12)(RegisterGlobalConstantSchema)(val);\n\ndecodersProto12[CODEC.MANAGER] = schemaDecoder(decodersProto12)(ManagerOperationSchema);\nconst encodersProto12 = Object.assign(Object.assign({}, encoders), {\n  [CODEC.INT16]: int16Encoder,\n  [CODEC.BLOCK_PAYLOAD_HASH]: blockPayloadHashEncoder\n});\nencodersProto12[CODEC.OPERATION] = operationEncoderProto12(encodersProto12);\n\nencodersProto12[CODEC.OP_ACTIVATE_ACCOUNT] = val => schemaEncoder(encodersProto12)(ActivationSchema)(val);\n\nencodersProto12[CODEC.OP_DELEGATION] = val => schemaEncoder(encodersProto12)(DelegationSchema)(val);\n\nencodersProto12[CODEC.OP_TRANSACTION] = val => schemaEncoder(encodersProto12)(TransactionSchema)(val);\n\nencodersProto12[CODEC.OP_ORIGINATION] = val => schemaEncoder(encodersProto12)(OriginationSchema)(val);\n\nencodersProto12[CODEC.OP_BALLOT] = val => schemaEncoder(encodersProto12)(BallotSchema)(val);\n\nencodersProto12[CODEC.OP_ENDORSEMENT] = val => schemaEncoder(encodersProto12)(EndorsementSchemaProto12)(val);\n\nencodersProto12[CODEC.OP_SEED_NONCE_REVELATION] = val => schemaEncoder(encodersProto12)(SeedNonceRevelationSchema)(val);\n\nencodersProto12[CODEC.OP_PROPOSALS] = val => schemaEncoder(encodersProto12)(ProposalsSchema)(val);\n\nencodersProto12[CODEC.OP_REVEAL] = val => schemaEncoder(encodersProto12)(RevealSchema)(val);\n\nencodersProto12[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = val => schemaEncoder(encodersProto12)(RegisterGlobalConstantSchema)(val);\n\nencodersProto12[CODEC.MANAGER] = schemaEncoder(encodersProto12)(ManagerOperationSchema);\nconst OperationKindMapping = {\n  activate_account: ActivationSchema,\n  reveal: RevealSchema,\n  delegation: DelegationSchema,\n  transaction: TransactionSchema,\n  origination: OriginationSchema,\n  ballot: BallotSchema,\n  endorsement: EndorsementSchema,\n  seed_nonce_revelation: SeedNonceRevelationSchema,\n  proposals: ProposalsSchema,\n  register_global_constant: RegisterGlobalConstantSchema\n}; // Asymmetric difference: only account for things in arr2 that are not present in arr1, not vice versa\n\nconst getArrayDifference = (arr1, arr2) => {\n  return arr2.filter(x => !arr1.includes(x));\n};\n\nconst deleteArrayElementByValue = (array, item) => {\n  return array.filter(e => e !== item);\n};\n/**\r\n * @returns A boolean value to indicate whether the operation kind is valid or not\r\n */\n\n\nconst validateOperationKind = opKind => {\n  const opKindList = Object.keys(OperationKindMapping);\n  return opKindList.includes(opKind);\n};\n/**\r\n *  returns 0 when the two array of properties are identical or the passed property\r\n *  does not have any missing parameters from the corresponding schema\r\n *\r\n *  @returns array element differences if there are missing required property keys\r\n */\n\n\nconst validateMissingProperty = operationContent => {\n  const kind = operationContent.kind;\n  const keys = Object.keys(operationContent);\n  const cleanKeys = deleteArrayElementByValue(keys, 'kind');\n  const schemaKeys = Object.keys(OperationKindMapping[kind]);\n  return getArrayDifference(cleanKeys, schemaKeys);\n};\n\nvar ProtocolsHash;\n\n(function (ProtocolsHash) {\n  ProtocolsHash[\"Pt24m4xi\"] = \"Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd\";\n  ProtocolsHash[\"PsBABY5H\"] = \"PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU\";\n  ProtocolsHash[\"PsBabyM1\"] = \"PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS\";\n  ProtocolsHash[\"PsCARTHA\"] = \"PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb\";\n  ProtocolsHash[\"PsDELPH1\"] = \"PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo\";\n  ProtocolsHash[\"PtEdo2Zk\"] = \"PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA\";\n  ProtocolsHash[\"PsFLorena\"] = \"PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i\";\n  ProtocolsHash[\"PtGRANADs\"] = \"PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV\";\n  ProtocolsHash[\"PtHangz2\"] = \"PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx\";\n  ProtocolsHash[\"Psithaca2\"] = \"Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A\";\n  ProtocolsHash[\"PtJakart2\"] = \"PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY\";\n  ProtocolsHash[\"ProtoALpha\"] = \"ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK\";\n})(ProtocolsHash || (ProtocolsHash = {}));\n\nconst protoLevel = {\n  Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd: 4,\n  PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU: 5,\n  PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS: 5,\n  PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb: 6,\n  PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo: 7,\n  PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA: 8,\n  PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i: 9,\n  PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV: 10,\n  PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx: 11,\n  Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A: 12,\n  PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY: 13,\n  ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK: 14\n};\n\nfunction ProtoInferiorTo(a, b) {\n  return protoLevel[a] < protoLevel[b];\n}\n\nconst opMappingProto13 = Object.assign(Object.assign({}, opMapping), {\n  '84': 'sapling_transaction_deprecated',\n  '94': 'tx_rollup_l2_address',\n  '95': 'MIN_BLOCK_TIME',\n  '96': 'sapling_transaction'\n});\n\nconst opMappingReverseProto13 = (() => {\n  const result = {};\n  Object.keys(opMappingProto13).forEach(key => {\n    result[opMappingProto13[key]] = key;\n  });\n  return result;\n})();\n\nconst scriptEncoderProto13 = script => {\n  const code = valueEncoderProto13(script.code);\n  const storage = valueEncoderProto13(script.storage);\n  return `${pad(code.length / 2, 8)}${code}${pad(storage.length / 2, 8)}${storage}`;\n};\n\nconst scriptDecoderProto13 = value => {\n  const code = extractRequiredLen(value);\n  const storage = extractRequiredLen(value);\n  return {\n    code: valueDecoderProto13(new Uint8ArrayConsumer(code)),\n    storage: valueDecoderProto13(new Uint8ArrayConsumer(storage))\n  };\n};\n\nconst valueEncoderProto13 = value => {\n  if (Array.isArray(value)) {\n    const encoded = value.map(x => valueEncoderProto13(x)).join('');\n    const len = encoded.length / 2;\n    return `02${pad(len)}${encoded}`;\n  } else if (isPrim(value)) {\n    return primEncoderProto13(value);\n  } else if (isBytes(value)) {\n    return bytesEncoder(value);\n  } else if (isString(value)) {\n    return stringEncoder(value);\n  } else if (isInt(value)) {\n    return intEncoder(value);\n  }\n\n  throw new UnexpectedMichelsonValueError('Unexpected value');\n};\n\nconst valueDecoderProto13 = value => {\n  const preamble = value.consume(1);\n\n  switch (preamble[0]) {\n    case 0x0a:\n      return bytesDecoder(value);\n\n    case 0x01:\n      return stringDecoder(value);\n\n    case 0x00:\n      return intDecoder(value);\n\n    case 0x02:\n      {\n        const val = new Uint8ArrayConsumer(extractRequiredLen(value));\n        const results = [];\n\n        while (val.length() > 0) {\n          results.push(valueDecoderProto13(val));\n        }\n\n        return results;\n      }\n\n    default:\n      return primDecoderProto13(value, preamble);\n  }\n};\n\nconst primEncoderProto13 = value => {\n  const hasAnnot = +Array.isArray(value.annots);\n  const argsCount = Array.isArray(value.args) ? value.args.length : 0; // Specify the number of args max is 3 without annotation\n\n  const preamble = pad(Math.min(2 * argsCount + hasAnnot + 0x03, 9), 2);\n  const op = opMappingReverseProto13[value.prim];\n  let encodedArgs = (value.args || []).map(arg => valueEncoderProto13(arg)).join('');\n  const encodedAnnots = Array.isArray(value.annots) ? encodeAnnots(value.annots) : '';\n\n  if (value.prim === 'LAMBDA' && argsCount) {\n    encodedArgs = pad(encodedArgs.length / 2) + encodedArgs + pad(0);\n  }\n\n  if ((value.prim === 'pair' || value.prim === 'Pair') && argsCount > 2) {\n    encodedArgs = encodedAnnots === '' ? pad(encodedArgs.length / 2) + encodedArgs + pad(0) : pad(encodedArgs.length / 2) + encodedArgs;\n  }\n\n  if (value.prim === 'view' && value.args) {\n    encodedArgs = pad(encodedArgs.length / 2) + encodedArgs + pad(0);\n  }\n\n  return `${preamble}${op}${encodedArgs}${encodedAnnots}`;\n};\n\nconst primDecoderProto13 = (value, preamble) => {\n  const hasAnnot = (preamble[0] - 0x03) % 2 === 1;\n  let argsCount = Math.floor((preamble[0] - 0x03) / 2);\n  const op = value.consume(1)[0].toString(16).padStart(2, '0');\n  const result = {\n    prim: opMappingProto13[op]\n  };\n\n  if (opMappingProto13[op] === 'LAMBDA') {\n    value.consume(4);\n  }\n\n  if (opMappingProto13[op] === 'view') {\n    if (argsCount != 0) {\n      return primViewDecoderProto13(value, result);\n    } else {\n      return result;\n    }\n  }\n\n  let combPairArgs;\n  let combPairAnnots;\n\n  if ((opMappingProto13[op] === 'pair' || opMappingProto13[op] === 'Pair') && argsCount > 2) {\n    combPairArgs = decodeCombPair(value);\n    argsCount = 0;\n    combPairAnnots = decodeAnnots(value);\n  }\n\n  const args = new Array(argsCount).fill(0).map(() => valueDecoderProto13(value));\n\n  if (opMappingProto13[op] === 'LAMBDA') {\n    value.consume(4);\n  }\n\n  if (combPairArgs) {\n    result['args'] = combPairArgs;\n  } else if (args.length) {\n    result['args'] = args;\n  }\n\n  if (combPairAnnots && combPairAnnots[0] !== '') {\n    result['annots'] = combPairAnnots;\n  } else if (hasAnnot) {\n    result['annots'] = decodeAnnots(value);\n  }\n\n  return result;\n};\n\nconst primViewDecoderProto13 = (value, result) => {\n  value.consume(4);\n  result['args'] = new Array(4).fill(0).map(() => valueDecoderProto13(value));\n  value.consume(4);\n  return result;\n};\n\nconst decodeCombPair = val => {\n  const array = new Uint8ArrayConsumer(extractRequiredLen(val));\n  const args = [];\n\n  while (array.length() > 0) {\n    args.push(valueDecoderProto13(array));\n  }\n\n  return args;\n};\n\nconst parametersDecoderProto13 = val => {\n  const preamble = val.consume(1);\n\n  if (preamble[0] === 0x00) {\n    return;\n  } else {\n    const encodedEntrypoint = entrypointDecoder(val);\n    const params = extractRequiredLen(val);\n    const parameters = valueDecoderProto13(new Uint8ArrayConsumer(params));\n    return {\n      entrypoint: encodedEntrypoint,\n      value: parameters\n    };\n  }\n};\n\nconst valueParameterDecoderProto13 = val => {\n  const value = extractRequiredLen(val);\n  return valueDecoderProto13(new Uint8ArrayConsumer(value));\n};\n\nconst entrypointEncoderProto13 = entrypoint => {\n  if (entrypoint in entrypointMappingReverse) {\n    return `${entrypointMappingReverse[entrypoint]}`;\n  } else {\n    if (entrypoint.length > ENTRYPOINT_MAX_LENGTH) {\n      throw new OversizedEntryPointError(entrypoint);\n    }\n\n    const value = {\n      string: entrypoint\n    };\n    return `ff${valueEncoderProto13(value).slice(8)}`;\n  }\n};\n\nconst parametersEncoderProto13 = val => {\n  if (!val || val.entrypoint === 'default' && 'prim' in val.value && val.value.prim === 'Unit') {\n    return '00';\n  }\n\n  const encodedEntrypoint = entrypointEncoderProto13(val.entrypoint);\n  const parameters = valueEncoderProto13(val.value);\n  const length = (parameters.length / 2).toString(16).padStart(8, '0');\n  return `ff${encodedEntrypoint}${length}${parameters}`;\n};\n\nconst valueParameterEncoderProto13 = value => {\n  const valueEncoded = valueEncoderProto13(value);\n  return `${pad(valueEncoded.length / 2)}${valueEncoded}`;\n};\n\nconst encodersProto13 = Object.assign(Object.assign({}, encodersProto12), {\n  [CODEC.SCRIPT]: scriptEncoderProto13,\n  [CODEC.PARAMETERS]: parametersEncoderProto13,\n  [CODEC.VALUE]: valueParameterEncoderProto13\n});\nencodersProto13[CODEC.OPERATION] = operationEncoderProto12(encodersProto13);\n\nencodersProto13[CODEC.OP_ACTIVATE_ACCOUNT] = val => schemaEncoder(encodersProto13)(ActivationSchema)(val);\n\nencodersProto13[CODEC.OP_DELEGATION] = val => schemaEncoder(encodersProto13)(DelegationSchema)(val);\n\nencodersProto13[CODEC.OP_TRANSACTION] = val => schemaEncoder(encodersProto13)(TransactionSchema)(val);\n\nencodersProto13[CODEC.OP_ORIGINATION] = val => schemaEncoder(encodersProto13)(OriginationSchema)(val);\n\nencodersProto13[CODEC.OP_BALLOT] = val => schemaEncoder(encodersProto13)(BallotSchema)(val);\n\nencodersProto13[CODEC.OP_ENDORSEMENT] = val => schemaEncoder(encodersProto13)(EndorsementSchemaProto12)(val);\n\nencodersProto13[CODEC.OP_SEED_NONCE_REVELATION] = val => schemaEncoder(encodersProto13)(SeedNonceRevelationSchema)(val);\n\nencodersProto13[CODEC.OP_PROPOSALS] = val => schemaEncoder(encodersProto13)(ProposalsSchema)(val);\n\nencodersProto13[CODEC.OP_REVEAL] = val => schemaEncoder(encodersProto13)(RevealSchema)(val);\n\nencodersProto13[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = val => schemaEncoder(encodersProto13)(RegisterGlobalConstantSchema)(val);\n\nencodersProto13[CODEC.MANAGER] = schemaEncoder(encodersProto13)(ManagerOperationSchema);\nconst decodersProto13 = Object.assign(Object.assign({}, decodersProto12), {\n  [CODEC.SCRIPT]: scriptDecoderProto13,\n  [CODEC.PARAMETERS]: parametersDecoderProto13,\n  [CODEC.VALUE]: valueParameterDecoderProto13\n});\ndecodersProto13[CODEC.OPERATION] = operationDecoderProto12(decodersProto13);\n\ndecodersProto13[CODEC.OP_ACTIVATE_ACCOUNT] = val => schemaDecoder(decodersProto13)(ActivationSchema)(val);\n\ndecodersProto13[CODEC.OP_DELEGATION] = val => schemaDecoder(decodersProto13)(DelegationSchema)(val);\n\ndecodersProto13[CODEC.OP_TRANSACTION] = val => schemaDecoder(decodersProto13)(TransactionSchema)(val);\n\ndecodersProto13[CODEC.OP_ORIGINATION] = val => schemaDecoder(decodersProto13)(OriginationSchema)(val);\n\ndecodersProto13[CODEC.OP_BALLOT] = val => schemaDecoder(decodersProto13)(BallotSchema)(val);\n\ndecodersProto13[CODEC.OP_ENDORSEMENT] = val => schemaDecoder(decodersProto13)(EndorsementSchemaProto12)(val);\n\ndecodersProto13[CODEC.OP_SEED_NONCE_REVELATION] = val => schemaDecoder(decodersProto13)(SeedNonceRevelationSchema)(val);\n\ndecodersProto13[CODEC.OP_PROPOSALS] = val => schemaDecoder(decodersProto13)(ProposalsSchema)(val);\n\ndecodersProto13[CODEC.OP_REVEAL] = val => schemaDecoder(decodersProto13)(RevealSchema)(val);\n\ndecodersProto13[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = val => schemaDecoder(decodersProto13)(RegisterGlobalConstantSchema)(val);\n\ndecodersProto13[CODEC.MANAGER] = schemaDecoder(decodersProto13)(ManagerOperationSchema); // IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!\n\nconst VERSION = {\n  \"commitHash\": \"38da814ec2bb4e81c7ad5a45b6b183a4d0b8dc25\",\n  \"version\": \"12.1.1\"\n};\n/**\r\n * @packageDocumentation\r\n * @module @taquito/local-forging\r\n */\n\nconst PROTOCOL_CURRENT = ProtocolsHash.Psithaca2;\n\nfunction getCodec(codec, proto) {\n  if (proto === ProtocolsHash.Psithaca2) {\n    return {\n      encoder: encodersProto12[codec],\n      decoder: hex => {\n        const consumer = Uint8ArrayConsumer.fromHexString(hex);\n        return decodersProto12[codec](consumer);\n      }\n    };\n  } else if (ProtoInferiorTo(proto, ProtocolsHash.Psithaca2)) {\n    return {\n      encoder: encoders[codec],\n      decoder: hex => {\n        const consumer = Uint8ArrayConsumer.fromHexString(hex);\n        return decoders[codec](consumer);\n      }\n    };\n  } else {\n    return {\n      encoder: encodersProto13[codec],\n      decoder: hex => {\n        const consumer = Uint8ArrayConsumer.fromHexString(hex);\n        return decodersProto13[codec](consumer);\n      }\n    };\n  }\n}\n\nclass LocalForger {\n  constructor() {\n    let protocolHash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : PROTOCOL_CURRENT;\n    this.protocolHash = protocolHash;\n    this.codec = getCodec(CODEC.MANAGER, this.protocolHash);\n  }\n\n  forge(params) {\n    if (validateBlock(params.branch) !== ValidationResult.VALID) {\n      throw new InvalidBlockHashError(`The block hash ${params.branch} is invalid`);\n    }\n\n    for (const content of params.contents) {\n      if (!validateOperationKind(content.kind)) {\n        throw new InvalidOperationKindError(content.kind);\n      }\n\n      const diff = validateMissingProperty(content);\n\n      if (diff.length === 1) {\n        if (content.kind === 'delegation' && diff[0] === 'delegate') {\n          continue;\n        } else if (content.kind === 'origination' && diff[0] === 'delegate') {\n          continue;\n        } else if (content.kind === 'transaction' && diff[0] === 'parameters') {\n          continue;\n        } else {\n          throw new InvalidOperationSchemaError(`Missing properties: ${diff.join(', ').toString()}`);\n        }\n      } else if (diff.length > 1) {\n        throw new InvalidOperationSchemaError(`Missing properties: ${diff.join(', ').toString()}`);\n      }\n    }\n\n    const forged = this.codec.encoder(params).toLowerCase();\n    return Promise.resolve(forged);\n  }\n\n  parse(hex) {\n    return Promise.resolve(this.codec.decoder(hex));\n  }\n\n}\n\nconst localForger = new LocalForger();\nexport { CODEC, LocalForger, ProtocolsHash, Uint8ArrayConsumer, VERSION, decoders, encoders, getCodec, localForger };","map":{"version":3,"sources":["../src/utils.ts","../src/constants.ts","../src/error.ts","../src/uint8array-consumer.ts","../src/michelson/codec.ts","../src/codec.ts","../src/schema/operation.ts","../src/decoder.ts","../src/encoder.ts","../src/proto12-ithaca/codec.ts","../src/proto12-ithaca/constants.ts","../src/proto12-ithaca/schema.ts","../src/proto12-ithaca/decoder.ts","../src/proto12-ithaca/encoder.ts","../src/validator.ts","../src/protocols.ts","../src/proto13-jakarta/constants-proto13.ts","../src/proto13-jakarta/michelson-proto13/codec-proto13.ts","../src/proto13-jakarta/codec-proto13.ts","../src/proto13-jakarta/encoder-proto13.ts","../src/proto13-jakarta/decoder-proto13.ts","../src/version.ts","../src/taquito-local-forging.ts"],"names":["decodeCombPair","prefix","prefixMap","BigNumber","opMappingGeneral"],"mappings":"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","sourcesContent":["export const concat = (...arr: Uint8Array[]) => {\n  return arr.reduce((a: Uint8Array, b: Uint8Array) => {\n    const c = new Uint8Array(a.length + b.length);\n    c.set(a);\n    c.set(b, a.length);\n    return c;\n  }, new Uint8Array());\n};\n\nexport const toHexString = (bytes: Uint8Array) =>\n  bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, '0'), '');\n\nexport const pad = (num: number, paddingLen = 8) => {\n  return num.toString(16).padStart(paddingLen, '0');\n};\n","/*\n * Some code in this file is originally from sotez\n * Copyright (c) 2018 Andrew Kishino\n */\n\nimport { pad } from './utils';\n\n// See: https://tezos.gitlab.io/protocols/005_babylon.html#transactions-now-have-an-entrypoint\nexport const ENTRYPOINT_MAX_LENGTH = 31;\n\nexport enum CODEC {\n  SECRET = 'secret',\n  RAW = 'raw',\n  TZ1 = 'tz1',\n  BRANCH = 'branch',\n  ZARITH = 'zarith',\n  PUBLIC_KEY = 'public_key',\n  PKH = 'pkh',\n  DELEGATE = 'delegate',\n  SCRIPT = 'script',\n  BALLOT_STATEMENT = 'ballotStmt',\n  PROPOSAL = 'proposal',\n  PROPOSAL_ARR = 'proposalArr',\n  INT32 = 'int32',\n  INT16 = 'int16',\n  PARAMETERS = 'parameters',\n  ADDRESS = 'address',\n  OPERATION = 'operation',\n  OP_ACTIVATE_ACCOUNT = 'activate_account',\n  OP_DELEGATION = 'delegation',\n  OP_TRANSACTION = 'transaction',\n  OP_ORIGINATION = 'origination',\n  OP_BALLOT = 'ballot',\n  OP_ENDORSEMENT = 'endorsement',\n  OP_SEED_NONCE_REVELATION = 'seed_nonce_revelation',\n  OP_REVEAL = 'reveal',\n  OP_PROPOSALS = 'proposals',\n  OP_REGISTER_GLOBAL_CONSTANT = 'register_global_constant',\n  VALUE = 'value',\n  MANAGER = 'manager',\n  BLOCK_PAYLOAD_HASH = 'blockPayloadHash',\n}\n\n// See https://tezos.gitlab.io/whitedoc/michelson.html#full-grammar\nexport const opMapping: { [key: string]: string } = {\n  '00': 'parameter',\n  '01': 'storage',\n  '02': 'code',\n  '03': 'False',\n  '04': 'Elt',\n  '05': 'Left',\n  '06': 'None',\n  '07': 'Pair',\n  '08': 'Right',\n  '09': 'Some',\n  '0a': 'True',\n  '0b': 'Unit',\n  '0c': 'PACK',\n  '0d': 'UNPACK',\n  '0e': 'BLAKE2B',\n  '0f': 'SHA256',\n  '10': 'SHA512',\n  '11': 'ABS',\n  '12': 'ADD',\n  '13': 'AMOUNT',\n  '14': 'AND',\n  '15': 'BALANCE',\n  '16': 'CAR',\n  '17': 'CDR',\n  '18': 'CHECK_SIGNATURE',\n  '19': 'COMPARE',\n  '1a': 'CONCAT',\n  '1b': 'CONS',\n  '1c': 'CREATE_ACCOUNT', // Removed in Edo\n  '1d': 'CREATE_CONTRACT', // Removed in Edo\n  '1e': 'IMPLICIT_ACCOUNT',\n  '1f': 'DIP',\n  '20': 'DROP',\n  '21': 'DUP',\n  '22': 'EDIV',\n  '23': 'EMPTY_MAP',\n  '24': 'EMPTY_SET',\n  '25': 'EQ',\n  '26': 'EXEC',\n  '27': 'FAILWITH',\n  '28': 'GE',\n  '29': 'GET',\n  '2a': 'GT',\n  '2b': 'HASH_KEY',\n  '2c': 'IF',\n  '2d': 'IF_CONS',\n  '2e': 'IF_LEFT',\n  '2f': 'IF_NONE',\n  '30': 'INT',\n  '31': 'LAMBDA',\n  '32': 'LE',\n  '33': 'LEFT',\n  '34': 'LOOP',\n  '35': 'LSL',\n  '36': 'LSR',\n  '37': 'LT',\n  '38': 'MAP',\n  '39': 'MEM',\n  '3a': 'MUL',\n  '3b': 'NEG',\n  '3c': 'NEQ',\n  '3d': 'NIL',\n  '3e': 'NONE',\n  '3f': 'NOT',\n  '40': 'NOW',\n  '41': 'OR',\n  '42': 'PAIR',\n  '43': 'PUSH',\n  '44': 'RIGHT',\n  '45': 'SIZE',\n  '46': 'SOME',\n  '47': 'SOURCE',\n  '48': 'SENDER',\n  '49': 'SELF',\n  '4a': 'STEPS_TO_QUOTA', // Removed in Edo\n  '4b': 'SUB',\n  '4c': 'SWAP',\n  '4d': 'TRANSFER_TOKENS',\n  '4e': 'SET_DELEGATE',\n  '4f': 'UNIT',\n  '50': 'UPDATE',\n  '51': 'XOR',\n  '52': 'ITER',\n  '53': 'LOOP_LEFT',\n  '54': 'ADDRESS',\n  '55': 'CONTRACT',\n  '56': 'ISNAT',\n  '57': 'CAST',\n  '58': 'RENAME',\n  '59': 'bool',\n  '5a': 'contract',\n  '5b': 'int',\n  '5c': 'key',\n  '5d': 'key_hash',\n  '5e': 'lambda',\n  '5f': 'list',\n  '60': 'map',\n  '61': 'big_map',\n  '62': 'nat',\n  '63': 'option',\n  '64': 'or',\n  '65': 'pair',\n  '66': 'set',\n  '67': 'signature',\n  '68': 'string',\n  '69': 'bytes',\n  '6a': 'mutez',\n  '6b': 'timestamp',\n  '6c': 'unit',\n  '6d': 'operation',\n  '6e': 'address',\n  '6f': 'SLICE',\n  '70': 'DIG',\n  '71': 'DUG',\n  '72': 'EMPTY_BIG_MAP',\n  '73': 'APPLY',\n  '74': 'chain_id',\n  '75': 'CHAIN_ID',\n  '76': 'LEVEL',\n  '77': 'SELF_ADDRESS',\n  '78': 'never',\n  '79': 'NEVER',\n  '7a': 'UNPAIR',\n  '7b': 'VOTING_POWER',\n  '7c': 'TOTAL_VOTING_POWER',\n  '7d': 'KECCAK',\n  '7e': 'SHA3',\n  '7f': 'PAIRING_CHECK',\n  '80': 'bls12_381_g1',\n  '81': 'bls12_381_g2',\n  '82': 'bls12_381_fr',\n  '83': 'sapling_state',\n  '84': 'sapling_transaction',\n  '85': 'SAPLING_EMPTY_STATE',\n  '86': 'SAPLING_VERIFY_UPDATE',\n  '87': 'ticket',\n  '88': 'TICKET',\n  '89': 'READ_TICKET',\n  '8a': 'SPLIT_TICKET',\n  '8b': 'JOIN_TICKETS',\n  '8c': 'GET_AND_UPDATE',\n  '8d': 'chest',\n  '8e': 'chest_key',\n  '8f': 'OPEN_CHEST',\n  '90': 'VIEW',\n  '91': 'view',\n  '92': 'constant',\n  '93': 'SUB_MUTEZ',\n};\n\nexport const opMappingReverse = (() => {\n  const result: { [key: string]: string } = {};\n  Object.keys(opMapping).forEach((key: string) => {\n    result[opMapping[key]] = key;\n  });\n  return result;\n})();\n\n// See https://tezos.gitlab.io/api/p2p.html\nexport const kindMapping: { [key: number]: string } = {\n  0x04: 'activate_account',\n  0x6b: 'reveal',\n  0x6e: 'delegation',\n  0x6c: 'transaction',\n  0x6d: 'origination',\n  0x06: 'ballot',\n  0x00: 'endorsement',\n  0x01: 'seed_nonce_revelation',\n  0x05: 'proposals',\n  0x6f: 'register_global_constant',\n};\n\nexport const kindMappingReverse = (() => {\n  const result: { [key: string]: string } = {};\n  Object.keys(kindMapping).forEach((key: number | string) => {\n    const keyNum = typeof key === 'string' ? parseInt(key, 10) : key;\n    result[kindMapping[keyNum]] = pad(keyNum, 2);\n  });\n  return result;\n})();\n\n// See https://tezos.gitlab.io/protocols/005_babylon.html#transactions-now-have-an-entrypoint\nexport const entrypointMapping: { [key: string]: string } = {\n  '00': 'default',\n  '01': 'root',\n  '02': 'do',\n  '03': 'set_delegate',\n  '04': 'remove_delegate',\n};\n\nexport const entrypointMappingReverse = (() => {\n  const result: { [key: string]: string } = {};\n  Object.keys(entrypointMapping).forEach((key: string) => {\n    result[entrypointMapping[key]] = key;\n  });\n  return result;\n})();\n","import { ENTRYPOINT_MAX_LENGTH } from './constants';\n\n/**\n *  @category Error\n *  @description Error that indicates an invalid block hash being passed or used\n */\nexport class InvalidBlockHashError extends Error {\n  public name = 'InvalidBlockHashError';\n  constructor(public message: string) {\n    super(message);\n  }\n}\n\n/**\n *  @category Error\n *  @description Error that indicates an invalid operation schema being passed or used\n */ export class InvalidOperationSchemaError extends Error {\n  public name = 'InvalidOperationSchemaError';\n  constructor(public message: string) {\n    super(message);\n  }\n}\n\n/**\n *  @category Error\n *  @description Error that indicates an entrypoint exceeding maximum size\n */\nexport class OversizedEntryPointError extends Error {\n  public name = 'OversizedEntryPointError';\n  constructor(public entrypoint: string) {\n    super(\n      `Oversized entrypoint: ${entrypoint}. The maximum length of entrypoint is ${ENTRYPOINT_MAX_LENGTH}`\n    );\n  }\n}\n\n/**\n *  @category Error\n *  @description Error that indicates an invalid ballot value\n */\nexport class InvalidBallotValueError extends Error {\n  public name = 'InvalidBallotValueError';\n  constructor(public ballotValue: string) {\n    super(`The ballot value '${ballotValue}' is invalid`);\n  }\n}\n\n/**\n *  @category Error\n *  @description Error that indicates a failure when trying to decode ballot value\n */\nexport class DecodeBallotValueError extends Error {\n  public name = 'DecodeBallotValueError';\n  constructor(public ballotValue: string) {\n    super(`Failed to decode ballot value ${ballotValue}`);\n  }\n}\n\n/**\n *  @category Error\n *  @description Error that indicates an invalid hex string have been passed or used\n */\nexport class InvalidHexStringError extends Error {\n  public name = 'InvalidHexStringError';\n  constructor(public hexString: string) {\n    super(`The hex string '${hexString}' is invalid`);\n  }\n}\n\n/**\n *  @category Error\n *  @description Error that indicates unexpected Michelson Value being passed or used\n */\nexport class UnexpectedMichelsonValueError extends Error {\n  public name = 'UnexpectedMichelsonValueError';\n  constructor(public value: string) {\n    super(`Failed to encode michelson value '${value}'`);\n  }\n}\n\n/**\n *  @category Error\n *  @description Error that indicates a failure when trying to decode an operation\n */\nexport class OperationDecodingError extends Error {\n  public name = 'OperationDecodingError';\n  constructor(public message: string) {\n    super(message);\n  }\n}\n\n/**\n *  @category Error\n *  @description Error that indicates a failure when trying to encode an operation\n */\nexport class OperationEncodingError extends Error {\n  public name = 'OperationEncodingError';\n  constructor(public message: string) {\n    super(message);\n  }\n}\n\n/**\n *  @category Error\n *  @description Error that indicates an unsupported operation being passed or used\n */\nexport class UnsupportedOperationError extends Error {\n  public name = 'UnsupportedOperationError';\n  constructor(public op: string) {\n    super(`The operation '${op}' is unsupported`);\n  }\n}\n","import { InvalidHexStringError } from './error';\nexport class Uint8ArrayConsumer {\n  static fromHexString(hex: string) {\n    const lowHex = hex.toLowerCase();\n    if (/^(([a-f]|\\d){2})*$/.test(lowHex)) {\n      const arr = new Uint8Array(\n        (lowHex.match(/([a-z]|\\d){2}/g) || []).map((byte) => parseInt(byte, 16))\n      );\n      return new Uint8ArrayConsumer(arr);\n    } else {\n      throw new InvalidHexStringError(lowHex);\n    }\n  }\n\n  constructor(private readonly arr: Uint8Array, private offset: number = 0) {}\n\n  public consume(count: number): Uint8Array {\n    const subArr = this.arr.subarray(this.offset, this.offset + count);\n    this.offset += count;\n    return subArr;\n  }\n\n  public get(idx: number) {\n    return this.arr[this.offset + idx];\n  }\n\n  public length() {\n    return this.arr.length - this.offset;\n  }\n}\n","import { BigNumber } from 'bignumber.js';\nimport { Decoder } from '../decoder';\nimport { Uint8ArrayConsumer } from '../uint8array-consumer';\nimport { Encoder } from '../taquito-local-forging';\nimport { opMappingReverse, opMapping } from '../constants';\nimport { pad } from '../utils';\nimport { InvalidHexStringError, UnexpectedMichelsonValueError } from '../error';\n\nexport type PrimValue = { prim: string; args?: MichelsonValue[]; annots?: string[] };\nexport type BytesValue = { bytes: string };\nexport type StringValue = { string: string };\nexport type IntValue = { int: string };\nexport type MichelsonValue =\n  | PrimValue\n  | BytesValue\n  | StringValue\n  | IntValue\n  | (PrimValue | BytesValue | StringValue | IntValue)[];\n\nexport const isPrim = (value: MichelsonValue): value is PrimValue => {\n  return 'prim' in value;\n};\n\nexport const isBytes = (value: MichelsonValue): value is BytesValue => {\n  return 'bytes' in value && typeof value.bytes === 'string';\n};\n\nexport const isString = (value: MichelsonValue): value is StringValue => {\n  return 'string' in value && typeof value.string === 'string';\n};\n\nexport const isInt = (value: MichelsonValue): value is IntValue => {\n  return 'int' in value && typeof value.int === 'string';\n};\n\nexport const scriptEncoder: Encoder<{ code: MichelsonValue; storage: MichelsonValue }> = (\n  script\n) => {\n  const code = valueEncoder(script.code);\n  const storage = valueEncoder(script.storage);\n  return `${pad(code.length / 2, 8)}${code}${pad(storage.length / 2, 8)}${storage}`;\n};\n\nexport const scriptDecoder: Decoder = (value: Uint8ArrayConsumer) => {\n  const code = extractRequiredLen(value);\n  const storage = extractRequiredLen(value);\n\n  return {\n    code: valueDecoder(new Uint8ArrayConsumer(code)),\n    storage: valueDecoder(new Uint8ArrayConsumer(storage)),\n  };\n};\n\nexport const valueEncoder: Encoder<MichelsonValue> = (value: MichelsonValue) => {\n  if (Array.isArray(value)) {\n    const encoded = value.map((x) => valueEncoder(x)).join('');\n    const len = encoded.length / 2;\n    return `02${pad(len)}${encoded}`;\n  } else if (isPrim(value)) {\n    return primEncoder(value);\n  } else if (isBytes(value)) {\n    return bytesEncoder(value);\n  } else if (isString(value)) {\n    return stringEncoder(value);\n  } else if (isInt(value)) {\n    return intEncoder(value);\n  }\n\n  throw new UnexpectedMichelsonValueError(value);\n};\n\nexport const valueDecoder: Decoder = (value: Uint8ArrayConsumer) => {\n  const preamble = value.consume(1);\n  switch (preamble[0]) {\n    case 0x0a:\n      return bytesDecoder(value);\n    case 0x01:\n      return stringDecoder(value);\n    case 0x00:\n      return intDecoder(value);\n    case 0x02: {\n      const val = new Uint8ArrayConsumer(extractRequiredLen(value));\n      const results = [];\n      while (val.length() > 0) {\n        results.push(valueDecoder(val));\n      }\n      return results;\n    }\n    default:\n      return primDecoder(value, preamble);\n  }\n};\n\nexport const extractRequiredLen = (value: Uint8ArrayConsumer, bytesLength = 4) => {\n  const len = value.consume(bytesLength);\n  const valueLen = parseInt(Buffer.from(len).toString('hex'), 16);\n  return value.consume(valueLen);\n};\n\nexport const bytesEncoder: Encoder<BytesValue> = (value) => {\n  if (!/^([A-Fa-f0-9]{2})*$/.test(value.bytes)) {\n    throw new InvalidHexStringError(value.bytes);\n  }\n\n  const len = value.bytes.length / 2;\n  return `0a${pad(len)}${value.bytes}`;\n};\n\nexport const bytesDecoder: Decoder = (value: Uint8ArrayConsumer) => {\n  const bytes = extractRequiredLen(value);\n  return {\n    bytes: Buffer.from(bytes).toString('hex'),\n  };\n};\n\nexport const stringEncoder: Encoder<StringValue> = (value) => {\n  const str = Buffer.from(value.string, 'utf8').toString('hex');\n  const hexLength = str.length / 2;\n  return `01${pad(hexLength)}${str}`;\n};\n\nexport const stringDecoder: Decoder = (value: Uint8ArrayConsumer) => {\n  const str = extractRequiredLen(value);\n  return {\n    string: Buffer.from(str).toString('utf8'),\n  };\n};\n\nexport const intEncoder: Encoder<IntValue> = ({ int }) => {\n  const num = new BigNumber(int, 10);\n  const positiveMark = num.toString(2)[0] === '-' ? '1' : '0';\n  const binary = num.toString(2).replace(/-/g, '');\n\n  const pad =\n    binary.length <= 6\n      ? 6\n      : (binary.length - 6) % 7\n      ? binary.length + 7 - ((binary.length - 6) % 7)\n      : binary.length;\n\n  const splitted = binary.padStart(pad, '0').match(/\\d{6,7}/g);\n\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const reversed = splitted!.reverse();\n\n  reversed[0] = positiveMark + reversed[0];\n\n  const numHex = reversed.map((x: string, i: number) =>\n    // Add one to the last chunk\n    parseInt((i === reversed.length - 1 ? '0' : '1') + x, 2)\n      .toString(16)\n      .padStart(2, '0')\n  );\n\n  return `00${numHex.join('')}`;\n};\n\nexport const intDecoder = (value: Uint8ArrayConsumer): IntValue => {\n  let c = value.consume(1)[0];\n  const hexNumber: number[] = [];\n  const isNotLastChunkMask = 1 << 7;\n  while (c & isNotLastChunkMask) {\n    hexNumber.push(c);\n    c = value.consume(1)[0];\n  }\n\n  hexNumber.push(c);\n  const isNegative = !!((1 << 6) & hexNumber[0]);\n\n  hexNumber[0] = hexNumber[0] & 0b1111111;\n\n  const numBin = hexNumber\n    .map((x, i) =>\n      x\n        .toString(2)\n        .slice(i === 0 ? -6 : -7)\n        .padStart(i === 0 ? 6 : 7, '0')\n    )\n    .reverse();\n  let num = new BigNumber(numBin.join(''), 2);\n  if (isNegative) {\n    num = num.times(-1);\n  }\n\n  return {\n    int: num.toFixed(),\n  };\n};\n\nexport const primEncoder: Encoder<PrimValue> = (value) => {\n  const hasAnnot = +Array.isArray(value.annots);\n  const argsCount = Array.isArray(value.args) ? value.args.length : 0;\n\n  // Specify the number of args max is 3 without annotation\n  const preamble = pad(Math.min(2 * argsCount + hasAnnot + 0x03, 9), 2);\n\n  const op = opMappingReverse[value.prim];\n\n  let encodedArgs = (value.args || []).map((arg) => valueEncoder(arg)).join('');\n  const encodedAnnots = Array.isArray(value.annots) ? encodeAnnots(value.annots) : '';\n\n  if (value.prim === 'LAMBDA' && argsCount) {\n    encodedArgs = pad(encodedArgs.length / 2) + encodedArgs + pad(0);\n  }\n\n  if ((value.prim === 'pair' || value.prim === 'Pair') && argsCount > 2) {\n    encodedArgs =\n      encodedAnnots === ''\n        ? pad(encodedArgs.length / 2) + encodedArgs + pad(0)\n        : pad(encodedArgs.length / 2) + encodedArgs;\n  }\n\n  if (value.prim === 'view' && value.args) {\n    encodedArgs = pad(encodedArgs.length / 2) + encodedArgs + pad(0);\n  }\n\n  return `${preamble}${op}${encodedArgs}${encodedAnnots}`;\n};\n\nexport const primDecoder = (value: Uint8ArrayConsumer, preamble: Uint8Array) => {\n  const hasAnnot = (preamble[0] - 0x03) % 2 === 1;\n  let argsCount = Math.floor((preamble[0] - 0x03) / 2);\n  const op = value.consume(1)[0].toString(16).padStart(2, '0');\n\n  const result: Partial<PrimValue> = {\n    prim: opMapping[op],\n  };\n\n  if (opMapping[op] === 'LAMBDA') {\n    value.consume(4);\n  }\n\n  if (opMapping[op] === 'view') {\n    if (argsCount != 0) {\n      return primViewDecoder(value, result);\n    } else {\n      return result;\n    }\n  }\n\n  let combPairArgs;\n  let combPairAnnots;\n  if ((opMapping[op] === 'pair' || opMapping[op] === 'Pair') && argsCount > 2) {\n    combPairArgs = decodeCombPair(value);\n    argsCount = 0;\n    combPairAnnots = decodeAnnots(value);\n  }\n\n  const args = new Array(argsCount).fill(0).map(() => valueDecoder(value));\n\n  if (opMapping[op] === 'LAMBDA') {\n    value.consume(4);\n  }\n\n  if (combPairArgs) {\n    result['args'] = combPairArgs as any;\n  } else if (args.length) {\n    result['args'] = args as any;\n  }\n\n  if (combPairAnnots && (combPairAnnots as any)[0] !== '') {\n    result['annots'] = combPairAnnots as any;\n  } else if (hasAnnot) {\n    result['annots'] = decodeAnnots(value) as any;\n  }\n\n  return result;\n};\n\nexport const primViewDecoder = (value: Uint8ArrayConsumer, result: Partial<PrimValue>) => {\n  value.consume(4);\n  result['args'] = new Array(4).fill(0).map(() => valueDecoder(value)) as any;\n  value.consume(4);\n  return result;\n};\n\nexport const decodeCombPair: Decoder = (val: Uint8ArrayConsumer) => {\n  const array = new Uint8ArrayConsumer(extractRequiredLen(val));\n  const args = [];\n  while (array.length() > 0) {\n    args.push(valueDecoder(array));\n  }\n  return args;\n};\n\nexport const encodeAnnots: Encoder<string[]> = (value: string[]) => {\n  const mergedAnnot = value\n    .map((x) => {\n      return Buffer.from(x, 'utf8').toString('hex');\n    })\n    .join('20');\n\n  const len = mergedAnnot.length / 2;\n  return `${pad(len)}${mergedAnnot}`;\n};\n\nexport const decodeAnnots: Decoder = (val: Uint8ArrayConsumer): string[] => {\n  const len = val.consume(4);\n  const annotLen = parseInt(Buffer.from(len).toString('hex'), 16);\n  const restOfAnnot = val.consume(annotLen);\n\n  const restOfAnnotHex = Buffer.from(restOfAnnot).toString('hex');\n  return restOfAnnotHex.split('20').map((x) => Buffer.from(x, 'hex').toString('utf8'));\n};\n","import {\n  b58cdecode,\n  b58cencode,\n  buf2hex,\n  Prefix,\n  prefix as prefixMap,\n  prefixLength,\n  InvalidKeyHashError,\n  InvalidPublicKeyError,\n  InvalidAddressError,\n} from '@taquito/utils';\nimport { OversizedEntryPointError, InvalidBallotValueError, DecodeBallotValueError } from './error';\nimport BigNumber from 'bignumber.js';\nimport { entrypointMapping, entrypointMappingReverse, ENTRYPOINT_MAX_LENGTH } from './constants';\nimport { extractRequiredLen, valueDecoder, valueEncoder, MichelsonValue } from './michelson/codec';\nimport { Uint8ArrayConsumer } from './uint8array-consumer';\nimport { pad } from './utils';\n\nexport const prefixEncoder = (prefix: Prefix) => (str: string) => {\n  return buf2hex(Buffer.from(b58cdecode(str, prefixMap[prefix])));\n};\n\nexport const prefixDecoder = (pre: Prefix) => (str: Uint8ArrayConsumer) => {\n  const val = str.consume(prefixLength[pre]);\n  return b58cencode(val, prefixMap[pre]);\n};\n\nexport const tz1Decoder = prefixDecoder(Prefix.TZ1);\nexport const branchDecoder = prefixDecoder(Prefix.B);\nexport const pkhDecoder = (val: Uint8ArrayConsumer) => {\n  const prefix = val.consume(1);\n\n  if (prefix[0] === 0x00) {\n    return prefixDecoder(Prefix.TZ1)(val);\n  } else if (prefix[0] === 0x01) {\n    return prefixDecoder(Prefix.TZ2)(val);\n  } else if (prefix[0] === 0x02) {\n    return prefixDecoder(Prefix.TZ3)(val);\n  }\n};\n\nexport const branchEncoder = prefixEncoder(Prefix.B);\nexport const tz1Encoder = prefixEncoder(Prefix.TZ1);\n\nexport const boolEncoder = (bool: unknown): string => (bool ? 'ff' : '00');\n\nexport const proposalEncoder = (proposal: string): string => {\n  return prefixEncoder(Prefix.P)(proposal);\n};\n\nexport const proposalDecoder = (proposal: Uint8ArrayConsumer): string => {\n  return prefixDecoder(Prefix.P)(proposal);\n};\n\nexport const proposalsDecoder = (proposal: Uint8ArrayConsumer): string[] => {\n  const proposals = [];\n  proposal.consume(4);\n  while (proposal.length() > 0) {\n    proposals.push(proposalDecoder(proposal));\n  }\n  return proposals;\n};\n\nexport const proposalsEncoder = (proposals: string[]): string => {\n  return pad(32 * proposals.length) + proposals.map((x) => proposalEncoder(x)).join('');\n};\n\nexport const ballotEncoder = (ballot: string): string => {\n  switch (ballot) {\n    case 'yay':\n      return '00';\n    case 'nay':\n      return '01';\n    case 'pass':\n      return '02';\n    default:\n      throw new InvalidBallotValueError(ballot);\n  }\n};\n\nexport const ballotDecoder = (ballot: Uint8ArrayConsumer): string => {\n  const value = ballot.consume(1);\n  switch (value[0]) {\n    case 0x00:\n      return 'yay';\n    case 0x01:\n      return 'nay';\n    case 0x02:\n      return 'pass';\n    default:\n      throw new DecodeBallotValueError(value[0].toString());\n  }\n};\n\nexport const delegateEncoder = (val: string) => {\n  if (val) {\n    return boolEncoder(true) + pkhEncoder(val);\n  } else {\n    return boolEncoder(false);\n  }\n};\n\nexport const int32Encoder = (val: number | string): string => {\n  const num = parseInt(String(val), 10);\n  const byte = [];\n  for (let i = 0; i < 4; i++) {\n    const shiftBy = (4 - (i + 1)) * 8;\n    byte.push((num & (0xff << shiftBy)) >> shiftBy);\n  }\n  return Buffer.from(byte).toString('hex');\n};\n\nexport const int32Decoder = (val: Uint8ArrayConsumer) => {\n  const num = val.consume(4);\n  let finalNum = 0;\n  for (let i = 0; i < num.length; i++) {\n    finalNum = finalNum | (num[i] << ((num.length - (i + 1)) * 8));\n  }\n\n  return finalNum;\n};\n\nexport const int16Encoder = (val: number | string): string => {\n  const num = parseInt(String(val), 10);\n  const byte = [];\n  for (let i = 0; i < 2; i++) {\n    const shiftBy = (2 - (i + 1)) * 8;\n    byte.push((num & (0xff << shiftBy)) >> shiftBy);\n  }\n  return Buffer.from(byte).toString('hex');\n};\n\nexport const int16Decoder = (val: Uint8ArrayConsumer) => {\n  const num = val.consume(2);\n  let finalNum = 0;\n  for (let i = 0; i < num.length; i++) {\n    finalNum = finalNum | (num[i] << ((num.length - (i + 1)) * 8));\n  }\n\n  return finalNum;\n};\n\nexport const boolDecoder = (val: Uint8ArrayConsumer): boolean => {\n  const bool = val.consume(1);\n  return bool[0] === 0xff;\n};\n\nexport const delegateDecoder = (val: Uint8ArrayConsumer) => {\n  const hasDelegate = boolDecoder(val);\n  if (hasDelegate) {\n    return pkhDecoder(val);\n  }\n};\n\nexport const pkhEncoder = (val: string) => {\n  const pubkeyPrefix = val.substr(0, 3);\n  switch (pubkeyPrefix) {\n    case Prefix.TZ1:\n      return '00' + prefixEncoder(Prefix.TZ1)(val);\n    case Prefix.TZ2:\n      return '01' + prefixEncoder(Prefix.TZ2)(val);\n    case Prefix.TZ3:\n      return '02' + prefixEncoder(Prefix.TZ3)(val);\n    default:\n      throw new InvalidKeyHashError(val);\n  }\n};\n\nexport const publicKeyEncoder = (val: string) => {\n  const pubkeyPrefix = val.substr(0, 4);\n  switch (pubkeyPrefix) {\n    case Prefix.EDPK:\n      return '00' + prefixEncoder(Prefix.EDPK)(val);\n    case Prefix.SPPK:\n      return '01' + prefixEncoder(Prefix.SPPK)(val);\n    case Prefix.P2PK:\n      return '02' + prefixEncoder(Prefix.P2PK)(val);\n    default:\n      throw new InvalidPublicKeyError(val);\n  }\n};\n\nexport const addressEncoder = (val: string): string => {\n  const pubkeyPrefix = val.substr(0, 3);\n  switch (pubkeyPrefix) {\n    case Prefix.TZ1:\n    case Prefix.TZ2:\n    case Prefix.TZ3:\n      return '00' + pkhEncoder(val);\n    case Prefix.KT1:\n      return '01' + prefixEncoder(Prefix.KT1)(val) + '00';\n    default:\n      throw new InvalidAddressError(val);\n  }\n};\n\nexport const publicKeyDecoder = (val: Uint8ArrayConsumer) => {\n  const preamble = val.consume(1);\n  switch (preamble[0]) {\n    case 0x00:\n      return prefixDecoder(Prefix.EDPK)(val);\n    case 0x01:\n      return prefixDecoder(Prefix.SPPK)(val);\n    case 0x02:\n      return prefixDecoder(Prefix.P2PK)(val);\n    default:\n      throw new InvalidPublicKeyError(val.toString());\n  }\n};\n\nexport const addressDecoder = (val: Uint8ArrayConsumer) => {\n  const preamble = val.consume(1);\n  switch (preamble[0]) {\n    case 0x00:\n      return pkhDecoder(val);\n    case 0x01: {\n      const address = prefixDecoder(Prefix.KT1)(val);\n      val.consume(1);\n      return address;\n    }\n    default:\n      throw new InvalidAddressError(val.toString());\n  }\n};\n\nexport const zarithEncoder = (n: string): string => {\n  const fn: Array<string> = [];\n  let nn = new BigNumber(n, 10);\n  if (nn.isNaN()) {\n    throw new TypeError(`Invalid zarith number ${n}`);\n  }\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    if (nn.lt(128)) {\n      if (nn.lt(16)) fn.push('0');\n      fn.push(nn.toString(16));\n      break;\n    } else {\n      let b = nn.mod(128);\n      nn = nn.minus(b);\n      nn = nn.dividedBy(128);\n      b = b.plus(128);\n      fn.push(b.toString(16));\n    }\n  }\n  return fn.join('');\n};\n\nexport const zarithDecoder = (n: Uint8ArrayConsumer): string => {\n  let mostSignificantByte = 0;\n  while (mostSignificantByte < n.length() && (n.get(mostSignificantByte) & 128) !== 0) {\n    mostSignificantByte += 1;\n  }\n\n  let num = new BigNumber(0);\n  for (let i = mostSignificantByte; i >= 0; i -= 1) {\n    const tmp = n.get(i) & 0x7f;\n    num = num.multipliedBy(128);\n    num = num.plus(tmp);\n  }\n\n  n.consume(mostSignificantByte + 1);\n  return new BigNumber(num).toString();\n};\n\nexport const entrypointDecoder = (value: Uint8ArrayConsumer) => {\n  const preamble = pad(value.consume(1)[0], 2);\n\n  if (preamble in entrypointMapping) {\n    return entrypointMapping[preamble];\n  } else {\n    const entry = extractRequiredLen(value, 1);\n\n    const entrypoint = Buffer.from(entry).toString('utf8');\n\n    if (entrypoint.length > ENTRYPOINT_MAX_LENGTH) {\n      throw new OversizedEntryPointError(entrypoint);\n    }\n    return entrypoint;\n  }\n};\n\nexport const parametersDecoder = (val: Uint8ArrayConsumer) => {\n  const preamble = val.consume(1);\n  if (preamble[0] === 0x00) {\n    return;\n  } else {\n    const encodedEntrypoint = entrypointDecoder(val);\n    const params = extractRequiredLen(val);\n    const parameters = valueDecoder(new Uint8ArrayConsumer(params));\n    return {\n      entrypoint: encodedEntrypoint,\n      value: parameters,\n    };\n  }\n};\nexport const entrypointEncoder = (entrypoint: string) => {\n  if (entrypoint in entrypointMappingReverse) {\n    return `${entrypointMappingReverse[entrypoint]}`;\n  } else {\n    if (entrypoint.length > ENTRYPOINT_MAX_LENGTH) {\n      throw new OversizedEntryPointError(entrypoint);\n    }\n\n    const value = { string: entrypoint };\n    return `ff${valueEncoder(value).slice(8)}`;\n  }\n};\n\nexport const parametersEncoder = (val: { entrypoint: string; value: MichelsonValue }) => {\n  if (!val || (val.entrypoint === 'default' && 'prim' in val.value && val.value.prim === 'Unit')) {\n    return '00';\n  }\n\n  const encodedEntrypoint = entrypointEncoder(val.entrypoint);\n  const parameters = valueEncoder(val.value);\n  const length = (parameters.length / 2).toString(16).padStart(8, '0');\n  return `ff${encodedEntrypoint}${length}${parameters}`;\n};\n\nexport const valueParameterEncoder = (value: MichelsonValue) => {\n  const valueEncoded = valueEncoder(value);\n  return `${pad(valueEncoded.length / 2)}${valueEncoded}`;\n};\n\nexport const valueParameterDecoder = (val: Uint8ArrayConsumer) => {\n  const value = extractRequiredLen(val);\n  return valueDecoder(new Uint8ArrayConsumer(value));\n};\n","import { Decoder } from '../decoder';\nimport { Uint8ArrayConsumer } from '../uint8array-consumer';\nimport { kindMapping, kindMappingReverse } from '../constants';\nimport { InvalidOperationKindError } from '@taquito/utils';\nimport {\n  OperationDecodingError,\n  OperationEncodingError,\n  UnsupportedOperationError,\n} from '../error';\n\nexport const ManagerOperationSchema = {\n  branch: 'branch',\n  contents: ['operation'],\n};\n\nexport const ActivationSchema = {\n  pkh: 'tz1',\n  secret: 'secret',\n};\n\nexport const RevealSchema = {\n  source: 'pkh',\n  fee: 'zarith',\n  counter: 'zarith',\n  gas_limit: 'zarith',\n  storage_limit: 'zarith',\n  public_key: 'public_key',\n};\n\nexport const DelegationSchema = {\n  source: 'pkh',\n  fee: 'zarith',\n  counter: 'zarith',\n  gas_limit: 'zarith',\n  storage_limit: 'zarith',\n  delegate: 'delegate',\n};\n\nexport const TransactionSchema = {\n  source: 'pkh',\n  fee: 'zarith',\n  counter: 'zarith',\n  gas_limit: 'zarith',\n  storage_limit: 'zarith',\n  amount: 'zarith',\n  destination: 'address',\n  parameters: 'parameters',\n};\n\nexport const OriginationSchema = {\n  source: 'pkh',\n  fee: 'zarith',\n  counter: 'zarith',\n  gas_limit: 'zarith',\n  storage_limit: 'zarith',\n  balance: 'zarith',\n  delegate: 'delegate',\n  script: 'script',\n};\n\nexport const BallotSchema = {\n  source: 'pkh',\n  period: 'int32',\n  proposal: 'proposal',\n  ballot: 'ballotStmt',\n};\n\nexport const EndorsementSchema = {\n  level: 'int32',\n};\n\nexport const SeedNonceRevelationSchema = {\n  level: 'int32',\n  nonce: 'raw',\n};\n\nexport const ProposalsSchema = {\n  source: 'pkh',\n  period: 'int32',\n  proposals: 'proposalArr',\n};\n\nexport const RegisterGlobalConstantSchema = {\n  source: 'pkh',\n  fee: 'zarith',\n  counter: 'zarith',\n  gas_limit: 'zarith',\n  storage_limit: 'zarith',\n  value: 'value',\n};\n\nexport const operationEncoder =\n  (encoders: { [key: string]: (val: object) => string }) => (operation: { kind: string }) => {\n    if (!(operation.kind in encoders) || !(operation.kind in kindMappingReverse)) {\n      throw new InvalidOperationKindError(operation.kind);\n    }\n\n    return kindMappingReverse[operation.kind] + encoders[operation.kind](operation);\n  };\n\nexport const operationDecoder =\n  (decoders: { [key: string]: Decoder }) => (value: Uint8ArrayConsumer) => {\n    const op = value.consume(1);\n\n    const operationName = kindMapping[op[0]];\n    if (operationName === undefined) {\n      throw new UnsupportedOperationError(op[0].toString());\n    }\n\n    const decodedObj = decoders[operationName](value);\n\n    if (typeof decodedObj !== 'object') {\n      throw new OperationDecodingError('Decoded invalid operation');\n    }\n\n    return {\n      kind: operationName,\n      ...decodedObj,\n    };\n  };\n\nexport const schemaEncoder =\n  (encoders: { [key: string]: (val: object) => string }) =>\n  (schema: { [key: string]: string | string[] }) =>\n  <T extends { [key: string]: any }>(value: T) => {\n    const keys = Object.keys(schema);\n    return keys.reduce((prev, key) => {\n      const valueToEncode = schema[key];\n\n      if (Array.isArray(valueToEncode)) {\n        const encoder = encoders[valueToEncode[0]];\n        const values = value[key];\n\n        if (!Array.isArray(values)) {\n          throw new OperationEncodingError(`Expected value to be Array ${JSON.stringify(values)}`);\n        }\n\n        return prev + values.reduce((prevBytes, current) => prevBytes + encoder(current), '');\n      } else {\n        const encoder = encoders[valueToEncode];\n        return prev + encoder(value[key]);\n      }\n    }, '');\n  };\n\nexport const schemaDecoder =\n  (decoders: { [key: string]: Decoder }) =>\n  (schema: { [key: string]: string | string[] }) =>\n  (value: Uint8ArrayConsumer) => {\n    const keys = Object.keys(schema);\n    return keys.reduce((prev, key) => {\n      const valueToEncode = schema[key];\n\n      if (Array.isArray(valueToEncode)) {\n        const decoder = decoders[valueToEncode[0]];\n\n        const decoded = [];\n        const lastLength = value.length();\n        while (value.length() > 0) {\n          decoded.push(decoder(value));\n\n          if (lastLength === value.length()) {\n            throw new OperationDecodingError('Unable to decode value');\n          }\n        }\n\n        return {\n          ...prev,\n          [key]: decoded,\n        };\n      } else {\n        const decoder = decoders[valueToEncode];\n\n        const result = decoder(value);\n\n        if (typeof result !== 'undefined') {\n          return {\n            ...prev,\n            [key]: result,\n          };\n        } else {\n          return {\n            ...prev,\n          };\n        }\n      }\n    }, {});\n  };\n","import {\n  addressDecoder,\n  ballotDecoder,\n  branchDecoder,\n  delegateDecoder,\n  int32Decoder,\n  parametersDecoder,\n  pkhDecoder,\n  proposalDecoder,\n  proposalsDecoder,\n  publicKeyDecoder,\n  tz1Decoder,\n  valueParameterDecoder,\n  zarithDecoder,\n} from './codec';\nimport { CODEC } from './constants';\nimport { scriptDecoder } from './michelson/codec';\nimport {\n  ActivationSchema,\n  BallotSchema,\n  DelegationSchema,\n  EndorsementSchema,\n  ManagerOperationSchema,\n  operationDecoder,\n  OriginationSchema,\n  ProposalsSchema,\n  RegisterGlobalConstantSchema,\n  RevealSchema,\n  schemaDecoder,\n  SeedNonceRevelationSchema,\n  TransactionSchema,\n} from './schema/operation';\nimport { Uint8ArrayConsumer } from './uint8array-consumer';\nimport { toHexString } from './utils';\n\nexport type Decoder = (val: Uint8ArrayConsumer) => string | number | object | undefined;\n\nexport const decoders: { [key: string]: Decoder } = {\n  [CODEC.SECRET]: (val) => toHexString(val.consume(20)),\n  [CODEC.RAW]: (val) => toHexString(val.consume(32)),\n  [CODEC.TZ1]: tz1Decoder,\n  [CODEC.BRANCH]: branchDecoder,\n  [CODEC.ZARITH]: zarithDecoder,\n  [CODEC.PUBLIC_KEY]: publicKeyDecoder,\n  [CODEC.PKH]: pkhDecoder,\n  [CODEC.DELEGATE]: delegateDecoder,\n  [CODEC.INT32]: int32Decoder,\n  [CODEC.SCRIPT]: scriptDecoder,\n  [CODEC.BALLOT_STATEMENT]: ballotDecoder,\n  [CODEC.PROPOSAL]: proposalDecoder,\n  [CODEC.PROPOSAL_ARR]: proposalsDecoder,\n  [CODEC.PARAMETERS]: parametersDecoder,\n  [CODEC.ADDRESS]: addressDecoder,\n  [CODEC.VALUE]: valueParameterDecoder,\n};\n\ndecoders[CODEC.OPERATION] = operationDecoder(decoders);\ndecoders[CODEC.OP_ACTIVATE_ACCOUNT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decoders)(ActivationSchema)(val);\ndecoders[CODEC.OP_DELEGATION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decoders)(DelegationSchema)(val);\ndecoders[CODEC.OP_TRANSACTION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decoders)(TransactionSchema)(val);\ndecoders[CODEC.OP_ORIGINATION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decoders)(OriginationSchema)(val);\ndecoders[CODEC.OP_BALLOT] = (val: Uint8ArrayConsumer) => schemaDecoder(decoders)(BallotSchema)(val);\ndecoders[CODEC.OP_ENDORSEMENT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decoders)(EndorsementSchema)(val);\ndecoders[CODEC.OP_SEED_NONCE_REVELATION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decoders)(SeedNonceRevelationSchema)(val);\ndecoders[CODEC.OP_PROPOSALS] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decoders)(ProposalsSchema)(val);\ndecoders[CODEC.OP_REVEAL] = (val: Uint8ArrayConsumer) => schemaDecoder(decoders)(RevealSchema)(val);\ndecoders[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decoders)(RegisterGlobalConstantSchema)(val);\ndecoders[CODEC.MANAGER] = schemaDecoder(decoders)(ManagerOperationSchema);\n","import {\n  addressEncoder,\n  ballotEncoder,\n  branchEncoder,\n  delegateEncoder,\n  int32Encoder,\n  parametersEncoder,\n  pkhEncoder,\n  proposalEncoder,\n  proposalsEncoder,\n  publicKeyEncoder,\n  tz1Encoder,\n  valueParameterEncoder,\n  zarithEncoder,\n} from './codec';\nimport { CODEC } from './constants';\nimport { scriptEncoder } from './michelson/codec';\nimport {\n  ActivationSchema,\n  BallotSchema,\n  DelegationSchema,\n  EndorsementSchema,\n  ManagerOperationSchema,\n  operationEncoder,\n  OriginationSchema,\n  ProposalsSchema,\n  RegisterGlobalConstantSchema,\n  RevealSchema,\n  schemaEncoder,\n  SeedNonceRevelationSchema,\n  TransactionSchema,\n} from './schema/operation';\n\nexport type Encoder<T> = (val: T) => string;\n\nexport const encoders: { [key: string]: Encoder<any> } = {\n  [CODEC.SECRET]: (val: string) => val,\n  [CODEC.RAW]: (val: string) => val,\n  [CODEC.TZ1]: tz1Encoder,\n  [CODEC.BRANCH]: branchEncoder,\n  [CODEC.ZARITH]: zarithEncoder,\n  [CODEC.PUBLIC_KEY]: publicKeyEncoder,\n  [CODEC.PKH]: pkhEncoder,\n  [CODEC.DELEGATE]: delegateEncoder,\n  [CODEC.SCRIPT]: scriptEncoder,\n  [CODEC.BALLOT_STATEMENT]: ballotEncoder,\n  [CODEC.PROPOSAL]: proposalEncoder,\n  [CODEC.PROPOSAL_ARR]: proposalsEncoder,\n  [CODEC.INT32]: int32Encoder,\n  [CODEC.PARAMETERS]: parametersEncoder,\n  [CODEC.ADDRESS]: addressEncoder,\n  [CODEC.VALUE]: valueParameterEncoder\n};\n\nencoders[CODEC.OPERATION] = operationEncoder(encoders);\nencoders[CODEC.OP_ACTIVATE_ACCOUNT] = (val: any) => schemaEncoder(encoders)(ActivationSchema)(val);\nencoders[CODEC.OP_DELEGATION] = (val: any) => schemaEncoder(encoders)(DelegationSchema)(val);\nencoders[CODEC.OP_TRANSACTION] = (val: any) => schemaEncoder(encoders)(TransactionSchema)(val);\nencoders[CODEC.OP_ORIGINATION] = (val: any) => schemaEncoder(encoders)(OriginationSchema)(val);\nencoders[CODEC.OP_BALLOT] = (val: any) => schemaEncoder(encoders)(BallotSchema)(val);\nencoders[CODEC.OP_ENDORSEMENT] = (val: any) => schemaEncoder(encoders)(EndorsementSchema)(val);\nencoders[CODEC.OP_SEED_NONCE_REVELATION] = (val: any) =>\n  schemaEncoder(encoders)(SeedNonceRevelationSchema)(val);\nencoders[CODEC.OP_PROPOSALS] = (val: any) => schemaEncoder(encoders)(ProposalsSchema)(val);\nencoders[CODEC.OP_REVEAL] = (val: any) => schemaEncoder(encoders)(RevealSchema)(val);\nencoders[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = (val: any) => schemaEncoder(encoders)(RegisterGlobalConstantSchema)(val);\nencoders[CODEC.MANAGER] = schemaEncoder(encoders)(ManagerOperationSchema);\n","import { Prefix } from '@taquito/utils';\nimport { prefixDecoder, prefixEncoder } from '../codec';\n\nexport const blockPayloadHashEncoder = prefixEncoder(Prefix.VH);\nexport const blockPayloadHashDecoder = prefixDecoder(Prefix.VH);\n","import { kindMapping } from '../constants';\nimport { pad } from '../utils';\n\nconst { [0x00]: _ommited, ...kindMappingNoEndorsement } = kindMapping;\n\nexport const kindMappingProto12: { [key: number]: string } = {\n  ...kindMappingNoEndorsement,\n  0x15: 'endorsement',\n};\n\nexport const kindMappingReverseProto12 = (() => {\n  const result: { [key: string]: string } = {};\n  Object.keys(kindMappingProto12).forEach((key: number | string) => {\n    const keyNum = typeof key === 'string' ? parseInt(key, 10) : key;\n    result[kindMappingProto12[keyNum]] = pad(keyNum, 2);\n  });\n  return result;\n})();\n","import { Decoder } from '../decoder';\nimport { Uint8ArrayConsumer } from '../uint8array-consumer';\nimport { kindMappingProto12, kindMappingReverseProto12 } from './constants';\nimport { InvalidOperationKindError } from '@taquito/utils';\nimport { OperationDecodingError, UnsupportedOperationError } from '../error';\n\nexport const EndorsementSchemaProto12 = {\n  slot: 'int16',\n  level: 'int32',\n  round: 'int32',\n  block_payload_hash: 'blockPayloadHash',\n};\n\nexport const operationEncoderProto12 =\n  (encoders: { [key: string]: (val: object) => string }) => (operation: { kind: string }) => {\n    if (!(operation.kind in encoders) || !(operation.kind in kindMappingReverseProto12)) {\n      throw new InvalidOperationKindError(operation.kind);\n    }\n\n    return kindMappingReverseProto12[operation.kind] + encoders[operation.kind](operation);\n  };\n\nexport const operationDecoderProto12 =\n  (decoders: { [key: string]: Decoder }) => (value: Uint8ArrayConsumer) => {\n    const op = value.consume(1);\n\n    const operationName = kindMappingProto12[op[0]];\n    if (operationName === undefined) {\n      throw new UnsupportedOperationError(op[0].toString());\n    }\n    const decodedObj = decoders[operationName](value);\n\n    if (typeof decodedObj !== 'object') {\n      throw new OperationDecodingError('Decoded invalid operation');\n    }\n\n    return {\n      kind: operationName,\n      ...decodedObj,\n    };\n  };\n","import { int16Decoder } from '../codec';\nimport { CODEC } from '../constants';\nimport { Decoder, decoders } from '../decoder';\nimport {\n  schemaDecoder,\n  ActivationSchema,\n  DelegationSchema,\n  TransactionSchema,\n  OriginationSchema,\n  BallotSchema,\n  SeedNonceRevelationSchema,\n  ProposalsSchema,\n  RevealSchema,\n  RegisterGlobalConstantSchema,\n  ManagerOperationSchema,\n} from '../schema/operation';\nimport { Uint8ArrayConsumer } from '../uint8array-consumer';\nimport { blockPayloadHashDecoder } from './codec';\nimport { EndorsementSchemaProto12, operationDecoderProto12 } from './schema';\n\nexport const decodersProto12: { [key: string]: Decoder } = {\n  ...decoders,\n  [CODEC.INT16]: int16Decoder,\n  [CODEC.BLOCK_PAYLOAD_HASH]: blockPayloadHashDecoder,\n};\n\ndecodersProto12[CODEC.OPERATION] = operationDecoderProto12(decodersProto12);\ndecodersProto12[CODEC.OP_ACTIVATE_ACCOUNT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto12)(ActivationSchema)(val);\ndecodersProto12[CODEC.OP_DELEGATION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto12)(DelegationSchema)(val);\ndecodersProto12[CODEC.OP_TRANSACTION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto12)(TransactionSchema)(val);\ndecodersProto12[CODEC.OP_ORIGINATION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto12)(OriginationSchema)(val);\ndecodersProto12[CODEC.OP_BALLOT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto12)(BallotSchema)(val);\ndecodersProto12[CODEC.OP_ENDORSEMENT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto12)(EndorsementSchemaProto12)(val);\ndecodersProto12[CODEC.OP_SEED_NONCE_REVELATION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto12)(SeedNonceRevelationSchema)(val);\ndecodersProto12[CODEC.OP_PROPOSALS] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto12)(ProposalsSchema)(val);\ndecodersProto12[CODEC.OP_REVEAL] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto12)(RevealSchema)(val);\ndecodersProto12[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto12)(RegisterGlobalConstantSchema)(val);\ndecodersProto12[CODEC.MANAGER] = schemaDecoder(decodersProto12)(ManagerOperationSchema);\n","import { int16Encoder } from '../codec';\nimport { CODEC } from '../constants';\nimport { Encoder, encoders } from '../encoder';\nimport {\n  schemaEncoder,\n  ActivationSchema,\n  DelegationSchema,\n  TransactionSchema,\n  OriginationSchema,\n  BallotSchema,\n  SeedNonceRevelationSchema,\n  ProposalsSchema,\n  RevealSchema,\n  RegisterGlobalConstantSchema,\n  ManagerOperationSchema,\n} from '../schema/operation';\nimport { blockPayloadHashEncoder } from './codec';\nimport { EndorsementSchemaProto12, operationEncoderProto12 } from './schema';\n\nexport const encodersProto12: { [key: string]: Encoder<any> } = {\n  ...encoders,\n  [CODEC.INT16]: int16Encoder,\n  [CODEC.BLOCK_PAYLOAD_HASH]: blockPayloadHashEncoder,\n};\n\nencodersProto12[CODEC.OPERATION] = operationEncoderProto12(encodersProto12);\nencodersProto12[CODEC.OP_ACTIVATE_ACCOUNT] = (val: any) =>\n  schemaEncoder(encodersProto12)(ActivationSchema)(val);\nencodersProto12[CODEC.OP_DELEGATION] = (val: any) =>\n  schemaEncoder(encodersProto12)(DelegationSchema)(val);\nencodersProto12[CODEC.OP_TRANSACTION] = (val: any) =>\n  schemaEncoder(encodersProto12)(TransactionSchema)(val);\nencodersProto12[CODEC.OP_ORIGINATION] = (val: any) =>\n  schemaEncoder(encodersProto12)(OriginationSchema)(val);\nencodersProto12[CODEC.OP_BALLOT] = (val: any) => schemaEncoder(encodersProto12)(BallotSchema)(val);\nencodersProto12[CODEC.OP_ENDORSEMENT] = (val: any) =>\n  schemaEncoder(encodersProto12)(EndorsementSchemaProto12)(val);\nencodersProto12[CODEC.OP_SEED_NONCE_REVELATION] = (val: any) =>\n  schemaEncoder(encodersProto12)(SeedNonceRevelationSchema)(val);\nencodersProto12[CODEC.OP_PROPOSALS] = (val: any) =>\n  schemaEncoder(encodersProto12)(ProposalsSchema)(val);\nencodersProto12[CODEC.OP_REVEAL] = (val: any) => schemaEncoder(encodersProto12)(RevealSchema)(val);\nencodersProto12[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = (val: any) =>\n  schemaEncoder(encodersProto12)(RegisterGlobalConstantSchema)(val);\nencodersProto12[CODEC.MANAGER] = schemaEncoder(encodersProto12)(ManagerOperationSchema);\n","import { OpKind } from '@taquito/rpc';\nimport { OperationContents } from '@taquito/rpc';\nimport {\n  ActivationSchema,\n  DelegationSchema,\n  TransactionSchema,\n  OriginationSchema,\n  BallotSchema,\n  SeedNonceRevelationSchema,\n  ProposalsSchema,\n  RevealSchema,\n  RegisterGlobalConstantSchema,\n  EndorsementSchema,\n} from './schema/operation';\n\ntype OperationKind =\n  | 'activate_account'\n  | 'reveal'\n  | 'delegation'\n  | 'transaction'\n  | 'origination'\n  | 'ballot'\n  | 'endorsement'\n  | 'seed_nonce_revelation'\n  | 'proposals'\n  | 'register_global_constant';\n\nconst OperationKindMapping = {\n  activate_account: ActivationSchema,\n  reveal: RevealSchema,\n  delegation: DelegationSchema,\n  transaction: TransactionSchema,\n  origination: OriginationSchema,\n  ballot: BallotSchema,\n  endorsement: EndorsementSchema,\n  seed_nonce_revelation: SeedNonceRevelationSchema,\n  proposals: ProposalsSchema,\n  register_global_constant: RegisterGlobalConstantSchema,\n};\n\n// Asymmetric difference: only account for things in arr2 that are not present in arr1, not vice versa\nconst getArrayDifference = (arr1: string[], arr2: string[]) => {\n  return arr2.filter((x) => !arr1.includes(x));\n};\n\nconst deleteArrayElementByValue = (array: string[], item: string) => {\n  return array.filter((e) => e !== item);\n};\n\n/**\n * @returns A boolean value to indicate whether the operation kind is valid or not\n */\nexport const validateOperationKind = (opKind: OpKind) => {\n  const opKindList = Object.keys(OperationKindMapping);\n  return opKindList.includes(opKind);\n};\n\n/**\n *  returns 0 when the two array of properties are identical or the passed property\n *  does not have any missing parameters from the corresponding schema\n *\n *  @returns array element differences if there are missing required property keys\n */\nexport const validateMissingProperty = (operationContent: OperationContents) => {\n  const kind = operationContent.kind as OperationKind;\n\n  const keys = Object.keys(operationContent);\n  const cleanKeys = deleteArrayElementByValue(keys, 'kind');\n\n  const schemaKeys = Object.keys(OperationKindMapping[kind]);\n\n  return getArrayDifference(cleanKeys, schemaKeys);\n};\n","export enum ProtocolsHash {\n  Pt24m4xi = 'Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd',\n  PsBABY5H = 'PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU',\n  PsBabyM1 = 'PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS',\n  PsCARTHA = 'PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb',\n  PsDELPH1 = 'PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo',\n  PtEdo2Zk = 'PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA',\n  PsFLorena = 'PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i',\n  PtGRANADs = 'PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV',\n  PtHangz2 = 'PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx',\n  Psithaca2 = 'Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A',\n  PtJakart2 = 'PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY',\n  ProtoALpha = 'ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK',\n}\n\nconst protoLevel: Record<ProtocolsHash, number> = {\n  Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd: 4,\n  PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU: 5,\n  PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS: 5,\n  PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb: 6,\n  PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo: 7,\n  PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA: 8,\n  PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i: 9,\n  PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV: 10,\n  PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx: 11,\n  Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A: 12,\n  PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY: 13,\n  ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK: 14,\n};\n\nexport function ProtoInferiorTo(a: ProtocolsHash, b: ProtocolsHash): boolean {\n  return protoLevel[a] < protoLevel[b];\n}\n","import { opMapping as opMappingGeneral } from './../constants';\n\nexport const opMappingProto13: { [key: string]: string } = {\n  ...opMappingGeneral,\n  '84': 'sapling_transaction_deprecated',\n  '94': 'tx_rollup_l2_address',\n  '95': 'MIN_BLOCK_TIME',\n  '96': 'sapling_transaction',\n};\n\nexport const opMappingReverseProto13 = (() => {\n  const result: { [key: string]: string } = {};\n  Object.keys(opMappingProto13).forEach((key: string) => {\n    result[opMappingProto13[key]] = key;\n  });\n  return result;\n})();\n","import { Decoder } from '../../decoder';\nimport { pad } from '../../utils';\nimport { Encoder } from '../../encoder';\nimport {\n  bytesDecoder,\n  bytesEncoder,\n  decodeAnnots,\n  encodeAnnots,\n  extractRequiredLen,\n  intDecoder,\n  intEncoder,\n  isBytes,\n  isInt,\n  isPrim,\n  isString,\n  MichelsonValue,\n  PrimValue,\n  stringDecoder,\n  stringEncoder,\n} from '../../michelson/codec';\nimport { Uint8ArrayConsumer } from '../../uint8array-consumer';\nimport { opMappingProto13, opMappingReverseProto13 } from '../constants-proto13';\nimport { UnexpectedMichelsonValueError } from '../../error';\n\nexport const scriptEncoderProto13: Encoder<{ code: MichelsonValue; storage: MichelsonValue }> = (\n  script\n) => {\n  const code = valueEncoderProto13(script.code);\n  const storage = valueEncoderProto13(script.storage);\n  return `${pad(code.length / 2, 8)}${code}${pad(storage.length / 2, 8)}${storage}`;\n};\n\nexport const scriptDecoderProto13: Decoder = (value: Uint8ArrayConsumer) => {\n  const code = extractRequiredLen(value);\n  const storage = extractRequiredLen(value);\n\n  return {\n    code: valueDecoderProto13(new Uint8ArrayConsumer(code)),\n    storage: valueDecoderProto13(new Uint8ArrayConsumer(storage)),\n  };\n};\n\nexport const valueEncoderProto13: Encoder<MichelsonValue> = (value: MichelsonValue) => {\n  if (Array.isArray(value)) {\n    const encoded = value.map((x) => valueEncoderProto13(x)).join('');\n    const len = encoded.length / 2;\n    return `02${pad(len)}${encoded}`;\n  } else if (isPrim(value)) {\n    return primEncoderProto13(value);\n  } else if (isBytes(value)) {\n    return bytesEncoder(value);\n  } else if (isString(value)) {\n    return stringEncoder(value);\n  } else if (isInt(value)) {\n    return intEncoder(value);\n  }\n\n  throw new UnexpectedMichelsonValueError('Unexpected value');\n};\n\nexport const valueDecoderProto13: Decoder = (value: Uint8ArrayConsumer) => {\n  const preamble = value.consume(1);\n  switch (preamble[0]) {\n    case 0x0a:\n      return bytesDecoder(value);\n    case 0x01:\n      return stringDecoder(value);\n    case 0x00:\n      return intDecoder(value);\n    case 0x02: {\n      const val = new Uint8ArrayConsumer(extractRequiredLen(value));\n      const results = [];\n      while (val.length() > 0) {\n        results.push(valueDecoderProto13(val));\n      }\n      return results;\n    }\n    default:\n      return primDecoderProto13(value, preamble);\n  }\n};\n\nexport const primEncoderProto13: Encoder<PrimValue> = (value) => {\n  const hasAnnot = +Array.isArray(value.annots);\n  const argsCount = Array.isArray(value.args) ? value.args.length : 0;\n\n  // Specify the number of args max is 3 without annotation\n  const preamble = pad(Math.min(2 * argsCount + hasAnnot + 0x03, 9), 2);\n\n  const op = opMappingReverseProto13[value.prim];\n\n  let encodedArgs = (value.args || []).map((arg) => valueEncoderProto13(arg)).join('');\n  const encodedAnnots = Array.isArray(value.annots) ? encodeAnnots(value.annots) : '';\n\n  if (value.prim === 'LAMBDA' && argsCount) {\n    encodedArgs = pad(encodedArgs.length / 2) + encodedArgs + pad(0);\n  }\n\n  if ((value.prim === 'pair' || value.prim === 'Pair') && argsCount > 2) {\n    encodedArgs =\n      encodedAnnots === ''\n        ? pad(encodedArgs.length / 2) + encodedArgs + pad(0)\n        : pad(encodedArgs.length / 2) + encodedArgs;\n  }\n\n  if (value.prim === 'view' && value.args) {\n    encodedArgs = pad(encodedArgs.length / 2) + encodedArgs + pad(0);\n  }\n\n  return `${preamble}${op}${encodedArgs}${encodedAnnots}`;\n};\n\nexport const primDecoderProto13 = (value: Uint8ArrayConsumer, preamble: Uint8Array) => {\n  const hasAnnot = (preamble[0] - 0x03) % 2 === 1;\n  let argsCount = Math.floor((preamble[0] - 0x03) / 2);\n  const op = value.consume(1)[0].toString(16).padStart(2, '0');\n\n  const result: Partial<PrimValue> = {\n    prim: opMappingProto13[op],\n  };\n\n  if (opMappingProto13[op] === 'LAMBDA') {\n    value.consume(4);\n  }\n\n  if (opMappingProto13[op] === 'view') {\n    if (argsCount != 0) {\n      return primViewDecoderProto13(value, result) as any;\n    } else {\n      return result;\n    }\n  }\n\n  let combPairArgs;\n  let combPairAnnots;\n  if ((opMappingProto13[op] === 'pair' || opMappingProto13[op] === 'Pair') && argsCount > 2) {\n    combPairArgs = decodeCombPair(value);\n    argsCount = 0;\n    combPairAnnots = decodeAnnots(value);\n  }\n\n  const args = new Array(argsCount).fill(0).map(() => valueDecoderProto13(value));\n\n  if (opMappingProto13[op] === 'LAMBDA') {\n    value.consume(4);\n  }\n\n  if (combPairArgs) {\n    result['args'] = combPairArgs as any;\n  } else if (args.length) {\n    result['args'] = args as any;\n  }\n\n  if (combPairAnnots && (combPairAnnots as any)[0] !== '') {\n    result['annots'] = combPairAnnots as any;\n  } else if (hasAnnot) {\n    result['annots'] = decodeAnnots(value) as any;\n  }\n\n  return result;\n};\n\nexport const primViewDecoderProto13 = (value: Uint8ArrayConsumer, result: Partial<PrimValue>) => {\n  value.consume(4);\n  result['args'] = new Array(4).fill(0).map(() => valueDecoderProto13(value)) as any;\n  value.consume(4);\n  return result;\n};\n\nexport const decodeCombPair: Decoder = (val: Uint8ArrayConsumer) => {\n  const array = new Uint8ArrayConsumer(extractRequiredLen(val));\n  const args = [];\n  while (array.length() > 0) {\n    args.push(valueDecoderProto13(array));\n  }\n  return args;\n};\n","import { entrypointDecoder } from '../codec';\nimport { entrypointMappingReverse, ENTRYPOINT_MAX_LENGTH } from '../constants';\nimport { OversizedEntryPointError } from '../error';\nimport { extractRequiredLen, MichelsonValue } from '../michelson/codec';\nimport { Uint8ArrayConsumer } from '../uint8array-consumer';\nimport { pad } from '../utils';\nimport { valueDecoderProto13, valueEncoderProto13 } from './michelson-proto13/codec-proto13';\n\nexport const parametersDecoderProto13 = (val: Uint8ArrayConsumer) => {\n  const preamble = val.consume(1);\n  if (preamble[0] === 0x00) {\n    return;\n  } else {\n    const encodedEntrypoint = entrypointDecoder(val);\n    const params = extractRequiredLen(val);\n    const parameters = valueDecoderProto13(new Uint8ArrayConsumer(params));\n    return {\n      entrypoint: encodedEntrypoint,\n      value: parameters,\n    };\n  }\n};\n\nexport const valueParameterDecoderProto13 = (val: Uint8ArrayConsumer) => {\n  const value = extractRequiredLen(val);\n  return valueDecoderProto13(new Uint8ArrayConsumer(value));\n};\n\nexport const entrypointEncoderProto13 = (entrypoint: string) => {\n  if (entrypoint in entrypointMappingReverse) {\n    return `${entrypointMappingReverse[entrypoint]}`;\n  } else {\n    if (entrypoint.length > ENTRYPOINT_MAX_LENGTH) {\n      throw new OversizedEntryPointError(entrypoint);\n    }\n\n    const value = { string: entrypoint };\n    return `ff${valueEncoderProto13(value).slice(8)}`;\n  }\n};\n\nexport const parametersEncoderProto13 = (val: { entrypoint: string; value: MichelsonValue }) => {\n  if (!val || (val.entrypoint === 'default' && 'prim' in val.value && val.value.prim === 'Unit')) {\n    return '00';\n  }\n\n  const encodedEntrypoint = entrypointEncoderProto13(val.entrypoint);\n  const parameters = valueEncoderProto13(val.value);\n  const length = (parameters.length / 2).toString(16).padStart(8, '0');\n  return `ff${encodedEntrypoint}${length}${parameters}`;\n};\n\nexport const valueParameterEncoderProto13 = (value: MichelsonValue) => {\n  const valueEncoded = valueEncoderProto13(value);\n  return `${pad(valueEncoded.length / 2)}${valueEncoded}`;\n};\n","import { CODEC } from '../constants';\nimport { Encoder } from '../encoder';\nimport { encodersProto12 } from '../proto12-ithaca/encoder';\nimport { EndorsementSchemaProto12, operationEncoderProto12 } from '../proto12-ithaca/schema';\nimport {\n  ActivationSchema,\n  BallotSchema,\n  DelegationSchema,\n  ManagerOperationSchema,\n  OriginationSchema,\n  ProposalsSchema,\n  RegisterGlobalConstantSchema,\n  RevealSchema,\n  schemaEncoder,\n  SeedNonceRevelationSchema,\n  TransactionSchema,\n} from '../schema/operation';\nimport { parametersEncoderProto13, valueParameterEncoderProto13 } from './codec-proto13';\nimport { scriptEncoderProto13 } from './michelson-proto13/codec-proto13';\n\nexport const encodersProto13: { [key: string]: Encoder<any> } = {\n  ...encodersProto12,\n  [CODEC.SCRIPT]: scriptEncoderProto13,\n  [CODEC.PARAMETERS]: parametersEncoderProto13,\n  [CODEC.VALUE]: valueParameterEncoderProto13,\n};\n\nencodersProto13[CODEC.OPERATION] = operationEncoderProto12(encodersProto13);\nencodersProto13[CODEC.OP_ACTIVATE_ACCOUNT] = (val: any) =>\n  schemaEncoder(encodersProto13)(ActivationSchema)(val);\nencodersProto13[CODEC.OP_DELEGATION] = (val: any) =>\n  schemaEncoder(encodersProto13)(DelegationSchema)(val);\nencodersProto13[CODEC.OP_TRANSACTION] = (val: any) =>\n  schemaEncoder(encodersProto13)(TransactionSchema)(val);\nencodersProto13[CODEC.OP_ORIGINATION] = (val: any) =>\n  schemaEncoder(encodersProto13)(OriginationSchema)(val);\nencodersProto13[CODEC.OP_BALLOT] = (val: any) => schemaEncoder(encodersProto13)(BallotSchema)(val);\nencodersProto13[CODEC.OP_ENDORSEMENT] = (val: any) =>\n  schemaEncoder(encodersProto13)(EndorsementSchemaProto12)(val);\nencodersProto13[CODEC.OP_SEED_NONCE_REVELATION] = (val: any) =>\n  schemaEncoder(encodersProto13)(SeedNonceRevelationSchema)(val);\nencodersProto13[CODEC.OP_PROPOSALS] = (val: any) =>\n  schemaEncoder(encodersProto13)(ProposalsSchema)(val);\nencodersProto13[CODEC.OP_REVEAL] = (val: any) => schemaEncoder(encodersProto13)(RevealSchema)(val);\nencodersProto13[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = (val: any) =>\n  schemaEncoder(encodersProto13)(RegisterGlobalConstantSchema)(val);\nencodersProto13[CODEC.MANAGER] = schemaEncoder(encodersProto13)(ManagerOperationSchema);\n","import { decodersProto12 } from '../proto12-ithaca/decoder';\nimport { Decoder } from '../decoder';\nimport { CODEC } from '../constants';\nimport { EndorsementSchemaProto12, operationDecoderProto12 } from '../proto12-ithaca/schema';\nimport { Uint8ArrayConsumer } from '../uint8array-consumer';\nimport { parametersDecoderProto13, valueParameterDecoderProto13 } from './codec-proto13';\nimport {\n  ActivationSchema,\n  BallotSchema,\n  DelegationSchema,\n  ManagerOperationSchema,\n  OriginationSchema,\n  ProposalsSchema,\n  RegisterGlobalConstantSchema,\n  RevealSchema,\n  schemaDecoder,\n  SeedNonceRevelationSchema,\n  TransactionSchema,\n} from '../schema/operation';\nimport { scriptDecoderProto13 } from './michelson-proto13/codec-proto13';\n\nexport const decodersProto13: { [key: string]: Decoder } = {\n  ...decodersProto12,\n  [CODEC.SCRIPT]: scriptDecoderProto13,\n  [CODEC.PARAMETERS]: parametersDecoderProto13,\n  [CODEC.VALUE]: valueParameterDecoderProto13,\n};\n\ndecodersProto13[CODEC.OPERATION] = operationDecoderProto12(decodersProto13);\ndecodersProto13[CODEC.OP_ACTIVATE_ACCOUNT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto13)(ActivationSchema)(val);\ndecodersProto13[CODEC.OP_DELEGATION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto13)(DelegationSchema)(val);\ndecodersProto13[CODEC.OP_TRANSACTION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto13)(TransactionSchema)(val);\ndecodersProto13[CODEC.OP_ORIGINATION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto13)(OriginationSchema)(val);\ndecodersProto13[CODEC.OP_BALLOT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto13)(BallotSchema)(val);\ndecodersProto13[CODEC.OP_ENDORSEMENT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto13)(EndorsementSchemaProto12)(val);\ndecodersProto13[CODEC.OP_SEED_NONCE_REVELATION] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto13)(SeedNonceRevelationSchema)(val);\ndecodersProto13[CODEC.OP_PROPOSALS] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto13)(ProposalsSchema)(val);\ndecodersProto13[CODEC.OP_REVEAL] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto13)(RevealSchema)(val);\ndecodersProto13[CODEC.OP_REGISTER_GLOBAL_CONSTANT] = (val: Uint8ArrayConsumer) =>\n  schemaDecoder(decodersProto13)(RegisterGlobalConstantSchema)(val);\ndecodersProto13[CODEC.MANAGER] = schemaDecoder(decodersProto13)(ManagerOperationSchema);\n","\n// IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!\nexport const VERSION = {\n    \"commitHash\": \"38da814ec2bb4e81c7ad5a45b6b183a4d0b8dc25\",\n    \"version\": \"12.1.1\"\n};\n","/**\n * @packageDocumentation\n * @module @taquito/local-forging\n */\n\nimport { ForgeParams, Forger } from './interface';\nimport { CODEC } from './constants';\nimport { decoders } from './decoder';\nimport { encoders } from './encoder';\nimport { Uint8ArrayConsumer } from './uint8array-consumer';\nimport { decodersProto12 } from './proto12-ithaca/decoder';\nimport { encodersProto12 } from './proto12-ithaca/encoder';\nimport { validateBlock, ValidationResult, InvalidOperationKindError } from '@taquito/utils';\nimport { InvalidBlockHashError, InvalidOperationSchemaError } from './error';\nimport { validateMissingProperty, validateOperationKind } from './validator';\nimport { ProtocolsHash, ProtoInferiorTo } from './protocols';\nimport { encodersProto13 } from './proto13-jakarta/encoder-proto13';\nimport { decodersProto13 } from './proto13-jakarta/decoder-proto13';\n\nexport { CODEC } from './constants';\nexport * from './decoder';\nexport * from './encoder';\nexport * from './uint8array-consumer';\nexport * from './interface';\nexport { VERSION } from './version';\nexport { ProtocolsHash } from './protocols';\n\nconst PROTOCOL_CURRENT = ProtocolsHash.Psithaca2;\n\nexport function getCodec(codec: CODEC, proto: ProtocolsHash) {\n  if (proto === ProtocolsHash.Psithaca2) {\n    return {\n      encoder: encodersProto12[codec],\n      decoder: (hex: string) => {\n        const consumer = Uint8ArrayConsumer.fromHexString(hex);\n        return decodersProto12[codec](consumer) as any;\n      },\n    };\n  } else if (ProtoInferiorTo(proto, ProtocolsHash.Psithaca2)) {\n    return {\n      encoder: encoders[codec],\n      decoder: (hex: string) => {\n        const consumer = Uint8ArrayConsumer.fromHexString(hex);\n        return decoders[codec](consumer) as any;\n      },\n    };\n  } else {\n    return {\n      encoder: encodersProto13[codec],\n      decoder: (hex: string) => {\n        const consumer = Uint8ArrayConsumer.fromHexString(hex);\n        return decodersProto13[codec](consumer) as any;\n      },\n    };\n  }\n}\n\nexport class LocalForger implements Forger {\n  constructor(public readonly protocolHash = PROTOCOL_CURRENT) {}\n\n  private codec = getCodec(CODEC.MANAGER, this.protocolHash);\n\n  forge(params: ForgeParams): Promise<string> {\n    if (validateBlock(params.branch) !== ValidationResult.VALID) {\n      throw new InvalidBlockHashError(`The block hash ${params.branch} is invalid`);\n    }\n\n    for (const content of params.contents) {\n      if (!validateOperationKind(content.kind)) {\n        throw new InvalidOperationKindError(content.kind);\n      }\n\n      const diff = validateMissingProperty(content);\n      if (diff.length === 1) {\n        if (content.kind === 'delegation' && diff[0] === 'delegate') {\n          continue;\n        } else if (content.kind === 'origination' && diff[0] === 'delegate') {\n          continue;\n        } else if (content.kind === 'transaction' && diff[0] === 'parameters') {\n          continue;\n        } else {\n          throw new InvalidOperationSchemaError(\n            `Missing properties: ${diff.join(', ').toString()}`\n          );\n        }\n      } else if (diff.length > 1) {\n        throw new InvalidOperationSchemaError(`Missing properties: ${diff.join(', ').toString()}`);\n      }\n    }\n    const forged = this.codec.encoder(params).toLowerCase()\n    return Promise.resolve(forged);\n  }\n\n  parse(hex: string): Promise<ForgeParams> {\n    return Promise.resolve(this.codec.decoder(hex) as ForgeParams);\n  }\n}\n\nexport const localForger = new LocalForger();\n"]},"metadata":{},"sourceType":"module"}