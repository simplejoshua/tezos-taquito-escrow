{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function bufferCount(bufferSize, startBufferEvery) {\n  if (startBufferEvery === void 0) {\n    startBufferEvery = null;\n  }\n\n  return function bufferCountOperatorFunction(source) {\n    return source.lift(new BufferCountOperator(bufferSize, startBufferEvery));\n  };\n}\n\nvar BufferCountOperator = /*@__PURE__*/function () {\n  function BufferCountOperator(bufferSize, startBufferEvery) {\n    this.bufferSize = bufferSize;\n    this.startBufferEvery = startBufferEvery;\n\n    if (!startBufferEvery || bufferSize === startBufferEvery) {\n      this.subscriberClass = BufferCountSubscriber;\n    } else {\n      this.subscriberClass = BufferSkipCountSubscriber;\n    }\n  }\n\n  BufferCountOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new this.subscriberClass(subscriber, this.bufferSize, this.startBufferEvery));\n  };\n\n  return BufferCountOperator;\n}();\n\nvar BufferCountSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(BufferCountSubscriber, _super);\n\n  function BufferCountSubscriber(destination, bufferSize) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.bufferSize = bufferSize;\n    _this.buffer = [];\n    return _this;\n  }\n\n  BufferCountSubscriber.prototype._next = function (value) {\n    var buffer = this.buffer;\n    buffer.push(value);\n\n    if (buffer.length == this.bufferSize) {\n      this.destination.next(buffer);\n      this.buffer = [];\n    }\n  };\n\n  BufferCountSubscriber.prototype._complete = function () {\n    var buffer = this.buffer;\n\n    if (buffer.length > 0) {\n      this.destination.next(buffer);\n    }\n\n    _super.prototype._complete.call(this);\n  };\n\n  return BufferCountSubscriber;\n}(Subscriber);\n\nvar BufferSkipCountSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(BufferSkipCountSubscriber, _super);\n\n  function BufferSkipCountSubscriber(destination, bufferSize, startBufferEvery) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.bufferSize = bufferSize;\n    _this.startBufferEvery = startBufferEvery;\n    _this.buffers = [];\n    _this.count = 0;\n    return _this;\n  }\n\n  BufferSkipCountSubscriber.prototype._next = function (value) {\n    var _a = this,\n        bufferSize = _a.bufferSize,\n        startBufferEvery = _a.startBufferEvery,\n        buffers = _a.buffers,\n        count = _a.count;\n\n    this.count++;\n\n    if (count % startBufferEvery === 0) {\n      buffers.push([]);\n    }\n\n    for (var i = buffers.length; i--;) {\n      var buffer = buffers[i];\n      buffer.push(value);\n\n      if (buffer.length === bufferSize) {\n        buffers.splice(i, 1);\n        this.destination.next(buffer);\n      }\n    }\n  };\n\n  BufferSkipCountSubscriber.prototype._complete = function () {\n    var _a = this,\n        buffers = _a.buffers,\n        destination = _a.destination;\n\n    while (buffers.length > 0) {\n      var buffer = buffers.shift();\n\n      if (buffer.length > 0) {\n        destination.next(buffer);\n      }\n    }\n\n    _super.prototype._complete.call(this);\n  };\n\n  return BufferSkipCountSubscriber;\n}(Subscriber);","map":{"version":3,"sources":["../../../src/internal/operators/bufferCount.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function bufferCount(bufferSize, startBufferEvery) {\n    if (startBufferEvery === void 0) {\n        startBufferEvery = null;\n    }\n    return function bufferCountOperatorFunction(source) {\n        return source.lift(new BufferCountOperator(bufferSize, startBufferEvery));\n    };\n}\nvar BufferCountOperator = /*@__PURE__*/ (function () {\n    function BufferCountOperator(bufferSize, startBufferEvery) {\n        this.bufferSize = bufferSize;\n        this.startBufferEvery = startBufferEvery;\n        if (!startBufferEvery || bufferSize === startBufferEvery) {\n            this.subscriberClass = BufferCountSubscriber;\n        }\n        else {\n            this.subscriberClass = BufferSkipCountSubscriber;\n        }\n    }\n    BufferCountOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new this.subscriberClass(subscriber, this.bufferSize, this.startBufferEvery));\n    };\n    return BufferCountOperator;\n}());\nvar BufferCountSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(BufferCountSubscriber, _super);\n    function BufferCountSubscriber(destination, bufferSize) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferSize = bufferSize;\n        _this.buffer = [];\n        return _this;\n    }\n    BufferCountSubscriber.prototype._next = function (value) {\n        var buffer = this.buffer;\n        buffer.push(value);\n        if (buffer.length == this.bufferSize) {\n            this.destination.next(buffer);\n            this.buffer = [];\n        }\n    };\n    BufferCountSubscriber.prototype._complete = function () {\n        var buffer = this.buffer;\n        if (buffer.length > 0) {\n            this.destination.next(buffer);\n        }\n        _super.prototype._complete.call(this);\n    };\n    return BufferCountSubscriber;\n}(Subscriber));\nvar BufferSkipCountSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(BufferSkipCountSubscriber, _super);\n    function BufferSkipCountSubscriber(destination, bufferSize, startBufferEvery) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferSize = bufferSize;\n        _this.startBufferEvery = startBufferEvery;\n        _this.buffers = [];\n        _this.count = 0;\n        return _this;\n    }\n    BufferSkipCountSubscriber.prototype._next = function (value) {\n        var _a = this, bufferSize = _a.bufferSize, startBufferEvery = _a.startBufferEvery, buffers = _a.buffers, count = _a.count;\n        this.count++;\n        if (count % startBufferEvery === 0) {\n            buffers.push([]);\n        }\n        for (var i = buffers.length; i--;) {\n            var buffer = buffers[i];\n            buffer.push(value);\n            if (buffer.length === bufferSize) {\n                buffers.splice(i, 1);\n                this.destination.next(buffer);\n            }\n        }\n    };\n    BufferSkipCountSubscriber.prototype._complete = function () {\n        var _a = this, buffers = _a.buffers, destination = _a.destination;\n        while (buffers.length > 0) {\n            var buffer = buffers.shift();\n            if (buffer.length > 0) {\n                destination.next(buffer);\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    return BufferSkipCountSubscriber;\n}(Subscriber));\n//# sourceMappingURL=bufferCount.js.map\n"]},"metadata":{},"sourceType":"module"}