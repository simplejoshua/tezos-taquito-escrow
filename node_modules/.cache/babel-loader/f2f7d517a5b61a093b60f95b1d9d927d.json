{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { generateGUID } from '@airgap/beacon-utils';\nimport { toastTemplates } from './toast-templates';\nimport { getColorMode } from '../../utils/colorMode';\nimport { createIconSVGExternal, createSanitizedElement } from '../../utils/html-elements';\nimport { constructPoweredByBeacon, constructToastContainer } from '../../utils/templates';\nlet document;\n\nif (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\n  document = window.document;\n}\n\nconst EXPAND_AFTER = 5 * 1000;\nlet timeout;\nlet expandTimeout;\nlet globalToastConfig;\n\nconst createActionItem = toastAction => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    text,\n    isBold,\n    actionText,\n    actionLogo,\n    actionCallback\n  } = toastAction;\n  const id = yield generateGUID();\n  const wrapper = document.createElement('div');\n  wrapper.classList.add('beacon-toast__action__item');\n  removeAllChildNodes(wrapper);\n\n  const wrapBold = element => {\n    return createSanitizedElement('strong', [], [], element);\n  };\n\n  if (actionCallback) {\n    if (text.length > 0) {\n      wrapper.appendChild(createSanitizedElement('p', [], [], text));\n    }\n\n    const textEl = createSanitizedElement('span', [], [], [createSanitizedElement('span', [], [], actionText), actionLogo && actionLogo === 'external' ? createIconSVGExternal() : undefined]);\n    wrapper.appendChild(createSanitizedElement('p', [], [], [createSanitizedElement('a', [], [['id', id]], [isBold ? wrapBold([textEl]) : textEl])]));\n  } else if (actionText) {\n    if (text.length > 0) {\n      wrapper.appendChild(createSanitizedElement('p', ['beacon-toast__action__item__subtitle'], [], text));\n    }\n\n    const textEl = createSanitizedElement('span', [], [], actionText);\n    wrapper.appendChild(createSanitizedElement('p', [], [], [isBold ? wrapBold([textEl]) : textEl]));\n  } else {\n    const textEl = createSanitizedElement('p', [], [], text);\n    wrapper.appendChild(isBold ? wrapBold([textEl]) : textEl);\n  }\n\n  if (actionCallback) {\n    wrapper.addEventListener('click', actionCallback);\n  }\n\n  return wrapper;\n});\n\nconst removeAllChildNodes = parent => {\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild);\n  }\n};\n\nconst formatToastText = html => {\n  var _a, _b;\n\n  const walletIcon = (_a = globalToastConfig === null || globalToastConfig === void 0 ? void 0 : globalToastConfig.walletInfo) === null || _a === void 0 ? void 0 : _a.icon;\n  const walletName = (_b = globalToastConfig === null || globalToastConfig === void 0 ? void 0 : globalToastConfig.walletInfo) === null || _b === void 0 ? void 0 : _b.name;\n  let walletEl;\n  const walletNameEl = createSanitizedElement('strong', [], [], walletName !== null && walletName !== void 0 ? walletName : 'Wallet');\n\n  if (walletIcon) {\n    walletEl = createSanitizedElement('span', ['beacon-toast__wallet__container'], [], [createSanitizedElement('img', ['beacon-toast__content__img'], [['src', walletIcon]], ''), walletNameEl]);\n  } else {\n    walletEl = walletNameEl;\n  }\n\n  const splits = html.split(`{{wallet}}`);\n\n  if (splits.length === 1) {\n    return [createSanitizedElement('span', [], [], html)];\n  } else {\n    const out = [];\n\n    for (let x = 0; x < splits.length; x++) {\n      out.push(createSanitizedElement('span', [], [], splits[x]));\n\n      if (x < splits.length - 1) {\n        out.push(walletEl);\n      }\n    }\n\n    return out;\n  }\n};\n\nconst getToastHTML = config => {\n  const text = config.body;\n  const elements = formatToastText(text);\n  const outerEl = createSanitizedElement('span', ['beacon-toast__wallet__outer'], [], elements);\n  const toastContainerEl = constructToastContainer([outerEl]);\n  return {\n    style: toastTemplates.default.css,\n    html: toastContainerEl\n  };\n};\n/**\n * Close a toast\n */\n\n\nconst closeToast = () => new Promise(resolve => {\n  var _a;\n\n  globalToastConfig = undefined;\n  const wrapper = document.getElementById('beacon-toast-wrapper');\n\n  if (!wrapper) {\n    return resolve();\n  }\n\n  const elm = (_a = wrapper.shadowRoot) === null || _a === void 0 ? void 0 : _a.getElementById('beacon-toast');\n\n  if (elm) {\n    const animationDuration = 300;\n\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    elm.className = elm.className.replace('fadeIn', 'fadeOut');\n    window.setTimeout(() => {\n      const parent = wrapper.parentNode;\n\n      if (parent) {\n        parent.removeChild(wrapper);\n      }\n\n      resolve();\n    }, animationDuration);\n  } else {\n    resolve();\n  }\n});\n\nconst registerClick = (shadowRoot, id, callback) => {\n  const button = shadowRoot.getElementById(id);\n\n  if (button) {\n    button.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\n      yield callback(button);\n    }));\n  }\n\n  return button;\n};\n\nconst showElement = (shadowRoot, id) => {\n  const el = shadowRoot.getElementById(id);\n\n  if (el) {\n    el.classList.remove('hide');\n    el.classList.add('show');\n  }\n};\n\nconst hideElement = (shadowRoot, id) => {\n  const el = shadowRoot.getElementById(id);\n\n  if (el) {\n    el.classList.add('hide');\n    el.classList.remove('show');\n  }\n}; // const showLoader = (): void => {\n//   showElement('beacon-toast-loader')\n// }\n\n\nconst hideLoader = shadowRoot => {\n  hideElement(shadowRoot, 'beacon-toast-loader');\n  showElement(shadowRoot, 'beacon-toast-loader-placeholder');\n};\n\nconst showExpand = shadowRoot => {\n  showElement(shadowRoot, 'beacon-toast-button-expand');\n  hideElement(shadowRoot, 'beacon-toast-button-close');\n};\n\nconst showClose = shadowRoot => {\n  showElement(shadowRoot, 'beacon-toast-button-close');\n  hideElement(shadowRoot, 'beacon-toast-button-expand');\n};\n\nconst collapseList = shadowRoot => {\n  const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n  const list = shadowRoot.getElementById('beacon-toast-list');\n\n  if (expandButton && list) {\n    expandButton.classList.remove('beacon-toast__upside_down');\n    list.classList.add('hide');\n    list.classList.remove('show');\n  }\n};\n\nconst expandList = shadowRoot => {\n  const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n  const list = shadowRoot.getElementById('beacon-toast-list');\n\n  if (expandButton && list) {\n    expandButton.classList.add('beacon-toast__upside_down');\n    list.classList.remove('hide');\n    list.classList.add('show');\n  }\n};\n\nconst expandOrCollapseList = shadowRoot => {\n  const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n  const list = shadowRoot.getElementById('beacon-toast-list');\n\n  if (expandButton && list) {\n    if (expandButton.classList.contains('beacon-toast__upside_down')) {\n      collapseList(shadowRoot);\n    } else {\n      expandList(shadowRoot);\n    }\n  }\n};\n\nconst addActionsToToast = (shadowRoot, toastConfig, list) => __awaiter(void 0, void 0, void 0, function* () {\n  const actions = toastConfig.actions;\n\n  if (actions && actions.length > 0) {\n    const actionPromises = actions.map(action => __awaiter(void 0, void 0, void 0, function* () {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      return createActionItem(action);\n    }));\n    const actionItems = yield Promise.all(actionPromises);\n    actionItems.forEach(item => list.appendChild(item));\n    const poweredByBeacon = document.createElement('small');\n    poweredByBeacon.classList.add('beacon-toast__powered');\n    poweredByBeacon.appendChild(constructPoweredByBeacon());\n    list.appendChild(poweredByBeacon);\n    showExpand(shadowRoot);\n  } else {\n    showClose(shadowRoot);\n    collapseList(shadowRoot);\n  }\n});\n\nconst createNewToast = toastConfig => __awaiter(void 0, void 0, void 0, function* () {\n  globalToastConfig = toastConfig;\n  const timer = toastConfig.timer;\n  const shadowRootEl = document.createElement('div');\n  shadowRootEl.setAttribute('id', 'beacon-toast-wrapper');\n  const shadowRoot = shadowRootEl.attachShadow({\n    mode: 'open'\n  });\n  const wrapper = document.createElement('div');\n  const {\n    style,\n    html\n  } = getToastHTML(toastConfig);\n  wrapper.appendChild(html);\n  const styleEl = document.createElement('style');\n  styleEl.textContent = style;\n  shadowRoot.appendChild(wrapper);\n  shadowRoot.appendChild(styleEl);\n\n  if (timer) {\n    timeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n      yield closeToast();\n    }), timer);\n  }\n\n  document.body.prepend(shadowRootEl);\n  const colorMode = getColorMode();\n  const elm = shadowRoot.getElementById(`beacon-toast`);\n\n  if (elm) {\n    elm.classList.add(`theme__${colorMode}`);\n  }\n\n  const list = shadowRoot.getElementById('beacon-toast-list');\n\n  if (list) {\n    yield addActionsToToast(shadowRoot, toastConfig, list);\n  }\n\n  const openWalletButtonEl = shadowRoot.getElementById('beacon-open-wallet');\n\n  if (openWalletButtonEl) {\n    if (toastConfig.openWalletAction) {\n      openWalletButtonEl.addEventListener('click', () => {\n        if (toastConfig.openWalletAction) {\n          toastConfig.openWalletAction();\n        }\n      });\n    } else {\n      openWalletButtonEl.classList.add('hide');\n    }\n  }\n\n  if (globalToastConfig.state === 'loading') {\n    expandTimeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n      const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n\n      if (expandButton && !expandButton.classList.contains('beacon-toast__upside_down')) {\n        expandOrCollapseList(shadowRoot);\n      }\n    }), EXPAND_AFTER);\n  }\n\n  registerClick(shadowRoot, 'beacon-toast-button-done', () => __awaiter(void 0, void 0, void 0, function* () {\n    yield closeToast();\n  }));\n  const closeButton = registerClick(shadowRoot, 'beacon-toast-button-close', () => __awaiter(void 0, void 0, void 0, function* () {\n    yield closeToast();\n  }));\n\n  if (closeButton && globalToastConfig.state === 'loading') {\n    closeButton.classList.add('hide');\n  }\n\n  registerClick(shadowRoot, 'beacon-toast-button-expand', () => __awaiter(void 0, void 0, void 0, function* () {\n    expandOrCollapseList(shadowRoot);\n  }));\n});\n\nconst updateToast = toastConfig => __awaiter(void 0, void 0, void 0, function* () {\n  globalToastConfig = Object.assign(Object.assign({}, globalToastConfig), toastConfig);\n  const timer = toastConfig.timer;\n  const wrapper = document.getElementById('beacon-toast-wrapper');\n\n  if (!wrapper) {\n    return;\n  }\n\n  const shadowRoot = wrapper.shadowRoot;\n\n  if (!shadowRoot) {\n    return;\n  }\n\n  const list = shadowRoot.getElementById('beacon-toast-list');\n\n  if (list) {\n    removeAllChildNodes(list);\n    yield addActionsToToast(shadowRoot, toastConfig, list);\n  }\n\n  if (globalToastConfig.state === 'loading') {\n    expandTimeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n      const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n\n      if (expandButton && !expandButton.classList.contains('beacon-toast__upside_down')) {\n        expandOrCollapseList(shadowRoot);\n      }\n    }), EXPAND_AFTER);\n  }\n\n  const toastTextEl = shadowRoot.getElementById('beacon-text-content');\n\n  if (toastTextEl) {\n    removeAllChildNodes(toastTextEl);\n    toastTextEl.appendChild(createSanitizedElement('span', ['beacon-toast__wallet__outer'], [], formatToastText(toastConfig.body)));\n  }\n\n  const openWalletButtonEl = shadowRoot.getElementById('beacon-open-wallet');\n\n  if (openWalletButtonEl) {\n    if (toastConfig.openWalletAction) {\n      openWalletButtonEl.classList.remove('hide');\n      openWalletButtonEl.addEventListener('click', () => {\n        if (toastConfig.openWalletAction) {\n          toastConfig.openWalletAction();\n        }\n      });\n    } else {\n      openWalletButtonEl.classList.add('hide');\n    }\n  }\n\n  if (timer) {\n    timeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n      yield closeToast();\n    }), timer);\n  }\n\n  const doneButton = shadowRoot.getElementById('beacon-toast-button-done');\n\n  if (doneButton) {\n    doneButton.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\n      yield closeToast();\n    }));\n  }\n});\n/**\n * Create a new toast\n *\n * @param toastConfig Configuration of the toast\n */\n\n\nconst openToast = toastConfig => __awaiter(void 0, void 0, void 0, function* () {\n  var _a;\n\n  if (expandTimeout) {\n    clearTimeout(expandTimeout);\n  }\n\n  const wrapper = document.getElementById('beacon-toast-wrapper');\n\n  if (wrapper) {\n    if (toastConfig.forceNew) {\n      yield closeToast();\n      yield createNewToast(toastConfig);\n    } else {\n      yield updateToast(toastConfig);\n    }\n  } else {\n    yield createNewToast(toastConfig);\n  }\n\n  if (globalToastConfig && globalToastConfig.state === 'finished') {\n    const shadowRoot = (_a = document.getElementById('beacon-toast-wrapper')) === null || _a === void 0 ? void 0 : _a.shadowRoot;\n\n    if (shadowRoot) {\n      hideLoader(shadowRoot);\n      showClose(shadowRoot);\n      expandList(shadowRoot);\n    }\n  }\n\n  return;\n});\n\nexport { closeToast, openToast };","map":{"version":3,"sources":["../../../../src/ui/toast/Toast.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,YAAT,QAA6B,sBAA7B;AAEA,SAAS,cAAT,QAA+B,mBAA/B;AACA,SAAS,YAAT,QAA6B,uBAA7B;AACA,SAAS,qBAAT,EAAgC,sBAAhC,QAA8D,2BAA9D;AACA,SAAS,wBAAT,EAAmC,uBAAnC,QAAkE,uBAAlE;AAoBA,IAAI,QAAJ;;AACA,IAAI,OAAO,MAAP,KAAkB,WAAlB,IAAiC,OAAO,MAAM,CAAC,QAAd,KAA2B,WAAhE,EAA6E;EAC3E,QAAQ,GAAG,MAAM,CAAC,QAAlB;AACD;;AAED,MAAM,YAAY,GAAW,IAAI,IAAjC;AAEA,IAAI,OAAJ;AACA,IAAI,aAAJ;AACA,IAAI,iBAAJ;;AAEA,MAAM,gBAAgB,GAAU,WAAP,IAAyD,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;EAChF,MAAM;IAAE,IAAF;IAAQ,MAAR;IAAgB,UAAhB;IAA4B,UAA5B;IAAwC;EAAxC,IAA2D,WAAjE;EAEA,MAAM,EAAE,GAAG,MAAM,YAAY,EAA7B;EACA,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAhB;EACA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,4BAAtB;EAEA,mBAAmB,CAAC,OAAD,CAAnB;;EAEA,MAAM,QAAQ,GAAI,OAAD,IAAoC;IACnD,OAAO,sBAAsB,CAAC,QAAD,EAAW,EAAX,EAAe,EAAf,EAAmB,OAAnB,CAA7B;EACD,CAFD;;EAIA,IAAI,cAAJ,EAAoB;IAClB,IAAI,IAAI,CAAC,MAAL,GAAc,CAAlB,EAAqB;MACnB,OAAO,CAAC,WAAR,CAAoB,sBAAsB,CAAC,GAAD,EAAM,EAAN,EAAU,EAAV,EAAc,IAAd,CAA1C;IACD;;IACD,MAAM,MAAM,GAAG,sBAAsB,CACnC,MADmC,EAEnC,EAFmC,EAGnC,EAHmC,EAInC,CACE,sBAAsB,CAAC,MAAD,EAAS,EAAT,EAAa,EAAb,EAAiB,UAAjB,CADxB,EAEE,UAAU,IAAI,UAAU,KAAK,UAA7B,GAA0C,qBAAqB,EAA/D,GAAoE,SAFtE,CAJmC,CAArC;IASA,OAAO,CAAC,WAAR,CACE,sBAAsB,CACpB,GADoB,EAEpB,EAFoB,EAGpB,EAHoB,EAIpB,CAAC,sBAAsB,CAAC,GAAD,EAAM,EAAN,EAAU,CAAC,CAAC,IAAD,EAAO,EAAP,CAAD,CAAV,EAAwB,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC,MAAD,CAAD,CAAX,GAAwB,MAA/B,CAAxB,CAAvB,CAJoB,CADxB;EAQD,CArBD,MAqBO,IAAI,UAAJ,EAAgB;IACrB,IAAI,IAAI,CAAC,MAAL,GAAc,CAAlB,EAAqB;MACnB,OAAO,CAAC,WAAR,CACE,sBAAsB,CAAC,GAAD,EAAM,CAAC,sCAAD,CAAN,EAAgD,EAAhD,EAAoD,IAApD,CADxB;IAGD;;IACD,MAAM,MAAM,GAAG,sBAAsB,CAAC,MAAD,EAAS,EAAT,EAAa,EAAb,EAAiB,UAAjB,CAArC;IACA,OAAO,CAAC,WAAR,CAAoB,sBAAsB,CAAC,GAAD,EAAM,EAAN,EAAU,EAAV,EAAc,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC,MAAD,CAAD,CAAX,GAAwB,MAA/B,CAAd,CAA1C;EACD,CARM,MAQA;IACL,MAAM,MAAM,GAAG,sBAAsB,CAAC,GAAD,EAAM,EAAN,EAAU,EAAV,EAAc,IAAd,CAArC;IACA,OAAO,CAAC,WAAR,CAAoB,MAAM,GAAG,QAAQ,CAAC,CAAC,MAAD,CAAD,CAAX,GAAwB,MAAlD;EACD;;EAED,IAAI,cAAJ,EAAoB;IAClB,OAAO,CAAC,gBAAR,CAAyB,OAAzB,EAAkC,cAAlC;EACD;;EAED,OAAO,OAAP;AACD,CApDiF,CAAlF;;AAsDA,MAAM,mBAAmB,GAAI,MAAD,IAA8B;EACxD,OAAO,MAAM,CAAC,UAAd,EAA0B;IACxB,MAAM,CAAC,WAAP,CAAmB,MAAM,CAAC,UAA1B;EACD;AACF,CAJD;;AAMA,MAAM,eAAe,GAAI,IAAD,IAAgC;;;EACtD,MAAM,UAAU,GAAG,CAAA,EAAA,GAAA,iBAAiB,KAAA,IAAjB,IAAA,iBAAiB,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAA,iBAAiB,CAAE,UAAnB,MAA6B,IAA7B,IAA6B,EAAA,KAAA,KAAA,CAA7B,GAA6B,KAAA,CAA7B,GAA6B,EAAA,CAAE,IAAlD;EACA,MAAM,UAAU,GAAG,CAAA,EAAA,GAAA,iBAAiB,KAAA,IAAjB,IAAA,iBAAiB,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAA,iBAAiB,CAAE,UAAnB,MAA6B,IAA7B,IAA6B,EAAA,KAAA,KAAA,CAA7B,GAA6B,KAAA,CAA7B,GAA6B,EAAA,CAAE,IAAlD;EAEA,IAAI,QAAJ;EAEA,MAAM,YAAY,GAAG,sBAAsB,CAAC,QAAD,EAAW,EAAX,EAAe,EAAf,EAAmB,UAAU,KAAA,IAAV,IAAA,UAAU,KAAA,KAAA,CAAV,GAAA,UAAA,GAAc,QAAjC,CAA3C;;EAEA,IAAI,UAAJ,EAAgB;IACd,QAAQ,GAAG,sBAAsB,CAC/B,MAD+B,EAE/B,CAAC,iCAAD,CAF+B,EAG/B,EAH+B,EAI/B,CACE,sBAAsB,CAAC,KAAD,EAAQ,CAAC,4BAAD,CAAR,EAAwC,CAAC,CAAC,KAAD,EAAQ,UAAR,CAAD,CAAxC,EAA+D,EAA/D,CADxB,EAEE,YAFF,CAJ+B,CAAjC;EASD,CAVD,MAUO;IACL,QAAQ,GAAG,YAAX;EACD;;EAED,MAAM,MAAM,GAAG,IAAI,CAAC,KAAL,CAAW,YAAX,CAAf;;EAEA,IAAI,MAAM,CAAC,MAAP,KAAkB,CAAtB,EAAyB;IACvB,OAAO,CAAC,sBAAsB,CAAC,MAAD,EAAS,EAAT,EAAa,EAAb,EAAiB,IAAjB,CAAvB,CAAP;EACD,CAFD,MAEO;IACL,MAAM,GAAG,GAAkB,EAA3B;;IACA,KAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,MAAM,CAAC,MAA3B,EAAmC,CAAC,EAApC,EAAwC;MACtC,GAAG,CAAC,IAAJ,CAAS,sBAAsB,CAAC,MAAD,EAAS,EAAT,EAAa,EAAb,EAAiB,MAAM,CAAC,CAAD,CAAvB,CAA/B;;MACA,IAAI,CAAC,GAAG,MAAM,CAAC,MAAP,GAAgB,CAAxB,EAA2B;QACzB,GAAG,CAAC,IAAJ,CAAS,QAAT;MACD;IACF;;IAED,OAAO,GAAP;EACD;AACF,CArCD;;AAuCA,MAAM,YAAY,GAChB,MADmB,IAKjB;EACF,MAAM,IAAI,GAAG,MAAM,CAAC,IAApB;EAEA,MAAM,QAAQ,GAAG,eAAe,CAAC,IAAD,CAAhC;EAEA,MAAM,OAAO,GAAG,sBAAsB,CAAC,MAAD,EAAS,CAAC,6BAAD,CAAT,EAA0C,EAA1C,EAA8C,QAA9C,CAAtC;EAEA,MAAM,gBAAgB,GAAG,uBAAuB,CAAC,CAAC,OAAD,CAAD,CAAhD;EAEA,OAAO;IACL,KAAK,EAAE,cAAc,CAAC,OAAf,CAAuB,GADzB;IAEL,IAAI,EAAE;EAFD,CAAP;AAID,CAlBD;AAoBA;;AAEG;;;AACH,MAAM,UAAU,GAAG,MACjB,IAAI,OAAJ,CAAa,OAAD,IAAY;;;EACtB,iBAAiB,GAAG,SAApB;EAEA,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAT,CAAwB,sBAAxB,CAAhB;;EACA,IAAI,CAAC,OAAL,EAAc;IACZ,OAAO,OAAO,EAAd;EACD;;EAED,MAAM,GAAG,GAAG,CAAA,EAAA,GAAA,OAAO,CAAC,UAAR,MAAkB,IAAlB,IAAkB,EAAA,KAAA,KAAA,CAAlB,GAAkB,KAAA,CAAlB,GAAkB,EAAA,CAAE,cAAF,CAAiB,cAAjB,CAA9B;;EACA,IAAI,GAAJ,EAAS;IACP,MAAM,iBAAiB,GAAG,GAA1B;;IAEA,IAAI,OAAJ,EAAa;MACX,YAAY,CAAC,OAAD,CAAZ;MACA,OAAO,GAAG,SAAV;IACD;;IAED,GAAG,CAAC,SAAJ,GAAgB,GAAG,CAAC,SAAJ,CAAc,OAAd,CAAsB,QAAtB,EAAgC,SAAhC,CAAhB;IACA,MAAM,CAAC,UAAP,CAAkB,MAAK;MACrB,MAAM,MAAM,GAAG,OAAO,CAAC,UAAvB;;MACA,IAAI,MAAJ,EAAY;QACV,MAAM,CAAC,WAAP,CAAmB,OAAnB;MACD;;MACD,OAAO;IACR,CAND,EAMG,iBANH;EAOD,CAhBD,MAgBO;IACL,OAAO;EACR;AACF,CA5BD,CADF;;AA+BA,MAAM,aAAa,GAAG,CACpB,UADoB,EAEpB,EAFoB,EAGpB,QAHoB,KAIE;EACtB,MAAM,MAAM,GAAG,UAAU,CAAC,cAAX,CAA0B,EAA1B,CAAf;;EAEA,IAAI,MAAJ,EAAY;IACV,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAiC,MAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;MAC1C,MAAM,QAAQ,CAAC,MAAD,CAAd;IACD,CAF2C,CAA5C;EAGD;;EAED,OAAO,MAAP;AACD,CAdD;;AAgBA,MAAM,WAAW,GAAG,CAAC,UAAD,EAAyB,EAAzB,KAA6C;EAC/D,MAAM,EAAE,GAAG,UAAU,CAAC,cAAX,CAA0B,EAA1B,CAAX;;EAEA,IAAI,EAAJ,EAAQ;IACN,EAAE,CAAC,SAAH,CAAa,MAAb,CAAoB,MAApB;IACA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,MAAjB;EACD;AACF,CAPD;;AASA,MAAM,WAAW,GAAG,CAAC,UAAD,EAAyB,EAAzB,KAA6C;EAC/D,MAAM,EAAE,GAAG,UAAU,CAAC,cAAX,CAA0B,EAA1B,CAAX;;EAEA,IAAI,EAAJ,EAAQ;IACN,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,MAAjB;IACA,EAAE,CAAC,SAAH,CAAa,MAAb,CAAoB,MAApB;EACD;AACF,CAPD,C,CASA;AACA;AACA;;;AAEA,MAAM,UAAU,GAAI,UAAD,IAAiC;EAClD,WAAW,CAAC,UAAD,EAAa,qBAAb,CAAX;EACA,WAAW,CAAC,UAAD,EAAa,iCAAb,CAAX;AACD,CAHD;;AAKA,MAAM,UAAU,GAAI,UAAD,IAAiC;EAClD,WAAW,CAAC,UAAD,EAAa,4BAAb,CAAX;EACA,WAAW,CAAC,UAAD,EAAa,2BAAb,CAAX;AACD,CAHD;;AAKA,MAAM,SAAS,GAAI,UAAD,IAAiC;EACjD,WAAW,CAAC,UAAD,EAAa,2BAAb,CAAX;EACA,WAAW,CAAC,UAAD,EAAa,4BAAb,CAAX;AACD,CAHD;;AAKA,MAAM,YAAY,GAAI,UAAD,IAAiC;EACpD,MAAM,YAAY,GAAG,UAAU,CAAC,cAAX,CAA0B,4BAA1B,CAArB;EACA,MAAM,IAAI,GAAG,UAAU,CAAC,cAAX,CAA0B,mBAA1B,CAAb;;EAEA,IAAI,YAAY,IAAI,IAApB,EAA0B;IACxB,YAAY,CAAC,SAAb,CAAuB,MAAvB,CAA8B,2BAA9B;IACA,IAAI,CAAC,SAAL,CAAe,GAAf,CAAmB,MAAnB;IACA,IAAI,CAAC,SAAL,CAAe,MAAf,CAAsB,MAAtB;EACD;AACF,CATD;;AAWA,MAAM,UAAU,GAAI,UAAD,IAAiC;EAClD,MAAM,YAAY,GAAG,UAAU,CAAC,cAAX,CAA0B,4BAA1B,CAArB;EACA,MAAM,IAAI,GAAG,UAAU,CAAC,cAAX,CAA0B,mBAA1B,CAAb;;EAEA,IAAI,YAAY,IAAI,IAApB,EAA0B;IACxB,YAAY,CAAC,SAAb,CAAuB,GAAvB,CAA2B,2BAA3B;IACA,IAAI,CAAC,SAAL,CAAe,MAAf,CAAsB,MAAtB;IACA,IAAI,CAAC,SAAL,CAAe,GAAf,CAAmB,MAAnB;EACD;AACF,CATD;;AAWA,MAAM,oBAAoB,GAAI,UAAD,IAAiC;EAC5D,MAAM,YAAY,GAAG,UAAU,CAAC,cAAX,CAA0B,4BAA1B,CAArB;EACA,MAAM,IAAI,GAAG,UAAU,CAAC,cAAX,CAA0B,mBAA1B,CAAb;;EACA,IAAI,YAAY,IAAI,IAApB,EAA0B;IACxB,IAAI,YAAY,CAAC,SAAb,CAAuB,QAAvB,CAAgC,2BAAhC,CAAJ,EAAkE;MAChE,YAAY,CAAC,UAAD,CAAZ;IACD,CAFD,MAEO;MACL,UAAU,CAAC,UAAD,CAAV;IACD;EACF;AACF,CAVD;;AAYA,MAAM,iBAAiB,GAAG,CACxB,UADwB,EAExB,WAFwB,EAGxB,IAHwB,KAIP,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;EACjB,MAAM,OAAO,GAAG,WAAW,CAAC,OAA5B;;EACA,IAAI,OAAO,IAAI,OAAO,CAAC,MAAR,GAAiB,CAAhC,EAAmC;IACjC,MAAM,cAAc,GAAG,OAAO,CAAC,GAAR,CAAmB,MAAP,IAAiB,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;MAClD;MACA,OAAO,gBAAgB,CAAC,MAAD,CAAvB;IACD,CAHmD,CAA7B,CAAvB;IAKA,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC,GAAR,CAAY,cAAZ,CAA1B;IAEA,WAAW,CAAC,OAAZ,CAAqB,IAAD,IAAU,IAAI,CAAC,WAAL,CAAiB,IAAjB,CAA9B;IAEA,MAAM,eAAe,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAxB;IACA,eAAe,CAAC,SAAhB,CAA0B,GAA1B,CAA8B,uBAA9B;IACA,eAAe,CAAC,WAAhB,CAA4B,wBAAwB,EAApD;IAEA,IAAI,CAAC,WAAL,CAAiB,eAAjB;IACA,UAAU,CAAC,UAAD,CAAV;EACD,CAhBD,MAgBO;IACL,SAAS,CAAC,UAAD,CAAT;IACA,YAAY,CAAC,UAAD,CAAZ;EACD;AACF,CAtBkB,CAJnB;;AA4BA,MAAM,cAAc,GAAU,WAAP,IAAkD,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;EACvE,iBAAiB,GAAG,WAApB;EACA,MAAM,KAAK,GAAG,WAAW,CAAC,KAA1B;EAEA,MAAM,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAArB;EACA,YAAY,CAAC,YAAb,CAA0B,IAA1B,EAAgC,sBAAhC;EACA,MAAM,UAAU,GAAG,YAAY,CAAC,YAAb,CAA0B;IAAE,IAAI,EAAE;EAAR,CAA1B,CAAnB;EAEA,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAhB;EACA,MAAM;IAAE,KAAF;IAAS;EAAT,IAAkB,YAAY,CAAC,WAAD,CAApC;EACA,OAAO,CAAC,WAAR,CAAoB,IAApB;EAEA,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAhB;EAEA,OAAO,CAAC,WAAR,GAAsB,KAAtB;EAEA,UAAU,CAAC,WAAX,CAAuB,OAAvB;EACA,UAAU,CAAC,WAAX,CAAuB,OAAvB;;EAEA,IAAI,KAAJ,EAAW;IACT,OAAO,GAAG,MAAM,CAAC,UAAP,CAAkB,MAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;MACrC,MAAM,UAAU,EAAhB;IACD,CAFsC,CAA7B,EAEP,KAFO,CAAV;EAGD;;EAED,QAAQ,CAAC,IAAT,CAAc,OAAd,CAAsB,YAAtB;EAEA,MAAM,SAAS,GAAG,YAAY,EAA9B;EACA,MAAM,GAAG,GAAG,UAAU,CAAC,cAAX,CAA0B,cAA1B,CAAZ;;EACA,IAAI,GAAJ,EAAS;IACP,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,UAAU,SAAS,EAArC;EACD;;EAED,MAAM,IAAI,GAAG,UAAU,CAAC,cAAX,CAA0B,mBAA1B,CAAb;;EAEA,IAAI,IAAJ,EAAU;IACR,MAAM,iBAAiB,CAAC,UAAD,EAAa,WAAb,EAA0B,IAA1B,CAAvB;EACD;;EAED,MAAM,kBAAkB,GAAG,UAAU,CAAC,cAAX,CAA0B,oBAA1B,CAA3B;;EACA,IAAI,kBAAJ,EAAwB;IACtB,IAAI,WAAW,CAAC,gBAAhB,EAAkC;MAChC,kBAAkB,CAAC,gBAAnB,CAAoC,OAApC,EAA6C,MAAK;QAChD,IAAI,WAAW,CAAC,gBAAhB,EAAkC;UAChC,WAAW,CAAC,gBAAZ;QACD;MACF,CAJD;IAKD,CAND,MAMO;MACL,kBAAkB,CAAC,SAAnB,CAA6B,GAA7B,CAAiC,MAAjC;IACD;EACF;;EAED,IAAI,iBAAiB,CAAC,KAAlB,KAA4B,SAAhC,EAA2C;IACzC,aAAa,GAAG,MAAM,CAAC,UAAP,CAAkB,MAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;MAC3C,MAAM,YAAY,GAAG,UAAU,CAAC,cAAX,CAA0B,4BAA1B,CAArB;;MACA,IAAI,YAAY,IAAI,CAAC,YAAY,CAAC,SAAb,CAAuB,QAAvB,CAAgC,2BAAhC,CAArB,EAAmF;QACjF,oBAAoB,CAAC,UAAD,CAApB;MACD;IACF,CAL4C,CAA7B,EAKb,YALa,CAAhB;EAMD;;EAED,aAAa,CAAC,UAAD,EAAa,0BAAb,EAAyC,MAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IAC/D,MAAM,UAAU,EAAhB;EACD,CAFgE,CAApD,CAAb;EAGA,MAAM,WAAW,GAAG,aAAa,CAAC,UAAD,EAAa,2BAAb,EAA0C,MAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IACpF,MAAM,UAAU,EAAhB;EACD,CAFqF,CAArD,CAAjC;;EAGA,IAAI,WAAW,IAAI,iBAAiB,CAAC,KAAlB,KAA4B,SAA/C,EAA0D;IACxD,WAAW,CAAC,SAAZ,CAAsB,GAAtB,CAA0B,MAA1B;EACD;;EACD,aAAa,CAAC,UAAD,EAAa,4BAAb,EAA2C,MAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;IACjE,oBAAoB,CAAC,UAAD,CAApB;EACD,CAFkE,CAAtD,CAAb;AAGD,CAzEwE,CAAzE;;AA2EA,MAAM,WAAW,GAAU,WAAP,IAAkD,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;EACpE,iBAAiB,GAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAQ,iBAAR,CAAA,EAA8B,WAA9B,CAAjB;EAEA,MAAM,KAAK,GAAG,WAAW,CAAC,KAA1B;EAEA,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAT,CAAwB,sBAAxB,CAAhB;;EACA,IAAI,CAAC,OAAL,EAAc;IACZ;EACD;;EACD,MAAM,UAAU,GAAG,OAAO,CAAC,UAA3B;;EACA,IAAI,CAAC,UAAL,EAAiB;IACf;EACD;;EAED,MAAM,IAAI,GAAG,UAAU,CAAC,cAAX,CAA0B,mBAA1B,CAAb;;EAEA,IAAI,IAAJ,EAAU;IACR,mBAAmB,CAAC,IAAD,CAAnB;IAEA,MAAM,iBAAiB,CAAC,UAAD,EAAa,WAAb,EAA0B,IAA1B,CAAvB;EACD;;EAED,IAAI,iBAAiB,CAAC,KAAlB,KAA4B,SAAhC,EAA2C;IACzC,aAAa,GAAG,MAAM,CAAC,UAAP,CAAkB,MAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;MAC3C,MAAM,YAAY,GAAG,UAAU,CAAC,cAAX,CAA0B,4BAA1B,CAArB;;MACA,IAAI,YAAY,IAAI,CAAC,YAAY,CAAC,SAAb,CAAuB,QAAvB,CAAgC,2BAAhC,CAArB,EAAmF;QACjF,oBAAoB,CAAC,UAAD,CAApB;MACD;IACF,CAL4C,CAA7B,EAKb,YALa,CAAhB;EAMD;;EAED,MAAM,WAAW,GAAG,UAAU,CAAC,cAAX,CAA0B,qBAA1B,CAApB;;EACA,IAAI,WAAJ,EAAiB;IACf,mBAAmB,CAAC,WAAD,CAAnB;IACA,WAAW,CAAC,WAAZ,CACE,sBAAsB,CACpB,MADoB,EAEpB,CAAC,6BAAD,CAFoB,EAGpB,EAHoB,EAIpB,eAAe,CAAC,WAAW,CAAC,IAAb,CAJK,CADxB;EAQD;;EAED,MAAM,kBAAkB,GAAG,UAAU,CAAC,cAAX,CAA0B,oBAA1B,CAA3B;;EACA,IAAI,kBAAJ,EAAwB;IACtB,IAAI,WAAW,CAAC,gBAAhB,EAAkC;MAChC,kBAAkB,CAAC,SAAnB,CAA6B,MAA7B,CAAoC,MAApC;MACA,kBAAkB,CAAC,gBAAnB,CAAoC,OAApC,EAA6C,MAAK;QAChD,IAAI,WAAW,CAAC,gBAAhB,EAAkC;UAChC,WAAW,CAAC,gBAAZ;QACD;MACF,CAJD;IAKD,CAPD,MAOO;MACL,kBAAkB,CAAC,SAAnB,CAA6B,GAA7B,CAAiC,MAAjC;IACD;EACF;;EAED,IAAI,KAAJ,EAAW;IACT,OAAO,GAAG,MAAM,CAAC,UAAP,CAAkB,MAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;MACrC,MAAM,UAAU,EAAhB;IACD,CAFsC,CAA7B,EAEP,KAFO,CAAV;EAGD;;EAED,MAAM,UAAU,GAAG,UAAU,CAAC,cAAX,CAA0B,0BAA1B,CAAnB;;EAEA,IAAI,UAAJ,EAAgB;IACd,UAAU,CAAC,gBAAX,CAA4B,OAA5B,EAAqC,MAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;MAC9C,MAAM,UAAU,EAAhB;IACD,CAF+C,CAAhD;EAGD;AACF,CAvEqE,CAAtE;AAyEA;;;;AAIG;;;AACH,MAAM,SAAS,GAAU,WAAP,IAAkD,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;;;EAClE,IAAI,aAAJ,EAAmB;IACjB,YAAY,CAAC,aAAD,CAAZ;EACD;;EAED,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAT,CAAwB,sBAAxB,CAAhB;;EACA,IAAI,OAAJ,EAAa;IACX,IAAI,WAAW,CAAC,QAAhB,EAA0B;MACxB,MAAM,UAAU,EAAhB;MACA,MAAM,cAAc,CAAC,WAAD,CAApB;IACD,CAHD,MAGO;MACL,MAAM,WAAW,CAAC,WAAD,CAAjB;IACD;EACF,CAPD,MAOO;IACL,MAAM,cAAc,CAAC,WAAD,CAApB;EACD;;EAED,IAAI,iBAAiB,IAAI,iBAAiB,CAAC,KAAlB,KAA4B,UAArD,EAAiE;IAC/D,MAAM,UAAU,GAAG,CAAA,EAAA,GAAA,QAAQ,CAAC,cAAT,CAAwB,sBAAxB,CAAA,MAA+C,IAA/C,IAA+C,EAAA,KAAA,KAAA,CAA/C,GAA+C,KAAA,CAA/C,GAA+C,EAAA,CAAE,UAApE;;IAEA,IAAI,UAAJ,EAAgB;MACd,UAAU,CAAC,UAAD,CAAV;MACA,SAAS,CAAC,UAAD,CAAT;MACA,UAAU,CAAC,UAAD,CAAV;IACD;EACF;;EAED;AACD,CA5BmE,CAApE;;AA8BA,SAAS,UAAT,EAAqB,SAArB","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { generateGUID } from '@airgap/beacon-utils';\nimport { toastTemplates } from './toast-templates';\nimport { getColorMode } from '../../utils/colorMode';\nimport { createIconSVGExternal, createSanitizedElement } from '../../utils/html-elements';\nimport { constructPoweredByBeacon, constructToastContainer } from '../../utils/templates';\nlet document;\nif (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\n    document = window.document;\n}\nconst EXPAND_AFTER = 5 * 1000;\nlet timeout;\nlet expandTimeout;\nlet globalToastConfig;\nconst createActionItem = (toastAction) => __awaiter(void 0, void 0, void 0, function* () {\n    const { text, isBold, actionText, actionLogo, actionCallback } = toastAction;\n    const id = yield generateGUID();\n    const wrapper = document.createElement('div');\n    wrapper.classList.add('beacon-toast__action__item');\n    removeAllChildNodes(wrapper);\n    const wrapBold = (element) => {\n        return createSanitizedElement('strong', [], [], element);\n    };\n    if (actionCallback) {\n        if (text.length > 0) {\n            wrapper.appendChild(createSanitizedElement('p', [], [], text));\n        }\n        const textEl = createSanitizedElement('span', [], [], [\n            createSanitizedElement('span', [], [], actionText),\n            actionLogo && actionLogo === 'external' ? createIconSVGExternal() : undefined\n        ]);\n        wrapper.appendChild(createSanitizedElement('p', [], [], [createSanitizedElement('a', [], [['id', id]], [isBold ? wrapBold([textEl]) : textEl])]));\n    }\n    else if (actionText) {\n        if (text.length > 0) {\n            wrapper.appendChild(createSanitizedElement('p', ['beacon-toast__action__item__subtitle'], [], text));\n        }\n        const textEl = createSanitizedElement('span', [], [], actionText);\n        wrapper.appendChild(createSanitizedElement('p', [], [], [isBold ? wrapBold([textEl]) : textEl]));\n    }\n    else {\n        const textEl = createSanitizedElement('p', [], [], text);\n        wrapper.appendChild(isBold ? wrapBold([textEl]) : textEl);\n    }\n    if (actionCallback) {\n        wrapper.addEventListener('click', actionCallback);\n    }\n    return wrapper;\n});\nconst removeAllChildNodes = (parent) => {\n    while (parent.firstChild) {\n        parent.removeChild(parent.firstChild);\n    }\n};\nconst formatToastText = (html) => {\n    var _a, _b;\n    const walletIcon = (_a = globalToastConfig === null || globalToastConfig === void 0 ? void 0 : globalToastConfig.walletInfo) === null || _a === void 0 ? void 0 : _a.icon;\n    const walletName = (_b = globalToastConfig === null || globalToastConfig === void 0 ? void 0 : globalToastConfig.walletInfo) === null || _b === void 0 ? void 0 : _b.name;\n    let walletEl;\n    const walletNameEl = createSanitizedElement('strong', [], [], walletName !== null && walletName !== void 0 ? walletName : 'Wallet');\n    if (walletIcon) {\n        walletEl = createSanitizedElement('span', ['beacon-toast__wallet__container'], [], [\n            createSanitizedElement('img', ['beacon-toast__content__img'], [['src', walletIcon]], ''),\n            walletNameEl\n        ]);\n    }\n    else {\n        walletEl = walletNameEl;\n    }\n    const splits = html.split(`{{wallet}}`);\n    if (splits.length === 1) {\n        return [createSanitizedElement('span', [], [], html)];\n    }\n    else {\n        const out = [];\n        for (let x = 0; x < splits.length; x++) {\n            out.push(createSanitizedElement('span', [], [], splits[x]));\n            if (x < splits.length - 1) {\n                out.push(walletEl);\n            }\n        }\n        return out;\n    }\n};\nconst getToastHTML = (config) => {\n    const text = config.body;\n    const elements = formatToastText(text);\n    const outerEl = createSanitizedElement('span', ['beacon-toast__wallet__outer'], [], elements);\n    const toastContainerEl = constructToastContainer([outerEl]);\n    return {\n        style: toastTemplates.default.css,\n        html: toastContainerEl\n    };\n};\n/**\n * Close a toast\n */\nconst closeToast = () => new Promise((resolve) => {\n    var _a;\n    globalToastConfig = undefined;\n    const wrapper = document.getElementById('beacon-toast-wrapper');\n    if (!wrapper) {\n        return resolve();\n    }\n    const elm = (_a = wrapper.shadowRoot) === null || _a === void 0 ? void 0 : _a.getElementById('beacon-toast');\n    if (elm) {\n        const animationDuration = 300;\n        if (timeout) {\n            clearTimeout(timeout);\n            timeout = undefined;\n        }\n        elm.className = elm.className.replace('fadeIn', 'fadeOut');\n        window.setTimeout(() => {\n            const parent = wrapper.parentNode;\n            if (parent) {\n                parent.removeChild(wrapper);\n            }\n            resolve();\n        }, animationDuration);\n    }\n    else {\n        resolve();\n    }\n});\nconst registerClick = (shadowRoot, id, callback) => {\n    const button = shadowRoot.getElementById(id);\n    if (button) {\n        button.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\n            yield callback(button);\n        }));\n    }\n    return button;\n};\nconst showElement = (shadowRoot, id) => {\n    const el = shadowRoot.getElementById(id);\n    if (el) {\n        el.classList.remove('hide');\n        el.classList.add('show');\n    }\n};\nconst hideElement = (shadowRoot, id) => {\n    const el = shadowRoot.getElementById(id);\n    if (el) {\n        el.classList.add('hide');\n        el.classList.remove('show');\n    }\n};\n// const showLoader = (): void => {\n//   showElement('beacon-toast-loader')\n// }\nconst hideLoader = (shadowRoot) => {\n    hideElement(shadowRoot, 'beacon-toast-loader');\n    showElement(shadowRoot, 'beacon-toast-loader-placeholder');\n};\nconst showExpand = (shadowRoot) => {\n    showElement(shadowRoot, 'beacon-toast-button-expand');\n    hideElement(shadowRoot, 'beacon-toast-button-close');\n};\nconst showClose = (shadowRoot) => {\n    showElement(shadowRoot, 'beacon-toast-button-close');\n    hideElement(shadowRoot, 'beacon-toast-button-expand');\n};\nconst collapseList = (shadowRoot) => {\n    const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n    const list = shadowRoot.getElementById('beacon-toast-list');\n    if (expandButton && list) {\n        expandButton.classList.remove('beacon-toast__upside_down');\n        list.classList.add('hide');\n        list.classList.remove('show');\n    }\n};\nconst expandList = (shadowRoot) => {\n    const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n    const list = shadowRoot.getElementById('beacon-toast-list');\n    if (expandButton && list) {\n        expandButton.classList.add('beacon-toast__upside_down');\n        list.classList.remove('hide');\n        list.classList.add('show');\n    }\n};\nconst expandOrCollapseList = (shadowRoot) => {\n    const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n    const list = shadowRoot.getElementById('beacon-toast-list');\n    if (expandButton && list) {\n        if (expandButton.classList.contains('beacon-toast__upside_down')) {\n            collapseList(shadowRoot);\n        }\n        else {\n            expandList(shadowRoot);\n        }\n    }\n};\nconst addActionsToToast = (shadowRoot, toastConfig, list) => __awaiter(void 0, void 0, void 0, function* () {\n    const actions = toastConfig.actions;\n    if (actions && actions.length > 0) {\n        const actionPromises = actions.map((action) => __awaiter(void 0, void 0, void 0, function* () {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            return createActionItem(action);\n        }));\n        const actionItems = yield Promise.all(actionPromises);\n        actionItems.forEach((item) => list.appendChild(item));\n        const poweredByBeacon = document.createElement('small');\n        poweredByBeacon.classList.add('beacon-toast__powered');\n        poweredByBeacon.appendChild(constructPoweredByBeacon());\n        list.appendChild(poweredByBeacon);\n        showExpand(shadowRoot);\n    }\n    else {\n        showClose(shadowRoot);\n        collapseList(shadowRoot);\n    }\n});\nconst createNewToast = (toastConfig) => __awaiter(void 0, void 0, void 0, function* () {\n    globalToastConfig = toastConfig;\n    const timer = toastConfig.timer;\n    const shadowRootEl = document.createElement('div');\n    shadowRootEl.setAttribute('id', 'beacon-toast-wrapper');\n    const shadowRoot = shadowRootEl.attachShadow({ mode: 'open' });\n    const wrapper = document.createElement('div');\n    const { style, html } = getToastHTML(toastConfig);\n    wrapper.appendChild(html);\n    const styleEl = document.createElement('style');\n    styleEl.textContent = style;\n    shadowRoot.appendChild(wrapper);\n    shadowRoot.appendChild(styleEl);\n    if (timer) {\n        timeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n            yield closeToast();\n        }), timer);\n    }\n    document.body.prepend(shadowRootEl);\n    const colorMode = getColorMode();\n    const elm = shadowRoot.getElementById(`beacon-toast`);\n    if (elm) {\n        elm.classList.add(`theme__${colorMode}`);\n    }\n    const list = shadowRoot.getElementById('beacon-toast-list');\n    if (list) {\n        yield addActionsToToast(shadowRoot, toastConfig, list);\n    }\n    const openWalletButtonEl = shadowRoot.getElementById('beacon-open-wallet');\n    if (openWalletButtonEl) {\n        if (toastConfig.openWalletAction) {\n            openWalletButtonEl.addEventListener('click', () => {\n                if (toastConfig.openWalletAction) {\n                    toastConfig.openWalletAction();\n                }\n            });\n        }\n        else {\n            openWalletButtonEl.classList.add('hide');\n        }\n    }\n    if (globalToastConfig.state === 'loading') {\n        expandTimeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n            const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n            if (expandButton && !expandButton.classList.contains('beacon-toast__upside_down')) {\n                expandOrCollapseList(shadowRoot);\n            }\n        }), EXPAND_AFTER);\n    }\n    registerClick(shadowRoot, 'beacon-toast-button-done', () => __awaiter(void 0, void 0, void 0, function* () {\n        yield closeToast();\n    }));\n    const closeButton = registerClick(shadowRoot, 'beacon-toast-button-close', () => __awaiter(void 0, void 0, void 0, function* () {\n        yield closeToast();\n    }));\n    if (closeButton && globalToastConfig.state === 'loading') {\n        closeButton.classList.add('hide');\n    }\n    registerClick(shadowRoot, 'beacon-toast-button-expand', () => __awaiter(void 0, void 0, void 0, function* () {\n        expandOrCollapseList(shadowRoot);\n    }));\n});\nconst updateToast = (toastConfig) => __awaiter(void 0, void 0, void 0, function* () {\n    globalToastConfig = Object.assign(Object.assign({}, globalToastConfig), toastConfig);\n    const timer = toastConfig.timer;\n    const wrapper = document.getElementById('beacon-toast-wrapper');\n    if (!wrapper) {\n        return;\n    }\n    const shadowRoot = wrapper.shadowRoot;\n    if (!shadowRoot) {\n        return;\n    }\n    const list = shadowRoot.getElementById('beacon-toast-list');\n    if (list) {\n        removeAllChildNodes(list);\n        yield addActionsToToast(shadowRoot, toastConfig, list);\n    }\n    if (globalToastConfig.state === 'loading') {\n        expandTimeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n            const expandButton = shadowRoot.getElementById('beacon-toast-button-expand');\n            if (expandButton && !expandButton.classList.contains('beacon-toast__upside_down')) {\n                expandOrCollapseList(shadowRoot);\n            }\n        }), EXPAND_AFTER);\n    }\n    const toastTextEl = shadowRoot.getElementById('beacon-text-content');\n    if (toastTextEl) {\n        removeAllChildNodes(toastTextEl);\n        toastTextEl.appendChild(createSanitizedElement('span', ['beacon-toast__wallet__outer'], [], formatToastText(toastConfig.body)));\n    }\n    const openWalletButtonEl = shadowRoot.getElementById('beacon-open-wallet');\n    if (openWalletButtonEl) {\n        if (toastConfig.openWalletAction) {\n            openWalletButtonEl.classList.remove('hide');\n            openWalletButtonEl.addEventListener('click', () => {\n                if (toastConfig.openWalletAction) {\n                    toastConfig.openWalletAction();\n                }\n            });\n        }\n        else {\n            openWalletButtonEl.classList.add('hide');\n        }\n    }\n    if (timer) {\n        timeout = window.setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n            yield closeToast();\n        }), timer);\n    }\n    const doneButton = shadowRoot.getElementById('beacon-toast-button-done');\n    if (doneButton) {\n        doneButton.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\n            yield closeToast();\n        }));\n    }\n});\n/**\n * Create a new toast\n *\n * @param toastConfig Configuration of the toast\n */\nconst openToast = (toastConfig) => __awaiter(void 0, void 0, void 0, function* () {\n    var _a;\n    if (expandTimeout) {\n        clearTimeout(expandTimeout);\n    }\n    const wrapper = document.getElementById('beacon-toast-wrapper');\n    if (wrapper) {\n        if (toastConfig.forceNew) {\n            yield closeToast();\n            yield createNewToast(toastConfig);\n        }\n        else {\n            yield updateToast(toastConfig);\n        }\n    }\n    else {\n        yield createNewToast(toastConfig);\n    }\n    if (globalToastConfig && globalToastConfig.state === 'finished') {\n        const shadowRoot = (_a = document.getElementById('beacon-toast-wrapper')) === null || _a === void 0 ? void 0 : _a.shadowRoot;\n        if (shadowRoot) {\n            hideLoader(shadowRoot);\n            showClose(shadowRoot);\n            expandList(shadowRoot);\n        }\n    }\n    return;\n});\nexport { closeToast, openToast };\n//# sourceMappingURL=Toast.js.map"]},"metadata":{},"sourceType":"module"}