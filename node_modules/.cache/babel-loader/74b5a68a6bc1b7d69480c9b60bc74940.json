{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function debounce(durationSelector) {\n  return function (source) {\n    return source.lift(new DebounceOperator(durationSelector));\n  };\n}\n\nvar DebounceOperator = /*@__PURE__*/function () {\n  function DebounceOperator(durationSelector) {\n    this.durationSelector = durationSelector;\n  }\n\n  DebounceOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new DebounceSubscriber(subscriber, this.durationSelector));\n  };\n\n  return DebounceOperator;\n}();\n\nvar DebounceSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(DebounceSubscriber, _super);\n\n  function DebounceSubscriber(destination, durationSelector) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.durationSelector = durationSelector;\n    _this.hasValue = false;\n    return _this;\n  }\n\n  DebounceSubscriber.prototype._next = function (value) {\n    try {\n      var result = this.durationSelector.call(this, value);\n\n      if (result) {\n        this._tryNext(value, result);\n      }\n    } catch (err) {\n      this.destination.error(err);\n    }\n  };\n\n  DebounceSubscriber.prototype._complete = function () {\n    this.emitValue();\n    this.destination.complete();\n  };\n\n  DebounceSubscriber.prototype._tryNext = function (value, duration) {\n    var subscription = this.durationSubscription;\n    this.value = value;\n    this.hasValue = true;\n\n    if (subscription) {\n      subscription.unsubscribe();\n      this.remove(subscription);\n    }\n\n    subscription = innerSubscribe(duration, new SimpleInnerSubscriber(this));\n\n    if (subscription && !subscription.closed) {\n      this.add(this.durationSubscription = subscription);\n    }\n  };\n\n  DebounceSubscriber.prototype.notifyNext = function () {\n    this.emitValue();\n  };\n\n  DebounceSubscriber.prototype.notifyComplete = function () {\n    this.emitValue();\n  };\n\n  DebounceSubscriber.prototype.emitValue = function () {\n    if (this.hasValue) {\n      var value = this.value;\n      var subscription = this.durationSubscription;\n\n      if (subscription) {\n        this.durationSubscription = undefined;\n        subscription.unsubscribe();\n        this.remove(subscription);\n      }\n\n      this.value = undefined;\n      this.hasValue = false;\n\n      _super.prototype._next.call(this, value);\n    }\n  };\n\n  return DebounceSubscriber;\n}(SimpleOuterSubscriber);","map":{"version":3,"sources":["../../../src/internal/operators/debounce.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function debounce(durationSelector) {\n    return function (source) { return source.lift(new DebounceOperator(durationSelector)); };\n}\nvar DebounceOperator = /*@__PURE__*/ (function () {\n    function DebounceOperator(durationSelector) {\n        this.durationSelector = durationSelector;\n    }\n    DebounceOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DebounceSubscriber(subscriber, this.durationSelector));\n    };\n    return DebounceOperator;\n}());\nvar DebounceSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DebounceSubscriber, _super);\n    function DebounceSubscriber(destination, durationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.durationSelector = durationSelector;\n        _this.hasValue = false;\n        return _this;\n    }\n    DebounceSubscriber.prototype._next = function (value) {\n        try {\n            var result = this.durationSelector.call(this, value);\n            if (result) {\n                this._tryNext(value, result);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    DebounceSubscriber.prototype._complete = function () {\n        this.emitValue();\n        this.destination.complete();\n    };\n    DebounceSubscriber.prototype._tryNext = function (value, duration) {\n        var subscription = this.durationSubscription;\n        this.value = value;\n        this.hasValue = true;\n        if (subscription) {\n            subscription.unsubscribe();\n            this.remove(subscription);\n        }\n        subscription = innerSubscribe(duration, new SimpleInnerSubscriber(this));\n        if (subscription && !subscription.closed) {\n            this.add(this.durationSubscription = subscription);\n        }\n    };\n    DebounceSubscriber.prototype.notifyNext = function () {\n        this.emitValue();\n    };\n    DebounceSubscriber.prototype.notifyComplete = function () {\n        this.emitValue();\n    };\n    DebounceSubscriber.prototype.emitValue = function () {\n        if (this.hasValue) {\n            var value = this.value;\n            var subscription = this.durationSubscription;\n            if (subscription) {\n                this.durationSubscription = undefined;\n                subscription.unsubscribe();\n                this.remove(subscription);\n            }\n            this.value = undefined;\n            this.hasValue = false;\n            _super.prototype._next.call(this, value);\n        }\n    };\n    return DebounceSubscriber;\n}(SimpleOuterSubscriber));\n//# sourceMappingURL=debounce.js.map\n"]},"metadata":{},"sourceType":"module"}