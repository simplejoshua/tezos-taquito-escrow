{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\nvar Subscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(Subscriber, _super);\n\n  function Subscriber(destinationOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n\n    _this.syncErrorValue = null;\n    _this.syncErrorThrown = false;\n    _this.syncErrorThrowable = false;\n    _this.isStopped = false;\n\n    switch (arguments.length) {\n      case 0:\n        _this.destination = emptyObserver;\n        break;\n\n      case 1:\n        if (!destinationOrNext) {\n          _this.destination = emptyObserver;\n          break;\n        }\n\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            _this.destination = destinationOrNext;\n            destinationOrNext.add(_this);\n          } else {\n            _this.syncErrorThrowable = true;\n            _this.destination = new SafeSubscriber(_this, destinationOrNext);\n          }\n\n          break;\n        }\n\n      default:\n        _this.syncErrorThrowable = true;\n        _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n        break;\n    }\n\n    return _this;\n  }\n\n  Subscriber.prototype[rxSubscriberSymbol] = function () {\n    return this;\n  };\n\n  Subscriber.create = function (next, error, complete) {\n    var subscriber = new Subscriber(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  };\n\n  Subscriber.prototype.next = function (value) {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  };\n\n  Subscriber.prototype.error = function (err) {\n    if (!this.isStopped) {\n      this.isStopped = true;\n\n      this._error(err);\n    }\n  };\n\n  Subscriber.prototype.complete = function () {\n    if (!this.isStopped) {\n      this.isStopped = true;\n\n      this._complete();\n    }\n  };\n\n  Subscriber.prototype.unsubscribe = function () {\n    if (this.closed) {\n      return;\n    }\n\n    this.isStopped = true;\n\n    _super.prototype.unsubscribe.call(this);\n  };\n\n  Subscriber.prototype._next = function (value) {\n    this.destination.next(value);\n  };\n\n  Subscriber.prototype._error = function (err) {\n    this.destination.error(err);\n    this.unsubscribe();\n  };\n\n  Subscriber.prototype._complete = function () {\n    this.destination.complete();\n    this.unsubscribe();\n  };\n\n  Subscriber.prototype._unsubscribeAndRecycle = function () {\n    var _parentOrParents = this._parentOrParents;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  };\n\n  return Subscriber;\n}(Subscription);\n\nexport { Subscriber };\n\nvar SafeSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(SafeSubscriber, _super);\n\n  function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n\n    _this._parentSubscriber = _parentSubscriber;\n    var next;\n    var context = _this;\n\n    if (isFunction(observerOrNext)) {\n      next = observerOrNext;\n    } else if (observerOrNext) {\n      next = observerOrNext.next;\n      error = observerOrNext.error;\n      complete = observerOrNext.complete;\n\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n\n        if (isFunction(context.unsubscribe)) {\n          _this.add(context.unsubscribe.bind(context));\n        }\n\n        context.unsubscribe = _this.unsubscribe.bind(_this);\n      }\n    }\n\n    _this._context = context;\n    _this._next = next;\n    _this._error = error;\n    _this._complete = complete;\n    return _this;\n  }\n\n  SafeSubscriber.prototype.next = function (value) {\n    if (!this.isStopped && this._next) {\n      var _parentSubscriber = this._parentSubscriber;\n\n      if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.error = function (err) {\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n      var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n\n        hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError(err);\n        }\n\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.complete = function () {\n    var _this = this;\n\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n\n      if (this._complete) {\n        var wrappedComplete = function () {\n          return _this._complete.call(_this._context);\n        };\n\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError(err);\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n    if (!config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error('bad call');\n    }\n\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError(err);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  SafeSubscriber.prototype._unsubscribe = function () {\n    var _parentSubscriber = this._parentSubscriber;\n    this._context = null;\n    this._parentSubscriber = null;\n\n    _parentSubscriber.unsubscribe();\n  };\n\n  return SafeSubscriber;\n}(Subscriber);\n\nexport { SafeSubscriber };","map":{"version":3,"sources":["../../src/internal/Subscriber.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n"]},"metadata":{},"sourceType":"module"}