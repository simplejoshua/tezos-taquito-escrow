{"ast":null,"code":"/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\n\nvar Observable = /*@__PURE__*/function () {\n  function Observable(subscribe) {\n    this._isScalar = false;\n\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  Observable.prototype.lift = function (operator) {\n    var observable = new Observable();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  };\n\n  Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n    var operator = this.operator;\n    var sink = toSubscriber(observerOrNext, error, complete);\n\n    if (operator) {\n      sink.add(operator.call(sink, this.source));\n    } else {\n      sink.add(this.source || config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable ? this._subscribe(sink) : this._trySubscribe(sink));\n    }\n\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      if (sink.syncErrorThrowable) {\n        sink.syncErrorThrowable = false;\n\n        if (sink.syncErrorThrown) {\n          throw sink.syncErrorValue;\n        }\n      }\n    }\n\n    return sink;\n  };\n\n  Observable.prototype._trySubscribe = function (sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        sink.syncErrorThrown = true;\n        sink.syncErrorValue = err;\n      }\n\n      if (canReportError(sink)) {\n        sink.error(err);\n      } else {\n        console.warn(err);\n      }\n    }\n  };\n\n  Observable.prototype.forEach = function (next, promiseCtor) {\n    var _this = this;\n\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var subscription;\n      subscription = _this.subscribe(function (value) {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n\n          if (subscription) {\n            subscription.unsubscribe();\n          }\n        }\n      }, reject, resolve);\n    });\n  };\n\n  Observable.prototype._subscribe = function (subscriber) {\n    var source = this.source;\n    return source && source.subscribe(subscriber);\n  };\n\n  Observable.prototype[Symbol_observable] = function () {\n    return this;\n  };\n\n  Observable.prototype.pipe = function () {\n    var operations = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n\n    if (operations.length === 0) {\n      return this;\n    }\n\n    return pipeFromArray(operations)(this);\n  };\n\n  Observable.prototype.toPromise = function (promiseCtor) {\n    var _this = this;\n\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var value;\n\n      _this.subscribe(function (x) {\n        return value = x;\n      }, function (err) {\n        return reject(err);\n      }, function () {\n        return resolve(value);\n      });\n    });\n  };\n\n  Observable.create = function (subscribe) {\n    return new Observable(subscribe);\n  };\n\n  return Observable;\n}();\n\nexport { Observable };\n\nfunction getPromiseCtor(promiseCtor) {\n  if (!promiseCtor) {\n    promiseCtor = config.Promise || Promise;\n  }\n\n  if (!promiseCtor) {\n    throw new Error('no Promise impl found');\n  }\n\n  return promiseCtor;\n}","map":{"version":3,"sources":["../../src/internal/Observable.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n"]},"metadata":{},"sourceType":"module"}